import{_ as a,o as s,c as o,a as n,b as c,w as r,F as d,d as e,e as i,r as p}from"./app.625aa393.js";var l="/assets/01.7339d34e.png";const u={},g=n("h2",{id:"_1-settings-\u7C7B\u548C-settings-gradle-\u6587\u4EF6",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-settings-\u7C7B\u548C-settings-gradle-\u6587\u4EF6","aria-hidden":"true"},"#"),e(" 1. "),n("code",null,"Settings"),e(" \u7C7B\u548C "),n("code",null,"settings.gradle"),e(" \u6587\u4EF6")],-1),h=e("\u5728 "),S=e("\u5206\u6790 setting.gradle \u6587\u4EF6\u7684\u5185\u90E8\u5B9E\u73B0"),k=e(" \u4E2D\u6709\u63D0\u5230\uFF1A"),j=i(`<div class="language-text ext-text"><pre class="language-text"><code>1. settings.gradle \u7F16\u8BD1\u751F\u6210\u7684\u5B57\u8282\u7801\u6587\u4EF6\uFF0C\u662F\u4E00\u4E2A SettingsScript \u7684\u5B50\u7C7B\u6587\u4EF6\uFF1B

2. SettingsScript \u7C7B\u662F\u4E00\u4E2A\u811A\u672C\u7C7B\uFF0C\u5176\u4E2D\u7684 getScriptTarget() \u8FD4\u56DE\u4E00\u4E2A\u76EE\u6807\u5BF9\u8C61 target\uFF0C
   \u8FD9\u4E2A\u76EE\u6807\u5BF9\u8C61 target \u4E3A settings.gradle \u6587\u4EF6\u4E2D\u63D0\u4F9B\u4E86\u53EF\u4EE5\u4F7F\u7528\u7684 API\uFF1B

3. \u4E3A settings.gradle \u6587\u4EF6\u4E2D\u63D0\u4F9B\u53EF\u4EE5\u4F7F\u7528\u7684 API \u7684\u76EE\u6807\u5BF9\u8C61 target \u5C31\u662F\u4E00\u4E2A\u52A8\u6001\u521B\u5EFA\u7684 DefaultSettings \u7684\u5B50\u7C7B\u3002
   \u4E5F\u5C31\u662F\u8BF4\uFF0Csetting.gradle \u6587\u4EF6\u4E2D\u53EF\u4EE5\u4F7F\u7528 DefaultSettings \u63D0\u4F9B\u7684API\uFF1B

4. \u67E5\u770B\u6E90\u7801\uFF0C\u5927\u6982\u5224\u65AD\u662F\u4F7F\u7528 AsmBackedClassGenerator \u6765\u52A8\u6001\u521B\u5EFA DefaultSettings \u7684\u5B50\u7C7B\u7684\u3002
   \u8FD9\u4E0E\u52A8\u6001\u521B\u5EFA DefaultProject \u7684\u5B50\u7C7B\u6240\u4F7F\u7528\u7684\u751F\u6210\u5668\u4E00\u6837\u3002\u5728 AsmBackedClassGenerator \u4E2D\uFF0C
   \u53EF\u4EE5\u770B\u5230\u521B\u5EFA DefaultSettings \u5B50\u7C7B\u65F6\u6240\u52A8\u6001\u751F\u6210\u7684\u4E00\u4E9B API\uFF0C\u8FD9\u4E9B\u52A8\u6001\u751F\u6210\u7684 API \u4E5F\u53EF\u4EE5\u5728\u8BE5 settings.gradle \u4E2D\u4F7F\u7528\u3002

\u53C2\u8003\uFF1A
org.gradle.initialization.SettingsScript
org.gradle.initialization.DefaultSettings // implements Settings
org.gradle.api.initialization.Settings
org.gradle.initialization.SettingsFactory
org.gradle.internal.service.scopes.BuildScopeServices
org.gradle.api.internal.ClassGeneratorBackedInstantiator
org.gradle.api.internal.AsmBackedClassGenerator
</code></pre></div><p>\u7EFC\u4E0A\uFF0C\u5C31\u50CF <code>build.gradle</code> \u6587\u4EF6\u4E2D\u53EF\u4EE5\u8C03\u7528 <code>Project</code> \u7684 <code>API</code> \u6765\u521D\u59CB\u5316\u4E00\u4E2A <code>Project</code> \u7C7B\u5BF9\u8C61\u4E00\u6837\u3002</p><p><code>settings.gradle</code> \u6587\u4EF6\u4E2D\u5219\u53EF\u4EE5\u8C03\u7528 <code>Settings</code> \u7684 <code>API</code> \u7528\u6765\u521D\u59CB\u5316\u4E00\u4E2A <code>Settings</code> \u7C7B\u5BF9\u8C61\u3002</p><h3 id="_1-1-settings-gradle-\u6587\u4EF6\u7684\u4E3B\u8981\u4F5C\u7528-\u5BFC\u5165\u5B50-project" tabindex="-1"><a class="header-anchor" href="#_1-1-settings-gradle-\u6587\u4EF6\u7684\u4E3B\u8981\u4F5C\u7528-\u5BFC\u5165\u5B50-project" aria-hidden="true">#</a> 1.1 <code>settings.gradle</code> \u6587\u4EF6\u7684\u4E3B\u8981\u4F5C\u7528\uFF1A\u5BFC\u5165\u5B50 <code>Project</code></h3><p><code>settings.gradle</code> \u6587\u4EF6\u7684\u4E3B\u8981\u4F5C\u7528\u5C31\u662F\u901A\u8FC7 <code>Settings</code> \u7C7B\u63D0\u4F9B\u7684 <code>include</code> \u65B9\u6CD5\u5BFC\u5165\u5B50 <code>Project</code>\u3002</p><h3 id="_1-2-gradle-\u521D\u59CB\u5316\u9636\u6BB5\u7684\u4E3B\u8981\u5DE5\u4F5C-\u89E3\u6790\u51FA-project-\u6811\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_1-2-gradle-\u521D\u59CB\u5316\u9636\u6BB5\u7684\u4E3B\u8981\u5DE5\u4F5C-\u89E3\u6790\u51FA-project-\u6811\u7ED3\u6784" aria-hidden="true">#</a> 1.2 <code>Gradle</code> \u521D\u59CB\u5316\u9636\u6BB5\u7684\u4E3B\u8981\u5DE5\u4F5C\uFF1A\u89E3\u6790\u51FA <code>Project</code> \u6811\u7ED3\u6784</h3><p><code>Gradle</code> \u521D\u59CB\u5316\u9636\u6BB5\u7684\u4E3B\u8981\u5DE5\u4F5C\u5C31\u662F\u5BF9 <code>settings.gradle</code> \u6587\u4EF6\u8FDB\u884C\u5904\u7406\uFF0C\u89E3\u6790\u51FA\u6574\u4E2A <code>Project</code> \u9879\u76EE\u7684 <code>Project</code> \u6811\u7ED3\u6784\u3002</p><h3 id="_1-3-settings-\u7C7B\u7684\u76F8\u5173-api" tabindex="-1"><a class="header-anchor" href="#_1-3-settings-\u7C7B\u7684\u76F8\u5173-api" aria-hidden="true">#</a> 1.3 <code>Settings</code> \u7C7B\u7684\u76F8\u5173 <code>API</code></h3><h4 id="_1-3-1-\u5BFC\u5165\u4E00\u4E2A\u6216\u591A\u4E2A\u5B50-project" tabindex="-1"><a class="header-anchor" href="#_1-3-1-\u5BFC\u5165\u4E00\u4E2A\u6216\u591A\u4E2A\u5B50-project" aria-hidden="true">#</a> 1.3.1 \u5BFC\u5165\u4E00\u4E2A\u6216\u591A\u4E2A\u5B50 <code>Project</code></h4><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token keyword">void</span> <span class="token function">include</span><span class="token punctuation">(</span>String<span class="token punctuation">...</span> projectPaths<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>\u4F5C\u7528\uFF1A\u5BFC\u5165\u4E00\u4E2A\u6216\u591A\u4E2A\u5B50 Project

\u6CE8\u610F\uFF1AprojectPath \u5E76\u4E0D\u662F\u8868\u793A\u5B50 Project \u6240\u5728\u7684\u6587\u4EF6\u8DEF\u5F84\uFF0C\u800C\u662F\u8868\u793A\u5728\u5C06\u8981\u6784\u5EFA\u7684\u6574\u4E2A Project \u6811\u7ED3\u6784\u4E2D\u8BE5\u5B50 Project \u6240\u5728\u7684\u7ED3\u6784\u4F4D\u7F6E\uFF0C\u5982\uFF1A

    include &#39;:projectName1&#39;  
        1. \u8868\u793A\u5BFC\u5165\u4E86\u4E00\u4E2A\u540D\u4E3A projectName1 \u7684\u4E00\u7EA7\u5B50 Project\uFF0C\u5373\u8BE5\u5B50 Project \u662F\u6839 Project \u4E0B\u7684\u76F4\u63A5\u5B50 Project
        2. \u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5728\u6839 Project \u7684\u6587\u4EF6\u5939\u4E0B\uFF0C\u5E94\u8BE5\u6709\u4E00\u4E2A\u540D\u4E3A projectName1 \u7684\u6587\u4EF6\u5939\u4F5C\u4E3A\u8BE5\u5B50 Project \u7684\u6587\u4EF6\u5939

    include &#39;:projectName1:projectName2&#39;
        1. \u8868\u793A\u5BFC\u5165\u4E86\u4E00\u4E2A\u540D\u4E3A projectName2 \u7684\u4E8C\u7EA7\u5B50 Project\uFF0C\u5373\u8BE5\u5B50 Project \u662F\u4E00\u7EA7\u5B50 Project(projectName1) \u4E0B\u7684\u5B50 Project
        2. \u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5728\u6839 Project \u7684\u6587\u4EF6\u5939\u4E0B\u7684 projectName1 \u6587\u4EF6\u5939\u4E0B\uFF0C\u5E94\u8BE5\u6709\u4E00\u4E2A\u540D\u4E3A projectName2 \u7684\u6587\u4EF6\u5939
</code></pre></div><h4 id="_1-3-2-\u5BFC\u5165\u9879\u76EE\u4E4B\u5916\u7684\u6587\u4EF6\u5939\u4F5C\u4E3A\u5B50-project" tabindex="-1"><a class="header-anchor" href="#_1-3-2-\u5BFC\u5165\u9879\u76EE\u4E4B\u5916\u7684\u6587\u4EF6\u5939\u4F5C\u4E3A\u5B50-project" aria-hidden="true">#</a> 1.3.2 \u5BFC\u5165\u9879\u76EE\u4E4B\u5916\u7684\u6587\u4EF6\u5939\u4F5C\u4E3A\u5B50 <code>Project</code></h4><p>\u5BFC\u5165\u6839 <code>Project</code> \u76EE\u5F55\u4E4B\u5916\u7684\u6587\u4EF6\u5939\u4F5C\u4E3A\u5B50 <code>Project</code> \u7684\u6B65\u9AA4\u5982\u4E0B\uFF1A</p><div class="language-text ext-text"><pre class="language-text"><code>Step1. \u5148\u6267\u884C include &#39;:subProject&#39;  \u8868\u793A\u5BFC\u5165\u4E86\u4E00\u4E2A\u540D\u4E3A subProject \u7684\u4E00\u7EA7\u5B50 Project

Step2. \u518D\u6267\u884C project(&#39;:subProject&#39;).projectDir = file(&#39;subProjectDir&#39;)
    \u8BE5\u4EE3\u7801\u8868\u793A\u5C06 subProjectDir\uFF08\u6839 Project \u76EE\u5F55\u4E4B\u5916\u7684\u6587\u4EF6\u5939\u8DEF\u5F84\uFF09\u4F5C\u4E3A subProject \u7684\u5DE5\u7A0B\u76EE\u5F55\u3002
</code></pre></div><h2 id="_2-sourceset-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-sourceset-\u7C7B" aria-hidden="true">#</a> 2. <code>SourceSet</code> \u7C7B</h2><h3 id="_2-1-\u4F7F\u7528\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_2-1-\u4F7F\u7528\u793A\u4F8B" aria-hidden="true">#</a> 2.1 \u4F7F\u7528\u793A\u4F8B</h3><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>android <span class="token punctuation">{</span> <span class="token comment">// android \u8868\u793A\u4E00\u4E2A Android \u5DE5\u7A0B\uFF0C\u914D\u7F6E\u95ED\u5305\u4E2D\u5BF9 Android \u5DE5\u7A0B\u8FDB\u884C\u914D\u7F6E</span>
    sourceSets <span class="token punctuation">{</span> <span class="token comment">// \u4ECE &quot;Sets&quot; \u53EF\u4EE5\u770B\u51FA\uFF0C\u662Fset\u7684\u96C6\u5408\uFF08\u5373\u96C6\u5408\u7684\u96C6\u5408\uFF09\uFF0CsourceSets \u8868\u793A\u8D44\u6E90\u96C6\u5408\uFF0C\u914D\u7F6E\u95ED\u5305\u4E2D\u5BF9\u8D44\u6E90\u8FDB\u884C\u914D\u7F6E</span>
        main <span class="token punctuation">{</span> <span class="token comment">// main \u8868\u793A\u4E00\u4E2A set \u96C6\u5408\uFF0C\u8FD9\u91CC\u5C31\u662F AndroidSourceSet\uFF0C\u914D\u7F6E\u95ED\u5305\u4E2D\u5BF9 Android \u8D44\u6E90\u8FDB\u884C\u914D\u7F6E</span>
            <span class="token comment">//\u53EF\u4EE5\u8C03\u7528 AndroidSourceSet \u7684 API</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-2-sourcesets-configureclosure-\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_2-2-sourcesets-configureclosure-\u7684\u4F5C\u7528" aria-hidden="true">#</a> 2.2 <code>sourceSets(configureClosure)</code> \u7684\u4F5C\u7528</h3><div class="language-text ext-text"><pre class="language-text"><code>sourceSets(configureClosure) \u7684\u4F5C\u7528\u5C31\u662F\u7528\u6765\u914D\u7F6E sourceSets \u5BF9\u8C61\u7684
sourceSets \u5BF9\u8C61\u662F\u4E00\u4E2A\u5BB9\u5668\uFF0C\u5BB9\u5668\u4E2D\u7684\u5143\u7D20\u662F AndroidSourceSet\uFF0C\u5373 Android \u8D44\u6E90\u96C6\u5408\uFF0C
\u4E5F\u5C31\u662F\u8BF4 sourceSets(configureClosure) \u5C31\u662F\u7528\u6765\u914D\u7F6E\u5404\u79CD Android \u8D44\u6E90\u96C6\u5408\u7684\uFF0C
\u5177\u4F53\u6709\u54EA\u4E9B Android \u8D44\u6E90\u96C6\u5408\uFF0C\u7531 Android-Gradle \u63D2\u4EF6\u6765\u521D\u59CB\u5316\uFF0C
\u4ECE\u4E0A\u9762\u7684\u6E90\u7801\u53EF\u4EE5\u770B\u51FA\uFF0CsourceSets \u5BB9\u5668\u4E2D\u4FDD\u5B58\u4E86\u4E00\u4E2A\u540D\u4E3A main \u7684 Android \u8D44\u6E90\u96C6\u5408\uFF08\u5373 main \u662F\u4E00\u4E2A AndroidSourceSet \u5BF9\u8C61\uFF09
\u53EF\u4EE5\u901A\u8FC7 main(configureClosure) \u914D\u7F6E\u540D\u4E3A main \u7684 Android \u8D44\u6E90\u96C6\u5408\uFF0C\u914D\u7F6E\u95ED\u5305\u4E2D\u53EF\u4EE5\u8C03\u7528 AndroidSourceSet \u7684 API
</code></pre></div><h3 id="_2-3-android-\u8D44\u6E90\u96C6\u5408-main-\u7684\u914D\u7F6E\u8BE6\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-3-android-\u8D44\u6E90\u96C6\u5408-main-\u7684\u914D\u7F6E\u8BE6\u89E3" aria-hidden="true">#</a> 2.3 <code>Android</code> \u8D44\u6E90\u96C6\u5408 &quot;<code>main</code>&quot; \u7684\u914D\u7F6E\u8BE6\u89E3</h3><p><code>main(configureClosure)</code> \u53EF\u4EE5\u8BBF\u95EE <code>DefaultAndroidSourceSet</code> \u7684 <code>API</code>\u3002</p><p>\u914D\u7F6E <code>Android</code> \u8D44\u6E90\u96C6\u5408\uFF0C\u4E3B\u8981\u5C31\u662F\u901A\u8FC7\u914D\u7F6E <code>DefaultAndroidSourceSet</code> \u4E2D\u7684\u76F8\u5173\u5C5E\u6027\uFF0C\u6765\u6307\u5B9A\u76F8\u5173\u6587\u4EF6\u7684\u8BBF\u95EE\u8DEF\u5F84\u3002</p><p><code>DefaultAndroidSourceSet</code> \u4E2D\u7684\u90E8\u5206\u5C5E\u6027\u5982\u4E0B\uFF1A</p><ol><li><p>\u8868\u793A\u8D44\u6E90\u76EE\u5F55\u7684 <code>AndroidSourceDirectorySet</code> \u7C7B\u578B\u7684\u5C5E\u6027</p><div class="language-text ext-text"><pre class="language-text"><code>res
assets
java
aidl
jni
jniLibs
</code></pre></div><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token comment">/* \u8C03\u7528 AndroidSourceDirectorySet \u7684\u5982\u4E0B API \u53EF\u4EE5\u4E3A\u8FD9\u4E9B\u5C5E\u6027\u5206\u522B\u6307\u5B9A\u8D44\u6E90\u76EE\u5F55\u7684\u5B9E\u9645\u8DEF\u5F84 */</span>
AndroidSourceDirectorySet <span class="token function">srcDir</span><span class="token punctuation">(</span>Object srcDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
AndroidSourceDirectorySet <span class="token function">srcDirs</span><span class="token punctuation">(</span>Object<span class="token punctuation">...</span> srcDirs<span class="token punctuation">)</span><span class="token punctuation">;</span>
AndroidSourceDirectorySet <span class="token function">setSrcDirs</span><span class="token punctuation">(</span>Iterable<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">&gt;</span> srcDirs<span class="token punctuation">)</span><span class="token punctuation">;</span>

Set<span class="token operator">&lt;</span>File<span class="token operator">&gt;</span> <span class="token function">getSrcDirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>\u8868\u793A\u8D44\u6E90\u6587\u4EF6\u7684 <code>AndroidSourceFile</code> \u7C7B\u578B\u7684\u5C5E\u6027</p><div class="language-text ext-text"><pre class="language-text"><code>manifest
</code></pre></div><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token comment">/* \u8C03\u7528 AndroidSourceFile \u7684\u5982\u4E0B API \u53EF\u4EE5\u4E3A\u8BE5\u5C5E\u6027\u6307\u5B9A\u8D44\u6E90\u6587\u4EF6\u7684\u5B9E\u9645\u8DEF\u5F84 */</span>
AndroidSourceFile <span class="token function">srcFile</span><span class="token punctuation">(</span>Object srcPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

File <span class="token function">getSrcFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol><h3 id="_2-4-\u793A\u4F8B\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_2-4-\u793A\u4F8B\u4EE3\u7801" aria-hidden="true">#</a> 2.4 \u793A\u4F8B\u4EE3\u7801</h3><p><img src="`+l+'" alt="" loading="lazy"></p>',26);function _(m,P){const t=p("RouterLink");return s(),o(d,null,[g,n("p",null,[h,c(t,{to:"/zkq/gradle/_05_project.html#_2-4-6-%E5%88%86%E6%9E%90-setting-gradle-%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0"},{default:r(()=>[S]),_:1}),k]),j],64)}var A=a(u,[["render",_],["__file","_07_settings_sourcesets.html.vue"]]);export{A as default};
