<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zengkaiqiang562.github.io/zkq/android/basic/activity.html"><meta property="og:site_name" content="Android Guide"><meta property="og:title" content="Activity"><meta property="og:type" content="article"><meta property="og:image" content="https://zengkaiqiang562.github.io/"><meta property="og:updated_time" content="2022-07-06T10:07:29.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Activity"><meta property="article:tag" content="android-åŸºç¡€"><meta property="article:modified_time" content="2022-07-06T10:07:29.000Z"><script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?5dd2e8c97962d57b7b8fea1737c01743";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2922463_99aa80ii7cf.css"><title>Activity | Android Guide</title><meta name="description" content="Android å­¦ä¹  && é¢è¯•æŒ‡å—">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.5a38b724.css">
    <link rel="modulepreload" href="/assets/app.625aa393.js"><link rel="modulepreload" href="/assets/activity.html.c21cbbb6.js"><link rel="modulepreload" href="/assets/activity.html.2b2cc85c.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.png" alt="Android Guide"><!----><span class="site-name hide-in-pad">Android Guide</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" arialabel="é¢è¯•æŒ‡å—"><i class="icon iconfont icon-java"></i>é¢è¯•æŒ‡å—<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zhuanlan/" class="nav-link" arialabel="ä¼˜è´¨ä¸“æ "><i class="icon iconfont icon-recommend"></i>ä¼˜è´¨ä¸“æ <!----></a></div><div class="nav-item hide-in-mobile"><a href="/open-source-project/" class="nav-link" arialabel="é¡¹ç›®ç²¾é€‰"><i class="icon iconfont icon-github"></i>é¡¹ç›®ç²¾é€‰<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://snailclimb.gitee.io/javaguide/#/" rel="noopener noreferrer" target="_blank" arialabel="æ—§ç‰ˆé“¾æ¥" class="nav-link"><i class="icon iconfont icon-java"></i>æ—§ç‰ˆé“¾æ¥<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="https://javaguide.cn/feed.json" rel="noopener noreferrer" target="_blank" arialabel="RSSè®¢é˜…" class="nav-link"><i class="icon iconfont icon-rss"></i>RSSè®¢é˜…<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/about-the-author/" class="nav-link" arialabel="å…³äºä½œè€…"><i class="icon iconfont icon-zuozhe"></i>å…³äºä½œè€…<!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/zengkaiqiang562/JavaGuide" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" arialabelledby="auto" style="display:block;"><title id="auto" lang="en">auto icon</title><g fill="currentColor"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" arialabelledby="dark" style="display:none;"><title id="dark" lang="en">dark icon</title><g fill="currentColor"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" arialabelledby="light" style="display:none;"><title id="light" lang="en">light icon</title><g fill="currentColor"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></g></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">åŸºç¡€</span><span class="arrow down"></span></button><!--[--><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/zkq/android/basic/activity.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="Activity"><!---->Activity<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-ç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1. ç”Ÿå‘½å‘¨æœŸ"><!---->1. ç”Ÿå‘½å‘¨æœŸ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-1-ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢è¿‡ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.1 ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢è¿‡ç¨‹"><!---->1.1 ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢è¿‡ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2 æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ"><!---->1.2 æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-1-oncreate" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.1 onCreate"><!---->1.2.1 onCreate<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-2-onrestart" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.2 onRestart"><!---->1.2.2 onRestart<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-3-onstart" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.3 onStart"><!---->1.2.3 onStart<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-4-onresume" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.4 onResume"><!---->1.2.4 onResume<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-5-onpause" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.5 onPause"><!---->1.2.5 onPause<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-6-onstop" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.6 onStop"><!---->1.2.6 onStop<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-7-ondestroy" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.7 onDestroy"><!---->1.2.7 onDestroy<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-å…·ä½“åœºæ™¯åˆ†æ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.8 å…·ä½“åœºæ™¯åˆ†æ"><!---->1.2.8 å…·ä½“åœºæ™¯åˆ†æ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-1-activity-ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.8.1 Activity ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶"><!---->1.2.8.1 Activity ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-2-activity-é€€åˆ°åå°-åˆ‡æ¢åˆ°æ¡Œé¢-or-è·³è½¬åˆ°å…¶å®ƒ-activity" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.8.2 Activity é€€åˆ°åå°ï¼ˆåˆ‡æ¢åˆ°æ¡Œé¢ or è·³è½¬åˆ°å…¶å®ƒ Activityï¼‰"><!---->1.2.8.2 Activity é€€åˆ°åå°ï¼ˆåˆ‡æ¢åˆ°æ¡Œé¢ or è·³è½¬åˆ°å…¶å®ƒ Activityï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-3-è·³è½¬åˆ°é‡‡ç”¨äº†é€æ˜ä¸»é¢˜çš„å…¶å®ƒ-activity" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.8.3 è·³è½¬åˆ°é‡‡ç”¨äº†é€æ˜ä¸»é¢˜çš„å…¶å®ƒ Activity"><!---->1.2.8.3 è·³è½¬åˆ°é‡‡ç”¨äº†é€æ˜ä¸»é¢˜çš„å…¶å®ƒ Activity<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-4-activity-å›åˆ°å‰å°-ç”¨æˆ·å†æ¬¡å›åˆ°åŸ-activity" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.8.4 Activity å›åˆ°å‰å°ï¼ˆç”¨æˆ·å†æ¬¡å›åˆ°åŸ Activityï¼‰"><!---->1.2.8.4 Activity å›åˆ°å‰å°ï¼ˆç”¨æˆ·å†æ¬¡å›åˆ°åŸ Activityï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-5-é”å±-å¼€å±" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.8.5 é”å± &amp; å¼€å±"><!---->1.2.8.5 é”å± &amp; å¼€å±<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-6-ç”¨æˆ·æŒ‰-back-æŒ‰é”®å›é€€æ—¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2.8.6 ç”¨æˆ·æŒ‰ back æŒ‰é”®å›é€€æ—¶"><!---->1.2.8.6 ç”¨æˆ·æŒ‰ back æŒ‰é”®å›é€€æ—¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3 å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ"><!---->1.3 å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-1-èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®æ”¹å˜å¯¼è‡´-activity-é”€æ¯é‡å»º-å¦‚æ¨ªç«–å±åˆ‡æ¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3.1 èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®æ”¹å˜å¯¼è‡´ Activity é”€æ¯é‡å»ºï¼ˆå¦‚æ¨ªç«–å±åˆ‡æ¢ï¼‰"><!---->1.3.1 èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®æ”¹å˜å¯¼è‡´ Activity é”€æ¯é‡å»ºï¼ˆå¦‚æ¨ªç«–å±åˆ‡æ¢ï¼‰<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-1-1-onsaveinstancestate-onrestoreinstancestate" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3.1.1 onSaveInstanceState &amp; onRestoreInstanceState"><!---->1.3.1.1 onSaveInstanceState &amp; onRestoreInstanceState<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-1-2-view-å±‚æ¬¡ç»“æ„çš„ä¿å­˜ä¸æ¢å¤-å§”æ‰˜æ€æƒ³" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3.1.2 View å±‚æ¬¡ç»“æ„çš„ä¿å­˜ä¸æ¢å¤ &amp; å§”æ‰˜æ€æƒ³"><!---->1.3.1.2 View å±‚æ¬¡ç»“æ„çš„ä¿å­˜ä¸æ¢å¤ &amp; å§”æ‰˜æ€æƒ³<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-1-3-æ¨ªç«–å±åˆ‡æ¢æ—¶é˜»æ­¢-activity-çš„é”€æ¯é‡å»º-configchanges-å±æ€§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3.1.3 æ¨ªç«–å±åˆ‡æ¢æ—¶é˜»æ­¢ Activity çš„é”€æ¯é‡å»º &amp; configChanges å±æ€§"><!---->1.3.1.3 æ¨ªç«–å±åˆ‡æ¢æ—¶é˜»æ­¢ Activity çš„é”€æ¯é‡å»º &amp; configChanges å±æ€§<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-2-ç³»ç»Ÿå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„-activity-æ‰€åœ¨è¿›ç¨‹è¢«æ€æ­»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3.2 ç³»ç»Ÿå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„ Activity æ‰€åœ¨è¿›ç¨‹è¢«æ€æ­»"><!---->1.3.2 ç³»ç»Ÿå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„ Activity æ‰€åœ¨è¿›ç¨‹è¢«æ€æ­»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-4-å°†ä¸€ä¸ª-activity-è®¾ç½®æˆçª—å£çš„æ ·å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.4 å°†ä¸€ä¸ª Activity è®¾ç½®æˆçª—å£çš„æ ·å¼"><!---->1.4 å°†ä¸€ä¸ª Activity è®¾ç½®æˆçª—å£çš„æ ·å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-5-é€€å‡ºå·²è°ƒç”¨å¤šä¸ª-activity-çš„-application" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.5 é€€å‡ºå·²è°ƒç”¨å¤šä¸ª Activity çš„ Application"><!---->1.5 é€€å‡ºå·²è°ƒç”¨å¤šä¸ª Activity çš„ Application<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-6-ä¿®æ”¹-activity-è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.6 ä¿®æ”¹ Activity è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»"><!---->1.6 ä¿®æ”¹ Activity è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-å¯åŠ¨æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2. å¯åŠ¨æ¨¡å¼"><!---->2. å¯åŠ¨æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-1-ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.1 ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¨¡å¼"><!---->2.1 ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-å››ç§å¯åŠ¨æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2 å››ç§å¯åŠ¨æ¨¡å¼"><!---->2.2 å››ç§å¯åŠ¨æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-1-standard-æ ‡å‡†æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.1 standardï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰"><!---->2.2.1 standardï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-1-1-standard-æ¨¡å¼å¯åŠ¨çš„-activity-é»˜è®¤è¿›å…¥å½“å‰-context-çš„ä»»åŠ¡æ ˆä¸­" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.1.1 standard æ¨¡å¼å¯åŠ¨çš„ Activity é»˜è®¤è¿›å…¥å½“å‰ Context çš„ä»»åŠ¡æ ˆä¸­"><!---->2.2.1.1 standard æ¨¡å¼å¯åŠ¨çš„ Activity é»˜è®¤è¿›å…¥å½“å‰ Context çš„ä»»åŠ¡æ ˆä¸­<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-1-2-standard-æ¨¡å¼å¯åŠ¨æ—¶-context-æ— ä»»åŠ¡æ ˆçš„è§£å†³æ–¹æ¡ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.1.2 standard æ¨¡å¼å¯åŠ¨æ—¶ Context æ— ä»»åŠ¡æ ˆçš„è§£å†³æ–¹æ¡ˆ"><!---->2.2.1.2 standard æ¨¡å¼å¯åŠ¨æ—¶ Context æ— ä»»åŠ¡æ ˆçš„è§£å†³æ–¹æ¡ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-2-singletop-æ ˆé¡¶å¤ç”¨æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.2 singleTopï¼ˆæ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼‰"><!---->2.2.2 singleTopï¼ˆæ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-3-singletask-æ ˆå†…å¤ç”¨æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3 singleTaskï¼ˆæ ˆå†…å¤ç”¨æ¨¡å¼ï¼‰"><!---->2.2.3 singleTaskï¼ˆæ ˆå†…å¤ç”¨æ¨¡å¼ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-4-singleinstance-å•å®ä¾‹æ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.4 singleInstanceï¼ˆå•å®ä¾‹æ¨¡å¼ï¼‰"><!---->2.2.4 singleInstanceï¼ˆå•å®ä¾‹æ¨¡å¼ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-3-ç»™-activity-æŒ‡å®šå¯åŠ¨æ¨¡å¼çš„ä¸¤ç§æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.3 ç»™ Activity æŒ‡å®šå¯åŠ¨æ¨¡å¼çš„ä¸¤ç§æ–¹å¼"><!---->2.3 ç»™ Activity æŒ‡å®šå¯åŠ¨æ¨¡å¼çš„ä¸¤ç§æ–¹å¼<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-3-1-åœ¨-androidmanifest-xml-ä¸­é€šè¿‡-android-launchmode-å±æ€§æŒ‡å®š" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.3.1 åœ¨ AndroidManifest.xml ä¸­é€šè¿‡ android:launchMode å±æ€§æŒ‡å®š"><!---->2.3.1 åœ¨ AndroidManifest.xml ä¸­é€šè¿‡ android:launchMode å±æ€§æŒ‡å®š<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-3-2-åœ¨ä»£ç ä¸­é€šè¿‡ç»™-intent-è®¾ç½®çš„æ ‡å¿—ä½æŒ‡å®š" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.3.2 åœ¨ä»£ç ä¸­é€šè¿‡ç»™ Intent è®¾ç½®çš„æ ‡å¿—ä½æŒ‡å®š"><!---->2.3.2 åœ¨ä»£ç ä¸­é€šè¿‡ç»™ Intent è®¾ç½®çš„æ ‡å¿—ä½æŒ‡å®š<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-4-activity-çš„ä»»åŠ¡æ ˆ-taskaffinity-å±æ€§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4 Activity çš„ä»»åŠ¡æ ˆ &amp; taskAffinity å±æ€§"><!---->2.4 Activity çš„ä»»åŠ¡æ ˆ &amp; taskAffinity å±æ€§<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-4-1-taskaffinity-å±æ€§-singletask-æ¨¡å¼ç»“åˆä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.1 taskAffinity å±æ€§ &amp; singleTask æ¨¡å¼ç»“åˆä½¿ç”¨"><!---->2.4.1 taskAffinity å±æ€§ &amp; singleTask æ¨¡å¼ç»“åˆä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-4-2-taskaffinity-å±æ€§-allowtaskreparenting-å±æ€§ç»“åˆä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.2 taskAffinity å±æ€§ &amp; allowTaskReparenting å±æ€§ç»“åˆä½¿ç”¨"><!---->2.4.2 taskAffinity å±æ€§ &amp; allowTaskReparenting å±æ€§ç»“åˆä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-5-ç¤ºä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5 ç¤ºä¾‹"><!---->2.5 ç¤ºä¾‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-5-1-ç¤ºä¾‹-1-æŸ¥çœ‹-activity-ä»»åŠ¡æ ˆ-dumpsys-å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.1 ç¤ºä¾‹ 1ï¼šæŸ¥çœ‹ Activity ä»»åŠ¡æ ˆ &amp; dumpsys å‘½ä»¤"><!---->2.5.1 ç¤ºä¾‹ 1ï¼šæŸ¥çœ‹ Activity ä»»åŠ¡æ ˆ &amp; dumpsys å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-5-2-ç¤ºä¾‹-2-singletop-æ¨¡å¼å…·æœ‰-cleartop-çš„æ•ˆæœ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.2 ç¤ºä¾‹ 2ï¼šsingleTop æ¨¡å¼å…·æœ‰ clearTop çš„æ•ˆæœ"><!---->2.5.2 ç¤ºä¾‹ 2ï¼šsingleTop æ¨¡å¼å…·æœ‰ clearTop çš„æ•ˆæœ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-6-å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6 å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯"><!---->2.6 å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-activity-çš„-flags" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7 Activity çš„ Flags"><!---->2.7 Activity çš„ Flags<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-1-è®¾ç½®-activity-å¯åŠ¨æ¨¡å¼çš„-flags" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7.1  è®¾ç½® Activity å¯åŠ¨æ¨¡å¼çš„ Flags"><!---->2.7.1  è®¾ç½® Activity å¯åŠ¨æ¨¡å¼çš„ Flags<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-1-1-flag-activity-new-task" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7.1.1 FLAG_ACTIVITY_NEW_TASK"><!---->2.7.1.1 FLAG_ACTIVITY_NEW_TASK<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-1-2-flag-activity-single-top" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7.1.2 FLAG_ACTIVITY_SINGLE_TOP"><!---->2.7.1.2 FLAG_ACTIVITY_SINGLE_TOP<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-2-å½±å“-activity-è¿è¡ŒçŠ¶æ€çš„-flags" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7.2  å½±å“ Activity è¿è¡ŒçŠ¶æ€çš„ Flags"><!---->2.7.2  å½±å“ Activity è¿è¡ŒçŠ¶æ€çš„ Flags<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-2-1-flag-activity-clear-top" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7.2.1 FLAG_ACTIVITY_CLEAR_TOP"><!---->2.7.2.1 FLAG_ACTIVITY_CLEAR_TOP<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-2-2-flag-activity-exclude-from-recents" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7.2.2 FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS"><!---->2.7.2.2 FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-8-onnewintent-æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.8 onNewIntent æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ"><!---->2.8 onNewIntent æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_3-æ•°æ®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3. æ•°æ®"><!---->3. æ•°æ®<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_3-1-intent-ä¼ é€’æ•°æ®å¤ªå¤§-æŠ¥-transactiontoolargeexception-å¼‚å¸¸" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.1 Intent ä¼ é€’æ•°æ®å¤ªå¤§ï¼ŒæŠ¥ TransactionTooLargeException å¼‚å¸¸"><!---->3.1 Intent ä¼ é€’æ•°æ®å¤ªå¤§ï¼ŒæŠ¥ TransactionTooLargeException å¼‚å¸¸<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_4-context" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4. Context"><!---->4. Context<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_4-1-context-çš„ç»§æ‰¿å…³ç³»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.1 Context çš„ç»§æ‰¿å…³ç³»"><!---->4.1 Context çš„ç»§æ‰¿å…³ç³»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-è¿›ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5. è¿›ç¨‹"><!---->5. è¿›ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-1-è¿›ç¨‹ä¼˜å…ˆçº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.1 è¿›ç¨‹ä¼˜å…ˆçº§"><!---->5.1 è¿›ç¨‹ä¼˜å…ˆçº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-è¿›ç¨‹åˆ†ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2 è¿›ç¨‹åˆ†ç±»"><!---->5.2 è¿›ç¨‹åˆ†ç±»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-1-å‰å°è¿›ç¨‹-foreground-process" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2.1 å‰å°è¿›ç¨‹ï¼ˆForeground Processï¼‰"><!---->5.2.1 å‰å°è¿›ç¨‹ï¼ˆForeground Processï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-2-å¯è§è¿›ç¨‹-visible-process" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2.2 å¯è§è¿›ç¨‹ï¼ˆVisible Processï¼‰"><!---->5.2.2 å¯è§è¿›ç¨‹ï¼ˆVisible Processï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-3-æœåŠ¡è¿›ç¨‹-service-process" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2.3 æœåŠ¡è¿›ç¨‹ï¼ˆService Processï¼‰"><!---->5.2.3 æœåŠ¡è¿›ç¨‹ï¼ˆService Processï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-4-åå°è¿›ç¨‹-background-process" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2.4 åå°è¿›ç¨‹ï¼ˆBackground Processï¼‰"><!---->5.2.4 åå°è¿›ç¨‹ï¼ˆBackground Processï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-5-ç©ºè¿›ç¨‹-empty-process" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2.5 ç©ºè¿›ç¨‹ï¼ˆEmpty Processï¼‰"><!---->5.2.5 ç©ºè¿›ç¨‹ï¼ˆEmpty Processï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/fragment.html" class="nav-link sidebar-link sidebar-page" arialabel="Fragmentï¼ˆTODOï¼‰"><!---->Fragmentï¼ˆTODOï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/service.html" class="nav-link sidebar-link sidebar-page" arialabel="Service"><!---->Service<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/broadcast.html" class="nav-link sidebar-link sidebar-page" arialabel="BroadcastReceiver"><!---->BroadcastReceiver<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/contentprovider.html" class="nav-link sidebar-link sidebar-page" arialabel="ContentProvider"><!---->ContentProvider<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/serialize.html" class="nav-link sidebar-link sidebar-page" arialabel="å¯¹è±¡åºåˆ—åŒ–ï¼ˆTODOï¼‰"><!---->å¯¹è±¡åºåˆ—åŒ–ï¼ˆTODOï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/asynctask.html" class="nav-link sidebar-link sidebar-page" arialabel="AsyncTask"><!---->AsyncTask<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/handler.html" class="nav-link sidebar-link sidebar-page" arialabel="Androidçš„æ¶ˆæ¯æœºåˆ¶ï¼ˆTODOï¼‰"><!---->Androidçš„æ¶ˆæ¯æœºåˆ¶ï¼ˆTODOï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/custom-view.html" class="nav-link sidebar-link sidebar-page" arialabel="è‡ªå®šä¹‰Viewï¼ˆTODOï¼‰"><!---->è‡ªå®šä¹‰Viewï¼ˆTODOï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/ui-draw-process.html" class="nav-link sidebar-link sidebar-page" arialabel="UIç»˜åˆ¶æµç¨‹ï¼ˆDOINGï¼‰"><!---->UIç»˜åˆ¶æµç¨‹ï¼ˆDOINGï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/android/basic/event-dispatch-mechanism.html" class="nav-link sidebar-link sidebar-page" arialabel="äº‹ä»¶åˆ†å‘æœºåˆ¶"><!---->äº‹ä»¶åˆ†å‘æœºåˆ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ç»˜å›¾åŸºç¡€</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">åŠ¨ç”»</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">UI</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Jetpack</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">NDK</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">IPC</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">è“ç‰™å¼€å‘</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">æ€§èƒ½ä¼˜åŒ–</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ç³»ç»Ÿæºç åˆ†æ</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å…¶ä»–</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Activity</h1><div class="article-info"><span class="author-info" arialabel="ä½œè€…ğŸ–Š" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://zengkaiqiang562.github.io/" target="_blank" rel="noopener noreferrer">Zenk562</a></span><span property="author" content="Zenk562"></span></span><span class="category-info" arialabel="åˆ†ç±»ğŸŒˆ" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" arialabelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category clickable" role="navigation">android-åŸºç¡€</li><meta property="articleSection" content="android-åŸºç¡€"></ul></span><span arialabel="æ ‡ç­¾ğŸ·" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" arialabelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag clickable" role="navigation">android-åŸºç¡€</li></ul><meta property="keywords" content="android-åŸºç¡€"></span><span class="date-info" arialabel="å†™ä½œæ—¥æœŸğŸ“…" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022å¹´7æœˆ6æ—¥</span><meta property="datePublished" content="2022-07-06T10:07:29.000Z"></span><!----><span class="words-info" arialabel="å­—æ•°ğŸ” " isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" arialabelledby="word"><title id="word" lang="en">word icon</title><g fill="currentColor"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></g></svg><span>çº¦ 7999 å­—</span><meta property="wordCount" content="7999"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-ç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active toc-link level2">1. ç”Ÿå‘½å‘¨æœŸ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-1-ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢è¿‡ç¨‹" class="router-link-active router-link-exact-active toc-link level3">1.1 ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢è¿‡ç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active toc-link level3">1.2 æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-1-oncreate" class="router-link-active router-link-exact-active toc-link level4">1.2.1 onCreate</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-2-onrestart" class="router-link-active router-link-exact-active toc-link level4">1.2.2 onRestart</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-3-onstart" class="router-link-active router-link-exact-active toc-link level4">1.2.3 onStart</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-4-onresume" class="router-link-active router-link-exact-active toc-link level4">1.2.4 onResume</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-5-onpause" class="router-link-active router-link-exact-active toc-link level4">1.2.5 onPause</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-6-onstop" class="router-link-active router-link-exact-active toc-link level4">1.2.6 onStop</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-7-ondestroy" class="router-link-active router-link-exact-active toc-link level4">1.2.7 onDestroy</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-å…·ä½“åœºæ™¯åˆ†æ" class="router-link-active router-link-exact-active toc-link level4">1.2.8 å…·ä½“åœºæ™¯åˆ†æ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-1-activity-ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶" class="router-link-active router-link-exact-active toc-link level5">1.2.8.1 Activity ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-2-activity-é€€åˆ°åå°-åˆ‡æ¢åˆ°æ¡Œé¢-or-è·³è½¬åˆ°å…¶å®ƒ-activity" class="router-link-active router-link-exact-active toc-link level5">1.2.8.2 Activity é€€åˆ°åå°ï¼ˆåˆ‡æ¢åˆ°æ¡Œé¢ or è·³è½¬åˆ°å…¶å®ƒ Activityï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-3-è·³è½¬åˆ°é‡‡ç”¨äº†é€æ˜ä¸»é¢˜çš„å…¶å®ƒ-activity" class="router-link-active router-link-exact-active toc-link level5">1.2.8.3 è·³è½¬åˆ°é‡‡ç”¨äº†é€æ˜ä¸»é¢˜çš„å…¶å®ƒ Activity</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-4-activity-å›åˆ°å‰å°-ç”¨æˆ·å†æ¬¡å›åˆ°åŸ-activity" class="router-link-active router-link-exact-active toc-link level5">1.2.8.4 Activity å›åˆ°å‰å°ï¼ˆç”¨æˆ·å†æ¬¡å›åˆ°åŸ Activityï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-5-é”å±-å¼€å±" class="router-link-active router-link-exact-active toc-link level5">1.2.8.5 é”å± &amp; å¼€å±</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-2-8-6-ç”¨æˆ·æŒ‰-back-æŒ‰é”®å›é€€æ—¶" class="router-link-active router-link-exact-active toc-link level5">1.2.8.6 ç”¨æˆ·æŒ‰ back æŒ‰é”®å›é€€æ—¶</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active toc-link level3">1.3 å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-1-èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®æ”¹å˜å¯¼è‡´-activity-é”€æ¯é‡å»º-å¦‚æ¨ªç«–å±åˆ‡æ¢" class="router-link-active router-link-exact-active toc-link level4">1.3.1 èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®æ”¹å˜å¯¼è‡´ Activity é”€æ¯é‡å»ºï¼ˆå¦‚æ¨ªç«–å±åˆ‡æ¢ï¼‰</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-1-1-onsaveinstancestate-onrestoreinstancestate" class="router-link-active router-link-exact-active toc-link level5">1.3.1.1 onSaveInstanceState &amp; onRestoreInstanceState</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-1-2-view-å±‚æ¬¡ç»“æ„çš„ä¿å­˜ä¸æ¢å¤-å§”æ‰˜æ€æƒ³" class="router-link-active router-link-exact-active toc-link level5">1.3.1.2 View å±‚æ¬¡ç»“æ„çš„ä¿å­˜ä¸æ¢å¤ &amp; å§”æ‰˜æ€æƒ³</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-1-3-æ¨ªç«–å±åˆ‡æ¢æ—¶é˜»æ­¢-activity-çš„é”€æ¯é‡å»º-configchanges-å±æ€§" class="router-link-active router-link-exact-active toc-link level5">1.3.1.3 æ¨ªç«–å±åˆ‡æ¢æ—¶é˜»æ­¢ Activity çš„é”€æ¯é‡å»º &amp; configChanges å±æ€§</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-3-2-ç³»ç»Ÿå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„-activity-æ‰€åœ¨è¿›ç¨‹è¢«æ€æ­»" class="router-link-active router-link-exact-active toc-link level4">1.3.2 ç³»ç»Ÿå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„ Activity æ‰€åœ¨è¿›ç¨‹è¢«æ€æ­»</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-4-å°†ä¸€ä¸ª-activity-è®¾ç½®æˆçª—å£çš„æ ·å¼" class="router-link-active router-link-exact-active toc-link level3">1.4 å°†ä¸€ä¸ª Activity è®¾ç½®æˆçª—å£çš„æ ·å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-5-é€€å‡ºå·²è°ƒç”¨å¤šä¸ª-activity-çš„-application" class="router-link-active router-link-exact-active toc-link level3">1.5 é€€å‡ºå·²è°ƒç”¨å¤šä¸ª Activity çš„ Application</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_1-6-ä¿®æ”¹-activity-è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»" class="router-link-active router-link-exact-active toc-link level3">1.6 ä¿®æ”¹ Activity è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-å¯åŠ¨æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level2">2. å¯åŠ¨æ¨¡å¼</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-1-ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">2.1 ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-å››ç§å¯åŠ¨æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">2.2 å››ç§å¯åŠ¨æ¨¡å¼</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-1-standard-æ ‡å‡†æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level4">2.2.1 standardï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-1-1-standard-æ¨¡å¼å¯åŠ¨çš„-activity-é»˜è®¤è¿›å…¥å½“å‰-context-çš„ä»»åŠ¡æ ˆä¸­" class="router-link-active router-link-exact-active toc-link level4">2.2.1.1 standard æ¨¡å¼å¯åŠ¨çš„ Activity é»˜è®¤è¿›å…¥å½“å‰ Context çš„ä»»åŠ¡æ ˆä¸­</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-1-2-standard-æ¨¡å¼å¯åŠ¨æ—¶-context-æ— ä»»åŠ¡æ ˆçš„è§£å†³æ–¹æ¡ˆ" class="router-link-active router-link-exact-active toc-link level4">2.2.1.2 standard æ¨¡å¼å¯åŠ¨æ—¶ Context æ— ä»»åŠ¡æ ˆçš„è§£å†³æ–¹æ¡ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-2-singletop-æ ˆé¡¶å¤ç”¨æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level4">2.2.2 singleTopï¼ˆæ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-3-singletask-æ ˆå†…å¤ç”¨æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level4">2.2.3 singleTaskï¼ˆæ ˆå†…å¤ç”¨æ¨¡å¼ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-2-4-singleinstance-å•å®ä¾‹æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level4">2.2.4 singleInstanceï¼ˆå•å®ä¾‹æ¨¡å¼ï¼‰</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-3-ç»™-activity-æŒ‡å®šå¯åŠ¨æ¨¡å¼çš„ä¸¤ç§æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">2.3 ç»™ Activity æŒ‡å®šå¯åŠ¨æ¨¡å¼çš„ä¸¤ç§æ–¹å¼</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-3-1-åœ¨-androidmanifest-xml-ä¸­é€šè¿‡-android-launchmode-å±æ€§æŒ‡å®š" class="router-link-active router-link-exact-active toc-link level4">2.3.1 åœ¨ AndroidManifest.xml ä¸­é€šè¿‡ android:launchMode å±æ€§æŒ‡å®š</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-3-2-åœ¨ä»£ç ä¸­é€šè¿‡ç»™-intent-è®¾ç½®çš„æ ‡å¿—ä½æŒ‡å®š" class="router-link-active router-link-exact-active toc-link level4">2.3.2 åœ¨ä»£ç ä¸­é€šè¿‡ç»™ Intent è®¾ç½®çš„æ ‡å¿—ä½æŒ‡å®š</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-4-activity-çš„ä»»åŠ¡æ ˆ-taskaffinity-å±æ€§" class="router-link-active router-link-exact-active toc-link level3">2.4 Activity çš„ä»»åŠ¡æ ˆ &amp; taskAffinity å±æ€§</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-4-1-taskaffinity-å±æ€§-singletask-æ¨¡å¼ç»“åˆä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level4">2.4.1 taskAffinity å±æ€§ &amp; singleTask æ¨¡å¼ç»“åˆä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-4-2-taskaffinity-å±æ€§-allowtaskreparenting-å±æ€§ç»“åˆä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level4">2.4.2 taskAffinity å±æ€§ &amp; allowTaskReparenting å±æ€§ç»“åˆä½¿ç”¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-5-ç¤ºä¾‹" class="router-link-active router-link-exact-active toc-link level3">2.5 ç¤ºä¾‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-5-1-ç¤ºä¾‹-1-æŸ¥çœ‹-activity-ä»»åŠ¡æ ˆ-dumpsys-å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level4">2.5.1 ç¤ºä¾‹ 1ï¼šæŸ¥çœ‹ Activity ä»»åŠ¡æ ˆ &amp; dumpsys å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-5-2-ç¤ºä¾‹-2-singletop-æ¨¡å¼å…·æœ‰-cleartop-çš„æ•ˆæœ" class="router-link-active router-link-exact-active toc-link level4">2.5.2 ç¤ºä¾‹ 2ï¼šsingleTop æ¨¡å¼å…·æœ‰ clearTop çš„æ•ˆæœ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-6-å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯" class="router-link-active router-link-exact-active toc-link level3">2.6 å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-activity-çš„-flags" class="router-link-active router-link-exact-active toc-link level3">2.7 Activity çš„ Flags</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-1-è®¾ç½®-activity-å¯åŠ¨æ¨¡å¼çš„-flags" class="router-link-active router-link-exact-active toc-link level4">2.7.1  è®¾ç½® Activity å¯åŠ¨æ¨¡å¼çš„ Flags</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-1-1-flag-activity-new-task" class="router-link-active router-link-exact-active toc-link level5">2.7.1.1 FLAG_ACTIVITY_NEW_TASK</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-1-2-flag-activity-single-top" class="router-link-active router-link-exact-active toc-link level5">2.7.1.2 FLAG_ACTIVITY_SINGLE_TOP</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-2-å½±å“-activity-è¿è¡ŒçŠ¶æ€çš„-flags" class="router-link-active router-link-exact-active toc-link level4">2.7.2  å½±å“ Activity è¿è¡ŒçŠ¶æ€çš„ Flags</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-2-1-flag-activity-clear-top" class="router-link-active router-link-exact-active toc-link level5">2.7.2.1 FLAG_ACTIVITY_CLEAR_TOP</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-7-2-2-flag-activity-exclude-from-recents" class="router-link-active router-link-exact-active toc-link level5">2.7.2.2 FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_2-8-onnewintent-æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ" class="router-link-active router-link-exact-active toc-link level3">2.8 onNewIntent æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_3-æ•°æ®" class="router-link-active router-link-exact-active toc-link level2">3. æ•°æ®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_3-1-intent-ä¼ é€’æ•°æ®å¤ªå¤§-æŠ¥-transactiontoolargeexception-å¼‚å¸¸" class="router-link-active router-link-exact-active toc-link level3">3.1 Intent ä¼ é€’æ•°æ®å¤ªå¤§ï¼ŒæŠ¥ TransactionTooLargeException å¼‚å¸¸</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_4-context" class="router-link-active router-link-exact-active toc-link level2">4. Context</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_4-1-context-çš„ç»§æ‰¿å…³ç³»" class="router-link-active router-link-exact-active toc-link level3">4.1 Context çš„ç»§æ‰¿å…³ç³»</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-è¿›ç¨‹" class="router-link-active router-link-exact-active toc-link level2">5. è¿›ç¨‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-1-è¿›ç¨‹ä¼˜å…ˆçº§" class="router-link-active router-link-exact-active toc-link level3">5.1 è¿›ç¨‹ä¼˜å…ˆçº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-è¿›ç¨‹åˆ†ç±»" class="router-link-active router-link-exact-active toc-link level3">5.2 è¿›ç¨‹åˆ†ç±»</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-1-å‰å°è¿›ç¨‹-foreground-process" class="router-link-active router-link-exact-active toc-link level4">5.2.1 å‰å°è¿›ç¨‹ï¼ˆForeground Processï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-2-å¯è§è¿›ç¨‹-visible-process" class="router-link-active router-link-exact-active toc-link level4">5.2.2 å¯è§è¿›ç¨‹ï¼ˆVisible Processï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-3-æœåŠ¡è¿›ç¨‹-service-process" class="router-link-active router-link-exact-active toc-link level4">5.2.3 æœåŠ¡è¿›ç¨‹ï¼ˆService Processï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-4-åå°è¿›ç¨‹-background-process" class="router-link-active router-link-exact-active toc-link level4">5.2.4 åå°è¿›ç¨‹ï¼ˆBackground Processï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/android/basic/activity.html#_5-2-5-ç©ºè¿›ç¨‹-empty-process" class="router-link-active router-link-exact-active toc-link level4">5.2.5 ç©ºè¿›ç¨‹ï¼ˆEmpty Processï¼‰</a></li><!----><!--]--></ul><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_43377749/article/details/102728995" target="_blank" rel="noopener noreferrer">Activity çš„ 36 å¤§éš¾ç‚¹ï¼Œä½ ä¼šå‡ ä¸ªï¼Ÿã€Œå»ºè®®æ”¶è—ã€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å‚è€ƒï¼šã€Š<code>Android</code> å¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ ç¬¬ <code>1</code> ç« ï¼ˆ<code>Activity</code> çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼ï¼‰</p><h2 id="_1-ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#_1-ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> 1. ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="_1-1-ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-1-ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢è¿‡ç¨‹" aria-hidden="true">#</a> 1.1 ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢è¿‡ç¨‹</h3><p><img src="/assets/01.9e712c65.png" alt="" loading="lazy"></p><h3 id="_1-2-æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#_1-2-æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> 1.2 æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="_1-2-1-oncreate" tabindex="-1"><a class="header-anchor" href="#_1-2-1-oncreate" aria-hidden="true">#</a> 1.2.1 <code>onCreate</code></h4><p>è¡¨ç¤º <code>Activity</code> æ­£åœ¨è¢«åˆ›å»ºï¼Œè¿™æ˜¯ç”Ÿå‘½å‘¨æœŸçš„ç¬¬ä¸€ä¸ªæ–¹æ³•ã€‚</p><p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œæ¯”å¦‚ï¼š</p><ol><li>è°ƒç”¨ <code>setContentView</code> å»åŠ è½½ç•Œé¢å¸ƒå±€èµ„æºï¼›</li><li>åˆå§‹åŒ– <code>Activity</code> æ‰€éœ€æ•°æ®ç­‰ã€‚</li></ol><h4 id="_1-2-2-onrestart" tabindex="-1"><a class="header-anchor" href="#_1-2-2-onrestart" aria-hidden="true">#</a> 1.2.2 <code>onRestart</code></h4><p>è¡¨ç¤º <code>Activity</code> æ­£åœ¨é‡æ–°å¯åŠ¨ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“ <code>Activity</code> ä»ä¸å¯è§é‡æ–°å˜ä¸ºå¯è§çŠ¶æ€æ—¶ï¼Œ<code>onRestart</code> å°±ä¼šè¢«è°ƒç”¨ã€‚</p><blockquote><p>è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯ç”¨æˆ·è¡Œä¸ºæ‰€å¯¼è‡´çš„ï¼Œæ¯”å¦‚ï¼šå½“ç”¨æˆ·æŒ‰ <code>Home</code> é”®åˆ‡æ¢åˆ°æ¡Œé¢ï¼Œæˆ–è€…ç”¨æˆ·æ‰“å¼€äº†ä¸€ä¸ªæ–°çš„ <code>Activity</code> æ—¶ï¼ŒåŸæ¥çš„ <code>Activity</code> ä¼šæš‚åœï¼Œäºæ˜¯åŸæ¥çš„ <code>Activity</code> æ‰§è¡Œ <code>onPause</code> å’Œ <code>onStop</code>ã€‚æ¥ç€ï¼Œå½“ç”¨æˆ·åˆå›åˆ°åŸæ¥çš„ <code>Activity</code> æ—¶ï¼ŒåŸæ¥çš„ <code>Activity</code> å°±ä¼šæ‰§è¡Œ <code>onRestart</code>ã€‚</p></blockquote><h4 id="_1-2-3-onstart" tabindex="-1"><a class="header-anchor" href="#_1-2-3-onstart" aria-hidden="true">#</a> 1.2.3 <code>onStart</code></h4><p>è¡¨ç¤º <code>Activity</code> æ­£åœ¨è¢«å¯åŠ¨ã€‚æ­¤æ—¶ï¼Œ<code>Activity</code> å·²ç»å¯è§äº†ï¼Œä½†æ˜¯ <code>Activity</code> è¿˜æ²¡æœ‰å‡ºç°åœ¨å‰å°ï¼Œæ— æ³•ä¸ç”¨æˆ·äº¤äº’ã€‚</p><h4 id="_1-2-4-onresume" tabindex="-1"><a class="header-anchor" href="#_1-2-4-onresume" aria-hidden="true">#</a> 1.2.4 <code>onResume</code></h4><p>è¡¨ç¤º <code>Activity</code> å·²ç»å¯è§äº†ï¼Œå¹¶å‡ºç°åœ¨å‰å°ï¼Œä¸”å¯ä»¥å’Œä¸ç”¨æˆ·äº¤äº’äº†ã€‚</p><blockquote><p>æ³¨æ„ä¸ <code>onStart</code> çš„å¯¹æ¯”ï¼š</p><p><code>onStart</code> å’Œ <code>onResume</code> éƒ½è¡¨ç¤º <code>Activity</code> å·²ç»å¯è§ï¼Œä½†æ˜¯ <code>onStart</code> æ—¶ <code>Activity</code> è¿˜åœ¨åå°ï¼›<code>onResume</code> æ—¶æ‰æ˜¾ç¤ºåˆ°å‰å°ã€‚</p></blockquote><h4 id="_1-2-5-onpause" tabindex="-1"><a class="header-anchor" href="#_1-2-5-onpause" aria-hidden="true">#</a> 1.2.5 <code>onPause</code></h4><p>è¡¨ç¤º <code>Activity</code> æ­£åœ¨åœæ­¢ã€‚</p><p>æ­¤æ—¶å¯ä»¥åšä¸€äº›å­˜å‚¨æ•°æ®ã€åœæ­¢åŠ¨ç”»ç­‰æ“ä½œã€‚ä½†ä¸èƒ½å¤ªè€—æ—¶ï¼Œå› ä¸ºè¿™ä¼šå½±å“åˆ°æ–°çš„ <code>Activity</code> çš„æ˜¾ç¤ºã€‚</p><p>æ³¨æ„ï¼š<strong><code>onPause</code> å¿…é¡»å…ˆæ‰§è¡Œå®Œï¼Œæ–° <code>Activity</code> çš„ <code>onResume</code> æ‰ä¼šæ‰§è¡Œ</strong>ã€‚</p><h4 id="_1-2-6-onstop" tabindex="-1"><a class="header-anchor" href="#_1-2-6-onstop" aria-hidden="true">#</a> 1.2.6 <code>onStop</code></h4><p>è¡¨ç¤º <code>Activity</code> å³å°†åœæ­¢ï¼Œå¯ä»¥åšä¸€äº›ç¨å¾®é‡é‡çº§çš„å›æ”¶å·¥ä½œï¼ŒåŒæ ·ä¸èƒ½å¤ªè€—æ—¶ã€‚</p><h4 id="_1-2-7-ondestroy" tabindex="-1"><a class="header-anchor" href="#_1-2-7-ondestroy" aria-hidden="true">#</a> 1.2.7 <code>onDestroy</code></h4><p>è¡¨ç¤º <code>Activity</code> å³å°†è¢«é”€æ¯ï¼Œè¿™æ˜¯ <code>Activity</code> ç”Ÿå‘½å‘¨æœŸä¸­çš„æœ€åä¸€ä¸ªå›è°ƒã€‚</p><p>åœ¨è¿™é‡Œï¼Œå¯ä»¥åšä¸€äº›å›æ”¶å·¥ä½œå’Œæœ€ç»ˆçš„èµ„æºé‡Šæ”¾ã€‚</p><h4 id="_1-2-8-å…·ä½“åœºæ™¯åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_1-2-8-å…·ä½“åœºæ™¯åˆ†æ" aria-hidden="true">#</a> 1.2.8 å…·ä½“åœºæ™¯åˆ†æ</h4><h5 id="_1-2-8-1-activity-ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶" tabindex="-1"><a class="header-anchor" href="#_1-2-8-1-activity-ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶" aria-hidden="true">#</a> 1.2.8.1 <code>Activity</code> ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶</h5><div class="language-text ext-text"><pre class="language-text"><code>onCreate -&gt; onStart -&gt; onResume
</code></pre></div><h5 id="_1-2-8-2-activity-é€€åˆ°åå°-åˆ‡æ¢åˆ°æ¡Œé¢-or-è·³è½¬åˆ°å…¶å®ƒ-activity" tabindex="-1"><a class="header-anchor" href="#_1-2-8-2-activity-é€€åˆ°åå°-åˆ‡æ¢åˆ°æ¡Œé¢-or-è·³è½¬åˆ°å…¶å®ƒ-activity" aria-hidden="true">#</a> 1.2.8.2 <code>Activity</code> é€€åˆ°åå°ï¼ˆåˆ‡æ¢åˆ°æ¡Œé¢ or è·³è½¬åˆ°å…¶å®ƒ <code>Activity</code>ï¼‰</h5><div class="language-text ext-text"><pre class="language-text"><code>onPause -&gt; onStop
</code></pre></div><h5 id="_1-2-8-3-è·³è½¬åˆ°é‡‡ç”¨äº†é€æ˜ä¸»é¢˜çš„å…¶å®ƒ-activity" tabindex="-1"><a class="header-anchor" href="#_1-2-8-3-è·³è½¬åˆ°é‡‡ç”¨äº†é€æ˜ä¸»é¢˜çš„å…¶å®ƒ-activity" aria-hidden="true">#</a> 1.2.8.3 è·³è½¬åˆ°é‡‡ç”¨äº†é€æ˜ä¸»é¢˜çš„å…¶å®ƒ <code>Activity</code></h5><div class="language-text ext-text"><pre class="language-text"><code>onPause
</code></pre></div><blockquote><p><code>A</code> è·³è½¬åˆ° <code>B</code> æ—¶ï¼Œè‹¥ <code>B</code> é‡‡ç”¨äº†é€æ˜ä¸»é¢˜ï¼Œåˆ™ <code>A</code> ä»…å›è°ƒ <code>onPause</code>ï¼Œä¸å›è°ƒ <code>onStop</code>ã€‚</p></blockquote><h5 id="_1-2-8-4-activity-å›åˆ°å‰å°-ç”¨æˆ·å†æ¬¡å›åˆ°åŸ-activity" tabindex="-1"><a class="header-anchor" href="#_1-2-8-4-activity-å›åˆ°å‰å°-ç”¨æˆ·å†æ¬¡å›åˆ°åŸ-activity" aria-hidden="true">#</a> 1.2.8.4 <code>Activity</code> å›åˆ°å‰å°ï¼ˆç”¨æˆ·å†æ¬¡å›åˆ°åŸ <code>Activity</code>ï¼‰</h5><div class="language-text ext-text"><pre class="language-text"><code>onRestart -&gt; onStart -&gt; onResume
</code></pre></div><h5 id="_1-2-8-5-é”å±-å¼€å±" tabindex="-1"><a class="header-anchor" href="#_1-2-8-5-é”å±-å¼€å±" aria-hidden="true">#</a> 1.2.8.5 é”å± &amp; å¼€å±</h5><p>é”å±æ—¶ï¼š</p><div class="language-text ext-text"><pre class="language-text"><code>onPause -&gt; onStop
</code></pre></div><p>å¼€å±æ—¶ï¼š</p><div class="language-text ext-text"><pre class="language-text"><code>onStart -&gt; onResume
</code></pre></div><h5 id="_1-2-8-6-ç”¨æˆ·æŒ‰-back-æŒ‰é”®å›é€€æ—¶" tabindex="-1"><a class="header-anchor" href="#_1-2-8-6-ç”¨æˆ·æŒ‰-back-æŒ‰é”®å›é€€æ—¶" aria-hidden="true">#</a> 1.2.8.6 ç”¨æˆ·æŒ‰ <code>back</code> æŒ‰é”®å›é€€æ—¶</h5><div class="language-text ext-text"><pre class="language-text"><code>onPause -&gt; onStop -&gt; onDestroy
</code></pre></div><h3 id="_1-3-å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#_1-3-å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> 1.3 å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="_1-3-1-èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®æ”¹å˜å¯¼è‡´-activity-é”€æ¯é‡å»º-å¦‚æ¨ªç«–å±åˆ‡æ¢" tabindex="-1"><a class="header-anchor" href="#_1-3-1-èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®æ”¹å˜å¯¼è‡´-activity-é”€æ¯é‡å»º-å¦‚æ¨ªç«–å±åˆ‡æ¢" aria-hidden="true">#</a> 1.3.1 èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®æ”¹å˜å¯¼è‡´ <code>Activity</code> é”€æ¯é‡å»ºï¼ˆå¦‚æ¨ªç«–å±åˆ‡æ¢ï¼‰</h4><h5 id="_1-3-1-1-onsaveinstancestate-onrestoreinstancestate" tabindex="-1"><a class="header-anchor" href="#_1-3-1-1-onsaveinstancestate-onrestoreinstancestate" aria-hidden="true">#</a> 1.3.1.1 <code>onSaveInstanceState</code> &amp; <code>onRestoreInstanceState</code></h5><p>å½“ <code>Activity</code> ä»ç«–å±åˆ‡æ¢åˆ°æ¨ªå±æ—¶ï¼Œç³»ç»Ÿé…ç½®å‘ç”Ÿäº†æ”¹å˜ï¼Œæ­¤æ—¶éœ€è¦å»åŠ è½½é€‚é…æ¨ªå±çš„èµ„æºç›®å½•ä¸­çš„å›¾ç‰‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Activity</code> å°±ä¼šè¢«é”€æ¯å¹¶ä¸”é‡æ–°åˆ›å»ºï¼Œå…¶ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š</p><div class="md-enhance-mermaid loading" data-code="flowchart%20LR%0A%20%20%20%20A1(%5BActivity%5D)%0A%20%20%20%20A2(%5BActivity%5D)%0A%20%20%20%20A1cb1(onSaveInstanceState)%0A%20%20%20%20A1cb2(onStop)%0A%20%20%20%20A1cb3(onDestroy)%0A%20%20%20%20A2cb1(onCreate)%0A%20%20%20%20A2cb2(onStart)%0A%20%20%20%20A2cb3(onRestoreInstanceState)%0A%20%20%20%20A2cb4(onResume)%0A%0A%20%20%20%20subgraph%20S1%0A%20%20%20%20%20%20%20%20A1%20--%20%E5%BC%82%E5%B8%B8%E6%83%85%E5%86%B5%20--%3E%20A1cb1%20--%3E%20A1cb2%20--%3E%20A1cb3%20%20%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20S2%0A%20%20%20%20%20%20%20%20A2%20--%3E%20A2cb1%20--%3E%20A2cb2%20--%3E%20A2cb3%20--%3E%20A2cb4%0A%20%20%20%20end%0A%0A%20%20%20%20S1%20--%20%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%20--%3E%20S2%0A"><svg xmlns="http://www.w3.org/2000/svg" class="icon loading-icon" viewbox="0 0 1024 1024" arialabelledby="loading"><title id="loading" lang="en">loading icon</title><g fill="currentColor"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="0s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="0s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.333s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.333s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.667s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.667s"></animate></circle></g></svg></div><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š</p><ol><li><p>å½“ç³»ç»Ÿé…ç½®å‘ç”Ÿæ”¹å˜åï¼Œ<code>Activity</code> ä¼šè¢«é”€æ¯ï¼Œå…¶ <code>onPause</code>ã€<code>onStop</code>ã€<code>onDestroy</code> å‡ä¼šè¢«è°ƒç”¨ï¼ŒåŒæ—¶ç”±äº <code>Activity</code> æ˜¯åœ¨å¼‚å¸¸æƒ…å†µä¸‹ç»ˆæ­¢çš„ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ <code>onSaveInstanceState</code> æ¥ä¿å­˜å½“å‰ <code>Activity</code> çš„çŠ¶æ€ã€‚</p><blockquote><p>åªæœ‰åœ¨ <code>Activity</code> è¢«å¼‚å¸¸ç»ˆæ­¢çš„æƒ…å†µä¸‹æ‰ä¼šå›è°ƒ <code>onSaveInstanceState</code> æ–¹æ³•ï¼Œæ­£å¸¸æƒ…å†µä¸‹ç³»ç»Ÿä¸ä¼šå›è°ƒè¿™ä¸ªæ–¹æ³•ã€‚</p><p>ç³»ç»Ÿåªä¼šåœ¨ <code>Activity</code> å³å°†è¢«é”€æ¯å¹¶ä¸”æœ‰æœºä¼šé‡æ–°æ˜¾ç¤ºçš„æƒ…å†µä¸‹æ‰ä¼šå»è°ƒç”¨ <code>onSaveInstanceState</code>ã€‚å½“ <code>Activity</code> æ­£å¸¸é”€æ¯çš„æ—¶å€™ï¼Œç³»ç»Ÿä¸ä¼šè°ƒç”¨ <code>onSaveInstanceState</code>ï¼Œå› ä¸ºè¢«é”€æ¯çš„ <code>Activity</code> ä¸å¯èƒ½å†æ¬¡è¢«æ˜¾ç¤ºã€‚</p></blockquote></li><li><p><code>onSaveInstanceState</code> æ–¹æ³•çš„è°ƒç”¨æ—¶æœºæ˜¯åœ¨ <code>onStop</code> ä¹‹å‰ï¼Œä½†å®ƒå’Œ <code>onPause</code> æ²¡æœ‰æ—¢å®šçš„æ—¶åºå…³ç³»ï¼Œå³ï¼šå®ƒæ—¢å¯èƒ½åœ¨ <code>onPause</code> ä¹‹å‰è°ƒç”¨ï¼Œä¹Ÿå¯èƒ½åœ¨ <code>onPause</code> ä¹‹åè°ƒç”¨ã€‚</p></li><li><p>å½“ <code>Activity</code> è¢«é‡æ–°åˆ›å»ºåï¼Œç³»ç»Ÿä¼šè°ƒç”¨ <code>onRestoreInstanceState</code>ï¼Œå¹¶ä¸”æŠŠ <code>Activity</code> é”€æ¯æ—¶ <code>onSaveInstanceState</code> æ–¹æ³•æ‰€ä¿å­˜çš„ <code>Bundle</code> å¯¹è±¡ä½œä¸ºå‚æ•°åŒæ—¶ä¼ é€’ç»™ <code>onRestoreInstanceState</code> å’Œ <code>onCreate</code> æ–¹æ³•ã€‚</p></li><li><p><code>onRestoreInstanceState</code> çš„è°ƒç”¨æ—¶æœºåœ¨ <code>onStart</code> ä¹‹åï¼Œ<code>onResume</code> ä¹‹å‰ã€‚</p></li></ol><h5 id="_1-3-1-2-view-å±‚æ¬¡ç»“æ„çš„ä¿å­˜ä¸æ¢å¤-å§”æ‰˜æ€æƒ³" tabindex="-1"><a class="header-anchor" href="#_1-3-1-2-view-å±‚æ¬¡ç»“æ„çš„ä¿å­˜ä¸æ¢å¤-å§”æ‰˜æ€æƒ³" aria-hidden="true">#</a> 1.3.1.2 <code>View</code> å±‚æ¬¡ç»“æ„çš„ä¿å­˜ä¸æ¢å¤ &amp; å§”æ‰˜æ€æƒ³</h5><p>åœ¨ <code>onSaveInstanceState</code> å’Œ <code>onRestoreInstanceState</code> æ–¹æ³•ä¸­ï¼Œç³»ç»Ÿè‡ªåŠ¨ä¸ºæˆ‘ä»¬åšäº†ä¸€å®šçš„æ¢å¤å·¥ä½œã€‚</p><p>æ¯”å¦‚ï¼šå½“ <code>Activity</code> åœ¨å¼‚å¸¸æƒ…å†µä¸‹éœ€è¦é‡æ–°åˆ›å»ºæ—¶ï¼Œç³»ç»Ÿä¼šé»˜è®¤ä¸ºæˆ‘ä»¬ä¿å­˜å½“å‰ <code>Activity</code> çš„è§†å›¾ç»“æ„ï¼Œå¹¶ä¸”åœ¨ <code>Activity</code> é‡å¯åä¸ºæˆ‘ä»¬æ¢å¤è¿™äº›æ•°æ®ï¼ŒåŒ…æ‹¬ï¼šæ–‡æœ¬æ¡†ä¸­ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€<code>ListView</code> æ»šåŠ¨çš„ä½ç½®ç­‰ã€‚</p><blockquote><p>å’Œ <code>Activity</code> ä¸€æ ·ï¼Œæ¯ä¸ª View éƒ½æœ‰ <code>onSaveInstanceState</code> å’Œ <code>onRestoreInstanceState</code> è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œçœ‹ä¸€ä¸‹å®ƒä»¬çš„å…·ä½“å®ç°ï¼Œå°±èƒ½çŸ¥é“ç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨ä¸ºæ¯ä¸ªViewæ¢å¤å“ªäº›æ•°æ®ã€‚</p></blockquote><p>å…³äºä¿å­˜å’Œæ¢å¤ <code>View</code> å±‚æ¬¡ç»“æ„ï¼Œç³»ç»Ÿçš„å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol><li><p>é¦–å…ˆ <code>Activity</code> è¢«æ„å¤–ç»ˆæ­¢æ—¶ï¼Œ<code>Activity</code> ä¼šè°ƒç”¨ <code>onSaveInstanceState</code> å»ä¿å­˜æ•°æ®ï¼›</p></li><li><p>ç„¶å <code>Activity</code> ä¼šå§”æ‰˜ <code>Window</code> å»ä¿å­˜æ•°æ®ï¼›</p></li><li><p>æ¥ç€ <code>Window</code> å†å§”æ‰˜å®ƒä¸Šé¢çš„é¡¶çº§å®¹å™¨å»ä¿å­˜æ•°æ®ã€‚</p><blockquote><p>é¡¶å±‚å®¹å™¨æ˜¯ä¸€ä¸ª <code>ViewGroup</code>ï¼Œä¸€èˆ¬æ¥è¯´å®ƒå¾ˆå¯èƒ½æ˜¯ <code>DecorView</code>ã€‚</p></blockquote></li><li><p>æœ€åé¡¶å±‚å®¹å™¨å†å»ä¸€ä¸€é€šçŸ¥å®ƒçš„å­å…ƒç´ æ¥ä¿å­˜æ•°æ®ã€‚</p></li></ol><p>è¿™æ ·æ•´ä¸ªæ•°æ®ä¿å­˜è¿‡ç¨‹å°±å®Œæˆäº†ï¼ˆæ•°æ®æ¢å¤è¿‡ç¨‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼‰ã€‚å¯ä»¥å‘ç°ï¼Œè¿™æ˜¯ä¸€ç§å…¸å‹çš„å§”æ‰˜æ€æƒ³ï¼Œä¸Šå±‚å§”æ‰˜ä¸‹å±‚ã€çˆ¶å®¹å™¨å§”æ‰˜å­å…ƒç´ å»å¤„ç†ä¸€ä»¶äº‹æƒ…ã€‚</p><blockquote><p>è¿™ç§æ€æƒ³åœ¨ <code>Android</code> ä¸­æœ‰å¾ˆå¤šåº”ç”¨ï¼Œæ¯”å¦‚ <code>View</code> çš„ç»˜åˆ¶è¿‡ç¨‹ã€äº‹ä»¶åˆ†å‘ç­‰éƒ½æ˜¯é‡‡ç”¨ç±»ä¼¼çš„æ€æƒ³ã€‚</p></blockquote><h5 id="_1-3-1-3-æ¨ªç«–å±åˆ‡æ¢æ—¶é˜»æ­¢-activity-çš„é”€æ¯é‡å»º-configchanges-å±æ€§" tabindex="-1"><a class="header-anchor" href="#_1-3-1-3-æ¨ªç«–å±åˆ‡æ¢æ—¶é˜»æ­¢-activity-çš„é”€æ¯é‡å»º-configchanges-å±æ€§" aria-hidden="true">#</a> 1.3.1.3 æ¨ªç«–å±åˆ‡æ¢æ—¶é˜»æ­¢ <code>Activity</code> çš„é”€æ¯é‡å»º &amp; <code>configChanges</code> å±æ€§</h5><p>å½“èµ„æºç›¸å…³çš„ç³»ç»Ÿé…ç½®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç³»ç»Ÿé»˜è®¤çš„å¤„ç†æ–¹å¼æ˜¯å°† <code>Activity</code> é”€æ¯é‡å»ºã€‚</p><p>ä½†æ˜¯ï¼Œå¯ä»¥åœ¨ <code>AndroidManifest.xml</code> æ–‡ä»¶ä¸­é€šè¿‡ä¸º <code>&lt;activity&gt;</code> æ ‡ç­¾è®¾ç½®å±æ€§ <code>android:configChanges</code> æ¥æŒ‡å®šéœ€è¦åœ¨å˜æ›´æ—¶è‡ªè¡Œå¤„ç†çš„ç³»ç»Ÿé…ç½®ã€‚å¯¹äºè‡ªè¡Œå¤„ç†çš„ç³»ç»Ÿé…ç½®ï¼Œåœ¨å˜æ›´æ—¶å°†é˜»æ­¢ <code>Activity</code> é”€æ¯é‡å»ºï¼Œè€Œæ˜¯è®© <code>Activity</code> ä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œå¹¶å›è°ƒæ­¤ <code>Activity</code> çš„ <code>onConfigurationChanged</code> æ–¹æ³•ã€‚</p><p><code>android:configChanges</code> å±æ€§ä¸­å¯æŒ‡å®šçš„ç³»ç»Ÿé…ç½®å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left;">ç³»ç»Ÿé…ç½®</th><th style="text-align:left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left;"><code>density</code></td><td style="text-align:left;">æ˜¾ç¤ºå¯†åº¦å‘ç”Ÿå˜æ›´ - ç”¨æˆ·å¯èƒ½å·²æŒ‡å®šä¸åŒçš„æ˜¾ç¤ºæ¯”ä¾‹ï¼Œæˆ–è€…æœ‰ä¸åŒçš„æ˜¾ç¤ºç°å¤„äºæ´»è·ƒçŠ¶æ€ã€‚</td></tr><tr><td style="text-align:left;"><code>fontScale</code></td><td style="text-align:left;">å­—ä½“ç¼©æ”¾ç³»æ•°å‘ç”Ÿå˜æ›´ - ç”¨æˆ·å·²é€‰æ‹©æ–°çš„å…¨å±€å­—å·ã€‚</td></tr><tr><td style="text-align:left;"><code>keyboard</code></td><td style="text-align:left;">é”®ç›˜ç±»å‹å‘ç”Ÿå˜æ›´ - ä¾‹å¦‚ï¼Œç”¨æˆ·æ’å…¥å¤–ç½®é”®ç›˜ã€‚</td></tr><tr><td style="text-align:left;"><code>keyboardHidden</code></td><td style="text-align:left;">é”®ç›˜æ— éšœç¢åŠŸèƒ½å‘ç”Ÿå˜æ›´ - ä¾‹å¦‚ï¼Œç”¨æˆ·æ˜¾ç¤ºç¡¬é”®ç›˜ã€‚</td></tr><tr><td style="text-align:left;"><code>layoutDirection</code></td><td style="text-align:left;">å¸ƒå±€æ–¹å‘å‘ç”Ÿå˜æ›´ - ä¾‹å¦‚ï¼Œè‡ªä»å·¦è‡³å³ (<code>LTR</code>) æ›´æ”¹ä¸ºä»å³è‡³å·¦ (<code>RTL</code>)ã€‚</td></tr><tr><td style="text-align:left;"><code>locale</code></td><td style="text-align:left;">è¯­è¨€åŒºåŸŸå‘ç”Ÿå˜æ›´ - ç”¨æˆ·å·²ä¸ºæ–‡æœ¬é€‰æ‹©æ–°çš„æ˜¾ç¤ºè¯­è¨€ã€‚</td></tr><tr><td style="text-align:left;"><code>mcc</code></td><td style="text-align:left;"><code>IMSI</code> ç§»åŠ¨è®¾å¤‡å›½å®¶/åœ°åŒºä»£ç  (<code>MCC</code>) å‘ç”Ÿå˜æ›´ - æ£€æµ‹åˆ° <code>SIM</code> å¹¶æ›´æ–° <code>MCC</code>ã€‚</td></tr><tr><td style="text-align:left;"><code>mnc</code></td><td style="text-align:left;"><code>IMSI</code> ç§»åŠ¨è®¾å¤‡ç½‘ç»œä»£ç  (<code>MNC</code>) å‘ç”Ÿå˜æ›´ - æ£€æµ‹åˆ° <code>SIM</code> å¹¶æ›´æ–° <code>MNC</code>ã€‚</td></tr><tr><td style="text-align:left;"><code>navigation</code></td><td style="text-align:left;">å¯¼èˆªç±»å‹ï¼ˆè½¨è¿¹çƒ/æ–¹å‘é”®ï¼‰å‘ç”Ÿå˜æ›´ã€‚ï¼ˆè¿™ç§æƒ…å†µé€šå¸¸ä¸ä¼šå‘ç”Ÿã€‚ï¼‰</td></tr><tr><td style="text-align:left;"><code>orientation</code></td><td style="text-align:left;">å±å¹•æ–¹å‘å‘ç”Ÿå˜æ›´ - ç”¨æˆ·æ—‹è½¬è®¾å¤‡ã€‚</td></tr><tr><td style="text-align:left;"><code>screenLayout</code></td><td style="text-align:left;">å±å¹•å¸ƒå±€å‘ç”Ÿå˜æ›´ - ç°å¤„äºæ´»è·ƒçŠ¶æ€çš„å¯èƒ½æ˜¯å…¶ä»–æ˜¾ç¤ºæ¨¡å¼ã€‚</td></tr><tr><td style="text-align:left;"><code>screenSize</code></td><td style="text-align:left;">å½“å‰å¯ç”¨å±å¹•å°ºå¯¸å‘ç”Ÿå˜æ›´ã€‚è¯¥å€¼è¡¨ç¤ºç›®å‰å¯ç”¨å°ºå¯¸ç›¸å¯¹äºå½“å‰å®½é«˜æ¯”çš„å˜æ›´ï¼Œå½“ç”¨æˆ·åœ¨æ¨ªå‘æ¨¡å¼ä¸çºµå‘æ¨¡å¼ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œå®ƒä¾¿ä¼šå‘ç”Ÿå˜æ›´ã€‚åœ¨ <code>API</code> çº§åˆ« <code>13</code> ä¸­å¼•å…¥ã€‚</td></tr><tr><td style="text-align:left;"><code>smallestScreenSize</code></td><td style="text-align:left;">ç‰©ç†å±å¹•å°ºå¯¸å‘ç”Ÿå˜æ›´ã€‚è¯¥å€¼è¡¨ç¤ºä¸æ–¹å‘æ— å…³çš„å°ºå¯¸å˜æ›´ï¼Œå› æ­¤å®ƒåªæœ‰åœ¨å®é™…ç‰©ç†å±å¹•å°ºå¯¸å‘ç”Ÿå˜æ›´ï¼ˆå¦‚åˆ‡æ¢åˆ°å¤–éƒ¨æ˜¾ç¤ºå™¨ï¼‰æ—¶æ‰ä¼šå˜åŒ–ã€‚</td></tr><tr><td style="text-align:left;"><code>touchscreen</code></td><td style="text-align:left;">è§¦æ‘¸å±å‘ç”Ÿå˜æ›´ã€‚ï¼ˆè¿™ç§æƒ…å†µé€šå¸¸ä¸ä¼šå‘ç”Ÿã€‚ï¼‰</td></tr><tr><td style="text-align:left;"><code>uiMode</code></td><td style="text-align:left;">ç•Œé¢æ¨¡å¼å‘ç”Ÿå˜æ›´ - ç”¨æˆ·å·²å°†è®¾å¤‡ç½®äºæ¡Œé¢æˆ–è½¦è½½åŸºåº§ï¼Œæˆ–è€…å¤œé—´æ¨¡å¼å‘ç”Ÿå˜æ›´ã€‚</td></tr></tbody></table><p>ä¸ºäº†é˜»æ­¢æ¨ªç«–å±åˆ‡æ¢æ—¶å¯¼è‡´ <code>Activity</code> é”€æ¯é‡å»ºï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® <code>android:configChanges</code> å±æ€§ä¸ºï¼š</p><div class="language-xml ext-xml"><pre class="language-xml"><code>android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot;
</code></pre></div><h4 id="_1-3-2-ç³»ç»Ÿå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„-activity-æ‰€åœ¨è¿›ç¨‹è¢«æ€æ­»" tabindex="-1"><a class="header-anchor" href="#_1-3-2-ç³»ç»Ÿå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„-activity-æ‰€åœ¨è¿›ç¨‹è¢«æ€æ­»" aria-hidden="true">#</a> 1.3.2 ç³»ç»Ÿå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„ <code>Activity</code> æ‰€åœ¨è¿›ç¨‹è¢«æ€æ­»</h4><p>è¿™ç§æƒ…å†µæˆ‘ä»¬ä¸å¥½æ¨¡æ‹Ÿï¼Œä½†æ˜¯å…¶æ•°æ®å­˜å‚¨å’Œæ¢å¤è¿‡ç¨‹å’Œ <a href="#_1-3-1-%E8%B5%84%E6%BA%90%E7%9B%B8%E5%85%B3%E7%9A%84%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%94%B9%E5%8F%98%E5%AF%BC%E8%87%B4-activity-%E9%94%80%E6%AF%81%E9%87%8D%E5%BB%BA-%E5%A6%82%E6%A8%AA%E7%AB%96%E5%B1%8F%E5%88%87%E6%8D%A2"><code>1.3.1</code></a> å®Œå…¨ä¸€è‡´ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æè¿°ä¸€ä¸‹ <code>Activity</code> çš„ä¼˜å…ˆçº§æƒ…å†µã€‚<code>Activity</code> æŒ‰ç…§ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼Œå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ <code>3</code> ç§ï¼š</p><ol><li><p>å‰å° <code>Activity</code>ï¼šæ­£åœ¨å’Œç”¨æˆ·äº¤äº’çš„ <code>Activity</code>ï¼Œä¼˜å…ˆçº§æœ€é«˜ã€‚</p></li><li><p>å¯è§ä½†éå‰å° <code>Activity</code>ï¼šæ¯”å¦‚ <code>Activity</code> ä¸­å¼¹å‡ºäº†ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå¯¼è‡´ <code>Activity</code> å¯è§ä½†æ˜¯ä½äºåå°æ— æ³•å’Œç”¨æˆ·ç›´æ¥äº¤äº’ã€‚</p></li><li><p>åå° <code>Activity</code>ï¼šå·²ç»è¢«æš‚åœçš„ <code>Activity</code>ï¼Œæ¯”å¦‚æ‰§è¡Œäº† <code>onStop</code>ï¼Œä¼˜å…ˆçº§æœ€ä½ã€‚</p></li></ol><p>å½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿå°±ä¼šæŒ‰ç…§ä¸Šè¿°ä¼˜å…ˆçº§å»æ€æ­»ç›®æ ‡ <code>Activity</code> æ‰€åœ¨çš„ <strong>è¿›ç¨‹</strong>ï¼Œå¹¶åœ¨åç»­é€šè¿‡ <code>onSaveInstanceState</code> å’Œ <code>onRestoreInstanceState</code> æ¥å­˜å‚¨å’Œæ¢å¤æ•°æ•°æ®ã€‚</p><p>å¦‚æœä¸€ä¸ªè¿›ç¨‹ä¸­æ²¡æœ‰å››å¤§ç»„ä»¶åœ¨æ‰§è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å°†å¾ˆå¿«è¢«ç³»ç»Ÿæ€æ­»ï¼Œå› æ­¤ï¼Œä¸€äº›åå°å·¥ä½œä¸é€‚åˆè„±ç¦»å››å¤§ç»„ä»¶è€Œç‹¬è‡ªè¿è¡Œåœ¨åå°ä¸­ï¼Œè¿™æ ·è¿›ç¨‹å¾ˆå®¹æ˜“è¢«æ€æ­»ã€‚</p><p>æ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯å°†åå°å·¥ä½œæ”¾å…¥ <code>Service</code> ä¸­ä»è€Œä¿è¯è¿›ç¨‹æœ‰ä¸€å®šçš„ä¼˜å…ˆçº§ï¼Œè¿™æ ·å°±ä¸ä¼šè½»æ˜“åœ°è¢«ç³»ç»Ÿæ€æ­»ã€‚</p><h3 id="_1-4-å°†ä¸€ä¸ª-activity-è®¾ç½®æˆçª—å£çš„æ ·å¼" tabindex="-1"><a class="header-anchor" href="#_1-4-å°†ä¸€ä¸ª-activity-è®¾ç½®æˆçª—å£çš„æ ·å¼" aria-hidden="true">#</a> 1.4 å°†ä¸€ä¸ª <code>Activity</code> è®¾ç½®æˆçª—å£çš„æ ·å¼</h3><p>åªéœ€è¦åœ¨ <code>AndroidManifest.xml</code> æ–‡ä»¶ä¸­å°† <code>Activity</code> è®¾ç½®æˆ <code>Dialog</code> ä¸»é¢˜å³å¯ï¼š</p><div class="language-xml ext-xml"><pre class="language-xml"><code>android:theme=&quot;@android:style/Theme.Dialog&quot;
</code></pre></div><h3 id="_1-5-é€€å‡ºå·²è°ƒç”¨å¤šä¸ª-activity-çš„-application" tabindex="-1"><a class="header-anchor" href="#_1-5-é€€å‡ºå·²è°ƒç”¨å¤šä¸ª-activity-çš„-application" aria-hidden="true">#</a> 1.5 é€€å‡ºå·²è°ƒç”¨å¤šä¸ª <code>Activity</code> çš„ <code>Application</code></h3><p>æœ‰å¦‚ä¸‹ <code>4</code> ç§æ–¹å¼ï¼š</p><ol><li><p>å‘é€ç‰¹å®šå¹¿æ’­ï¼šåœ¨éœ€è¦ç»“æŸåº”ç”¨æ—¶ï¼Œå‘é€ä¸€ä¸ªç‰¹å®šçš„å¹¿æ’­ï¼Œæ¯ä¸ª <code>Activity</code> æ”¶åˆ°å¹¿æ’­åå…³é—­å³å¯ã€‚</p></li><li><p>é€’å½’é€€å‡ºï¼šåœ¨æ‰“å¼€æ–°çš„ <code>Activity</code> æ—¶éƒ½ä½¿ç”¨ <code>startActivityForResult</code> åŠ ä¸Šæ ‡å¿—ã€‚å…³é—­æ–°çš„ <code>Activity</code> æ—¶ï¼Œåœ¨ä¸Šä¸€ä¸ª <code>Activity</code> çš„ <code>onActivityResult</code> æ–¹æ³•ä¸­å¤„ç†æ ‡å¿—ï¼Œé€’å½’å…³é—­ã€‚</p></li><li><p>é€šè¿‡ <code>Intent</code> çš„ <code>flag</code> å®ç°ï¼šåœ¨è·³è½¬ <code>Activity</code> æ—¶ï¼Œè®¾ç½® <code>intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)</code>ã€‚æ­¤æ—¶å¦‚æœå½“å‰ä»»åŠ¡æ ˆä¸­å·²ç»æœ‰è¯¥ <code>Activity</code>ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šæŠŠè¿™ä¸ª <code>Activity</code> ä¸Šé¢çš„æ‰€æœ‰ <code>Activity</code> å¹²æ‰ã€‚</p><blockquote><p>å…¶å®ç›¸å½“äºç»™ <code>Activity</code> é…ç½®çš„å¯åŠ¨æ¨¡å¼ä¸º <code>singleTask</code> ã€‚</p></blockquote></li><li><p>è®°å½•æ‰“å¼€çš„ <code>Activity</code>ï¼šæ¯æ‰“å¼€ä¸€ä¸ª <code>Activity</code>ï¼Œå°±è®°å½•ä¸‹æ¥ã€‚åœ¨éœ€è¦é€€å‡ºæ—¶ï¼Œå…³é—­æ¯ä¸€ä¸ªè®°å½•äº†çš„ <code>Activity</code>ã€‚</p></li></ol><h3 id="_1-6-ä¿®æ”¹-activity-è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»" tabindex="-1"><a class="header-anchor" href="#_1-6-ä¿®æ”¹-activity-è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»" aria-hidden="true">#</a> 1.6 ä¿®æ”¹ <code>Activity</code> è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»</h3><p>æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li><p>åœ¨ <code>style.xml</code> ä¸­è®¾ç½®è¿‡æ¸¡åŠ¨ç”»</p><div class="language-xml ext-xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AppTheme<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Theme.AppCompat.Light.NoActionBar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¯ç”¨çª—å£å†…å®¹è¿‡æ¸¡ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android:windowActivityTransitions<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æŒ‡å®šè¿›å…¥å’Œé€€å‡ºè¿‡æ¸¡ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android:windowEnterTransition<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>@transition/explode<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android:windowExitTransition<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>@transition/explode<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li><li><p>è°ƒç”¨ <code>overridePendingTransition</code> æ–¹æ³•è®¾ç½®è¿‡æ¸¡åŠ¨ç”»</p><div class="language-java ext-java"><pre class="language-java"><code><span class="token comment">/* Activity.java */</span>
<span class="token comment">/*
    overridePendingTransition æ–¹æ³•çš„è°ƒç”¨åœºæ™¯å¯åˆ†ä¸ºä¸¤ç§ï¼š

        1. åœ¨ finish æ–¹æ³•åè°ƒç”¨ï¼Œæ­¤æ—¶ï¼š
           1. å‚æ•° enterAnim è¡¨ç¤ºå½“å‰ Activity é€€å‡ºåå°†è¦æ˜¾ç¤ºå‡ºæ¥çš„ Activity çš„è¿›åœºåŠ¨ç”»
           2. å‚æ•° exitAnim è¡¨ç¤ºå½“å‰ Activity é€€å‡ºæ—¶çš„åŠ¨ç”»
           
        2. åœ¨ startActivity æ–¹æ³•åè°ƒç”¨ï¼Œæ­¤æ—¶ï¼š
           1. å‚æ•° enterAnim è¡¨ç¤ºè·³è½¬çš„ Activity çš„è¿›åœºåŠ¨ç”»
           2. å‚æ•° exitAnim è¡¨ç¤ºå½“å‰ Activity é€€å‡ºæ—¶çš„åŠ¨ç”»
*/</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">overridePendingTransition</span><span class="token punctuation">(</span><span class="token keyword">int</span> enterAnim<span class="token punctuation">,</span> <span class="token keyword">int</span> exitAnim<span class="token punctuation">)</span>
</code></pre></div><div class="language-java ext-java"><pre class="language-java"><code><span class="token comment">/* ç¤ºä¾‹ï¼šåœ¨ finish æ–¹æ³•åè°ƒç”¨ */</span>
<span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">overridePendingTransition</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span>activity_enter<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span>activity_exit<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java ext-java"><pre class="language-java"><code><span class="token comment">/* ç¤ºä¾‹ï¼šåœ¨ startActivity æ–¹æ³•åè°ƒç”¨ */</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Build</span><span class="token punctuation">.</span><span class="token constant">VERSION</span><span class="token punctuation">.</span><span class="token constant">SDK_INT</span> <span class="token operator">&lt;</span> <span class="token class-name">Build</span><span class="token punctuation">.</span><span class="token constant">VERSION_CODES</span><span class="token punctuation">.</span><span class="token constant">JELLY_BEAN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// API LEVEL &lt; 16</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">XxxActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">overridePendingTransition</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span>activity_enter<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span>activity_exit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token class-name">Bundle</span> optionsBundle <span class="token operator">=</span> <span class="token class-name">ActivityOptionsCompat</span><span class="token punctuation">.</span><span class="token function">makeCustomAnimation</span><span class="token punctuation">(</span>
        <span class="token keyword">this</span><span class="token punctuation">,</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span>activity_enter<span class="token punctuation">,</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span>activity_exit
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">XxxActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> optionsBundle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol><h2 id="_2-å¯åŠ¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-å¯åŠ¨æ¨¡å¼" aria-hidden="true">#</a> 2. å¯åŠ¨æ¨¡å¼</h2><h3 id="_2-1-ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-1-ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¨¡å¼" aria-hidden="true">#</a> 2.1 ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¨¡å¼</h3><p>åœ¨é»˜è®¤çš„å¯åŠ¨æ¨¡å¼ä¸‹ï¼Œå½“æˆ‘ä»¬å¤šæ¬¡å¯åŠ¨åŒä¸€ä¸ª <code>Activity</code> æ—¶ï¼Œç³»ç»Ÿä¼šåˆ›å»ºå¤šä¸ªå®ä¾‹å¹¶æŠŠå®ƒä»¬ä¸€ä¸€æ”¾å…¥ä»»åŠ¡æ ˆä¸­ã€‚</p><blockquote><p>ä»»åŠ¡æ ˆæ˜¯ä¸€ç§åè¿›å…ˆå‡ºçš„æ ˆç»“æ„ï¼Œæ¯æŒ‰ä¸€ä¸‹ <code>back</code> é”®å°±ä¼šæœ‰ä¸€ä¸ª <code>Activity</code> å‡ºæ ˆï¼Œç›´åˆ°æ ˆç©ºä¸ºæ­¢ï¼Œå½“æ ˆä¸­æ— ä»»ä½• <code>Activity</code> çš„æ—¶å€™ï¼Œç³»ç»Ÿå°±ä¼šå›æ”¶è¿™ä¸ªä»»åŠ¡æ ˆã€‚</p></blockquote><p>ä½†æœ‰æ—¶å€™ï¼Œåœ¨å¤šæ¬¡å¯åŠ¨åŒä¸€ä¸ª <code>Activity</code> æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³è®©ç³»ç»Ÿåœ¨æ¯æ¬¡å¯åŠ¨æ—¶éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Activity</code> å®ä¾‹ï¼Œè€Œæ˜¯å¯ä»¥æ ¹æ®æƒ…å†µé€‰æ‹©å¤ç”¨å·²å¯åŠ¨çš„ <code>Activity</code> å®ä¾‹ã€‚ä¸ºäº†æ»¡è¶³è¿™ç§éœ€æ±‚ï¼ŒAndroid ç³»ç»Ÿæä¾›äº†å››ç§å¯åŠ¨æ¨¡å¼æ¥æ”¹å˜ç³»ç»Ÿçš„é»˜è®¤è¡Œä¸ºã€‚</p><h3 id="_2-2-å››ç§å¯åŠ¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-2-å››ç§å¯åŠ¨æ¨¡å¼" aria-hidden="true">#</a> 2.2 å››ç§å¯åŠ¨æ¨¡å¼</h3><h4 id="_2-2-1-standard-æ ‡å‡†æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-2-1-standard-æ ‡å‡†æ¨¡å¼" aria-hidden="true">#</a> 2.2.1 <code>standard</code>ï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰</h4><p>ç³»ç»Ÿçš„é»˜è®¤æ¨¡å¼ã€‚</p><p>ä¸ç®¡è¢«å¯åŠ¨çš„ <code>Activity</code> å®ä¾‹æ˜¯å¦å·²å­˜åœ¨ï¼Œæ¯æ¬¡å¯åŠ¨ <code>Activity</code> æ—¶éƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p><p>è¢«åˆ›å»ºçš„ <code>Activity</code> å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å›è°ƒæµç¨‹ä¸ºï¼š<code>onCreate -&gt; onStart -&gt; onResume</code>ã€‚</p><p><code>standard</code> æ¨¡å¼æ˜¯ä¸€ç§å…¸å‹çš„å¤šå®ä¾‹å®ç°ï¼Œå³ï¼š</p><ol><li><p>ä¸€ä¸ªä»»åŠ¡æ ˆä¸­å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼›</p></li><li><p>å¤šä¸ªå®ä¾‹ä¹Ÿå¯ä»¥å±äºä¸åŒçš„ä»»åŠ¡æ ˆã€‚</p></li></ol><h4 id="_2-2-1-1-standard-æ¨¡å¼å¯åŠ¨çš„-activity-é»˜è®¤è¿›å…¥å½“å‰-context-çš„ä»»åŠ¡æ ˆä¸­" tabindex="-1"><a class="header-anchor" href="#_2-2-1-1-standard-æ¨¡å¼å¯åŠ¨çš„-activity-é»˜è®¤è¿›å…¥å½“å‰-context-çš„ä»»åŠ¡æ ˆä¸­" aria-hidden="true">#</a> 2.2.1.1 <code>standard</code> æ¨¡å¼å¯åŠ¨çš„ <code>Activity</code> é»˜è®¤è¿›å…¥å½“å‰ <code>Context</code> çš„ä»»åŠ¡æ ˆä¸­</h4><p><code>standard</code> æ¨¡å¼ä¸‹å¯åŠ¨çš„ <code>Activity</code>ï¼Œé»˜è®¤å­˜æ”¾åœ¨å½“å‰ <code>Context</code> çš„ä»»åŠ¡æ ˆã€‚</p><p><code>Activity</code> æ˜¯ä¸€ç§å…·æœ‰ä»»åŠ¡æ ˆçš„ <code>Context</code>ï¼Œåœ¨ <code>Activity</code> ä¸­é‡‡ç”¨ <code>standard</code> æ¨¡å¼å¯åŠ¨å¦ä¸€ä¸ª <code>Activity</code> æ—¶ï¼Œè¢«å¯åŠ¨çš„ <code>Activity</code> é»˜è®¤å’Œå¯åŠ¨å®ƒçš„å½“å‰ <code>Activity</code> å­˜æ”¾åœ¨åŒä¸€ä¸ªä»»åŠ¡æ ˆä¸­ã€‚</p><h4 id="_2-2-1-2-standard-æ¨¡å¼å¯åŠ¨æ—¶-context-æ— ä»»åŠ¡æ ˆçš„è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_2-2-1-2-standard-æ¨¡å¼å¯åŠ¨æ—¶-context-æ— ä»»åŠ¡æ ˆçš„è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> 2.2.1.2 <code>standard</code> æ¨¡å¼å¯åŠ¨æ—¶ <code>Context</code> æ— ä»»åŠ¡æ ˆçš„è§£å†³æ–¹æ¡ˆ</h4><p>é™¤äº† <code>Activity</code> ä¹‹å¤–çš„å…¶ä»– <code>Context</code> éƒ½ä¸å…·å¤‡ä»»åŠ¡æ ˆï¼ˆå¦‚ï¼š<code>Service</code>ï¼Œ<code>Application</code> éƒ½ä¸å…·å¤‡ä»»åŠ¡æ ˆï¼‰ã€‚</p><p>å› æ­¤ï¼Œå½“åœ¨ <code>Service</code> æˆ– <code>Application</code> ä¸­é‡‡ç”¨ <code>standard</code> æ¨¡å¼å¯åŠ¨ <code>Activity</code> æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>æ­¤æ—¶ï¼Œå°±ä¸èƒ½é‡‡ç”¨ <code>standard</code> æ¨¡å¼æ¥å¯åŠ¨ <code>Activity</code> äº†ï¼Œè€Œæ˜¯é€šè¿‡ç»™ <code>Intent</code> æŒ‡å®š <code>FLAG_ACTIVITY_NEW_TASK</code> æ ‡è®°ä½ï¼Œé‡‡ç”¨ <code>singleTask</code> æ¨¡å¼æ¥å¯åŠ¨ <code>Activity</code>ã€‚</p><h4 id="_2-2-2-singletop-æ ˆé¡¶å¤ç”¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-2-2-singletop-æ ˆé¡¶å¤ç”¨æ¨¡å¼" aria-hidden="true">#</a> 2.2.2 <code>singleTop</code>ï¼ˆæ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼‰</h4><p>åœ¨è¿™ç§æ¨¡å¼ä¸‹å¯åŠ¨çš„ <code>Activity</code>ï¼š</p><ol><li><p>å¦‚æœ <code>Activity</code> å®ä¾‹å·²ä½äºä»»åŠ¡æ ˆçš„æ ˆé¡¶ï¼Œé‚£ä¹ˆæ­¤ <code>Activity</code> ä¸ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œä¸ä¼šå›è°ƒ <code>onCreate -&gt; onStart</code>ã€‚è€Œæ˜¯å›è°ƒ <code>onNewIntent -&gt; onResume</code>ã€‚å…¶ä¸­ï¼Œé€šè¿‡ <code>onNewIntent(Intent)</code> æ–¹æ³•çš„å‚æ•° <code>Intent</code> æˆ‘ä»¬å¯ä»¥å–å‡ºå¯åŠ¨æ—¶ä¼ é€’çš„å‚æ•°ã€‚</p><div class="language-text ext-text"><pre class="language-text"><code>å‡è®¾ä»»åŠ¡æ ˆä¸ºï¼š A-B-C-Dï¼Œå…¶ä¸­ D ä½äºæ ˆé¡¶ï¼Œæ­¤æ—¶ï¼š
1. å¦‚æœä»¥ singleTop æ¨¡å¼å¯åŠ¨ Dï¼Œåˆ™æ ˆå†…æƒ…å†µä¸ºï¼šA-B-C-D
2. å¦‚æœä»¥ standard æ¨¡å¼å¯åŠ¨ Dï¼Œåˆ™æ ˆå†…æƒ…å†µä¸ºï¼š A-B-C-D-D
</code></pre></div></li><li><p>å¦‚æœ <code>Activity</code> å®ä¾‹å·²ä½äºä»»åŠ¡æ ˆï¼Œä½†ä¸åœ¨æ ˆé¡¶ï¼Œé‚£ä¹ˆä¸ºè¿™ä¸ª <code>Activity</code> é‡æ–°åˆ›å»ºä¸€ä¸ªå®ä¾‹å¹¶æ”¾å…¥åˆ°æ ˆé¡¶ã€‚è€Œä¹‹å‰å·²ä½äºä»»åŠ¡æ ˆä¸­çš„ <code>Activity</code> å®ä¾‹åŸå°ä¸åŠ¨ã€‚ï¼ˆæ­¤æƒ…å†µä¸‹ï¼Œç›¸å½“äº <code>standard</code> æ¨¡å¼ï¼‰</p><div class="language-text ext-text"><pre class="language-text"><code>å‡è®¾ä»»åŠ¡æ ˆä¸ºï¼š A-B-C-Dï¼Œå…¶ä¸­ D ä½äºæ ˆé¡¶ï¼Œæ­¤æ—¶ï¼š
1. å¦‚æœä»¥ singleTop æ¨¡å¼å¯åŠ¨ Aï¼Œåˆ™æ ˆå†…æƒ…å†µä¸ºï¼šA-B-C-D-A
2. å¦‚æœä»¥ standard æ¨¡å¼å¯åŠ¨ Aï¼Œåˆ™æ ˆå†…æƒ…å†µä¸ºï¼š A-B-C-D-A
</code></pre></div></li></ol><h4 id="_2-2-3-singletask-æ ˆå†…å¤ç”¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-2-3-singletask-æ ˆå†…å¤ç”¨æ¨¡å¼" aria-hidden="true">#</a> 2.2.3 <code>singleTask</code>ï¼ˆæ ˆå†…å¤ç”¨æ¨¡å¼ï¼‰</h4><p>æ˜¯ä¸€ç§å•å®ä¾‹æ¨¡å¼ã€‚</p><p>åœ¨è¿™ç§æ¨¡å¼ä¸‹å¯åŠ¨çš„ <code>Activity</code>ï¼Œåªè¦ <code>Activity</code> å®ä¾‹å·²ä½äºä»»åŠ¡æ ˆä¸­ï¼Œä¸ç®¡åœ¨ä¸åœ¨æ ˆé¡¶ï¼Œæ­¤ <code>Activity</code> éƒ½ä¸ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œä¸ä¼šå›è°ƒ <code>onCreate -&gt; onStart</code>ã€‚è€Œæ˜¯å›è°ƒ <code>onNewIntent -&gt; onResume</code>ã€‚</p><p>å…·ä½“åœ°è¯´ï¼Œå½“é‡‡ç”¨ <code>singleTask</code> æ¨¡å¼å¯åŠ¨ <code>Activity</code> <code>D</code> æ—¶ï¼Œå…ˆæŸ¥è¯¢ <code>D</code> æ‰€éœ€çš„ä»»åŠ¡æ ˆæ˜¯å¦å­˜åœ¨ï¼š</p><ol><li><p>å¦‚æœä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ª <code>D</code> æ‰€éœ€çš„ä»»åŠ¡æ ˆï¼ŒåŒæ—¶åˆ›å»º <code>D</code> çš„å®ä¾‹å¹¶æ”¾å…¥åˆ°è¯¥ä»»åŠ¡æ ˆä¸­ã€‚</p><div class="language-text ext-text"><pre class="language-text"><code>å‡è®¾ä»»åŠ¡æ ˆ S1 ä¸ºï¼š A-B-Cï¼Œå…¶ä¸­ C ä½äºæ ˆé¡¶ï¼Œ
æ­¤æ—¶é‡‡ç”¨ singleTask æ¨¡å¼å¯åŠ¨ Dï¼Œä¸” D æ‰€éœ€çš„ä»»åŠ¡æ ˆä¸º S2ï¼Œ
ç”±äº S2 å’Œ D çš„å®ä¾‹éƒ½ä¸å­˜åœ¨ï¼Œæ‰€ä»¥ä¼šå…ˆåˆ›å»ºä»»åŠ¡æ ˆ S2ï¼Œå†åˆ›å»º D çš„å®ä¾‹å¹¶æ”¾å…¥åˆ°ä»»åŠ¡æ ˆ S2 ä¸­
æœ€ç»ˆä»»åŠ¡æ ˆçš„æƒ…å†µä¸ºï¼š
    S1ï¼šA-B-C
    S2ï¼šD
</code></pre></div></li><li><p>å¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆåˆ¤æ–­å·²å­˜åœ¨çš„ä»»åŠ¡æ ˆä¸­æ˜¯å¦ä¿å­˜æœ‰ <code>D</code> çš„å®ä¾‹ï¼š</p><ol><li><p>è‹¥å·²å­˜åœ¨çš„ä»»åŠ¡æ ˆä¸­æ²¡æœ‰ä¿å­˜ <code>D</code> çš„å®ä¾‹ï¼Œåˆ™åˆ›å»º <code>D</code> çš„å®ä¾‹å¹¶æ”¾å…¥åˆ°ä»»åŠ¡æ ˆä¸­ï¼›</p><div class="language-text ext-text"><pre class="language-text"><code>å‡è®¾ä»»åŠ¡æ ˆ S1 ä¸ºï¼š A-B-Cï¼Œå…¶ä¸­ C ä½äºæ ˆé¡¶ï¼Œ
æ­¤æ—¶é‡‡ç”¨ singleTask æ¨¡å¼å¯åŠ¨ Dï¼Œä¸” D æ‰€éœ€çš„ä»»åŠ¡æ ˆä¸º S1ï¼Œ
ç”±äº S1 å­˜åœ¨ï¼Œä½† D çš„å®ä¾‹ä¸å­˜åœ¨ï¼Œæ‰€ä»¥åˆ›å»º D çš„å®ä¾‹å¹¶æ”¾å…¥åˆ°ä»»åŠ¡æ ˆ S1 ä¸­
æœ€ç»ˆä»»åŠ¡æ ˆçš„æƒ…å†µä¸ºï¼š
    S1ï¼šA-B-C-D
</code></pre></div></li><li><p>è‹¥å·²å­˜åœ¨çš„ä»»åŠ¡æ ˆä¸­ä¿å­˜æœ‰ <code>D</code> çš„å®ä¾‹ï¼Œåˆ™ä¸ä¼šå†åˆ›å»º <code>D</code> çš„å®ä¾‹ï¼Œè€Œæ˜¯å°† <code>D</code> ç§»åˆ°æ ˆé¡¶ï¼ˆä¸ºäº†å°† <code>D</code> ç§»åˆ°æ ˆé¡¶ï¼Œä¼šå°† <code>D</code> ä¸Šé¢çš„å…¶ä»– <code>Activity</code> éƒ½ç§»å‡ºä»»åŠ¡æ ˆï¼Œå³ <code>clearTop</code>ï¼‰ï¼Œå¹¶å›è°ƒ <code>D</code> çš„ <code>onNewIntent -&gt; onResume</code> æ–¹æ³•ã€‚</p><div class="language-text ext-text"><pre class="language-text"><code>å‡è®¾ä»»åŠ¡æ ˆ S1 ä¸ºï¼š A-B-C-D-E-Fï¼Œå…¶ä¸­ F ä½äºæ ˆé¡¶ï¼Œ
æ­¤æ—¶é‡‡ç”¨ singleTask æ¨¡å¼å¯åŠ¨ Dï¼Œä¸” D æ‰€éœ€çš„ä»»åŠ¡æ ˆä¸º S1ï¼Œ
ç”±äº S1 å­˜åœ¨ï¼Œä¸” D çš„å®ä¾‹ä¹Ÿå­˜åœ¨ï¼Œæ‰€ä»¥å°† D ç§»åˆ° S1 çš„æ ˆé¡¶ï¼ŒåŒæ—¶å°† D ä¸Šé¢çš„å…¶ä»– Activity ä» S1 ä¸­ç§»é™¤
æœ€ç»ˆä»»åŠ¡æ ˆçš„æƒ…å†µä¸ºï¼š
    S1ï¼šA-B-C-D
</code></pre></div></li></ol></li></ol><h4 id="_2-2-4-singleinstance-å•å®ä¾‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-2-4-singleinstance-å•å®ä¾‹æ¨¡å¼" aria-hidden="true">#</a> 2.2.4 <code>singleInstance</code>ï¼ˆå•å®ä¾‹æ¨¡å¼ï¼‰</h4><p>é‡‡ç”¨ <code>singleInstance</code> æ¨¡å¼å¯åŠ¨çš„ <code>Activity</code> ç‹¬è‡ªä½äºä¸€ä¸ªä»»åŠ¡æ ˆä¸­ï¼Œå³ï¼š</p><ol><li><p>è‹¥ <code>Activity</code> æ‰€éœ€çš„ä»»åŠ¡æ ˆä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºä»»åŠ¡æ ˆï¼Œå†åˆ›å»º <code>Activity</code> å®ä¾‹å¹¶æ”¾å…¥åˆ°æ ˆä¸­ï¼›</p></li><li><p>è‹¥ <code>Activity</code> æ‰€éœ€çš„ä»»åŠ¡æ ˆå­˜åœ¨ï¼Œç”±äºè¯¥ä»»åŠ¡æ ˆåªèƒ½ç”¨æ¥å­˜æ”¾æ­¤ <code>Activity</code> çš„å®ä¾‹ï¼Œæ‰€ä»¥ä»»åŠ¡æ ˆå­˜åœ¨ï¼Œåˆ™è¯´æ˜ <code>Activity</code> å®ä¾‹å­˜åœ¨ï¼Œå› æ­¤ä¸ä¼šåˆ›å»º <code>Activity</code> å®ä¾‹ï¼Œè€Œæ˜¯å›è°ƒæ­¤ <code>Activity</code> çš„ <code>onNewIntent -&gt; onResume</code> æ–¹æ³•ã€‚</p></li></ol><p>æ³¨æ„ï¼šå½“åœ¨ <code>singleInstance</code> æ¨¡å¼å¯åŠ¨çš„ <code>Activity</code> <code>A</code> ä¸­ï¼Œä»¥ <code>standard</code> æ¨¡å¼å»å¯åŠ¨ <code>Activity</code> <code>B</code> æ—¶ï¼Œè™½ç„¶ <code>standard</code> æ¨¡å¼ä¸‹ <code>B</code> é»˜è®¤åº”è¯¥ä¸ <code>A</code> åœ¨åŒä¸€ä¸ªä»»åŠ¡æ ˆä¸­ï¼Œä½†ç”±äº <code>A</code> æ‰€åœ¨çš„ä»»åŠ¡æ ˆåªèƒ½å­˜æ”¾ä¸€ä¸ª <code>A</code> å®ä¾‹ï¼Œæ‰€ä»¥æ­¤æ—¶ä¼šå°† <code>B</code> æ”¾å…¥åˆ°ä¸€ä¸ªæ–°åˆ›å»ºçš„ä»»åŠ¡æ ˆä¸­ã€‚</p><h3 id="_2-3-ç»™-activity-æŒ‡å®šå¯åŠ¨æ¨¡å¼çš„ä¸¤ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-3-ç»™-activity-æŒ‡å®šå¯åŠ¨æ¨¡å¼çš„ä¸¤ç§æ–¹å¼" aria-hidden="true">#</a> 2.3 ç»™ Activity æŒ‡å®šå¯åŠ¨æ¨¡å¼çš„ä¸¤ç§æ–¹å¼</h3><h4 id="_2-3-1-åœ¨-androidmanifest-xml-ä¸­é€šè¿‡-android-launchmode-å±æ€§æŒ‡å®š" tabindex="-1"><a class="header-anchor" href="#_2-3-1-åœ¨-androidmanifest-xml-ä¸­é€šè¿‡-android-launchmode-å±æ€§æŒ‡å®š" aria-hidden="true">#</a> 2.3.1 åœ¨ <code>AndroidManifest.xml</code> ä¸­é€šè¿‡ <code>android:launchMode</code> å±æ€§æŒ‡å®š</h4><div class="language-xml ext-xml"><pre class="language-xml"><code>&lt;activity
    ...
    android:launchMode=[&quot;standard&quot; | &quot;singleTop&quot; | &quot;singleTask&quot; | &quot;singleInstance&quot;]
    .../&gt;
</code></pre></div><h4 id="_2-3-2-åœ¨ä»£ç ä¸­é€šè¿‡ç»™-intent-è®¾ç½®çš„æ ‡å¿—ä½æŒ‡å®š" tabindex="-1"><a class="header-anchor" href="#_2-3-2-åœ¨ä»£ç ä¸­é€šè¿‡ç»™-intent-è®¾ç½®çš„æ ‡å¿—ä½æŒ‡å®š" aria-hidden="true">#</a> 2.3.2 åœ¨ä»£ç ä¸­é€šè¿‡ç»™ <code>Intent</code> è®¾ç½®çš„æ ‡å¿—ä½æŒ‡å®š</h4><div class="language-java ext-java"><pre class="language-java"><code><span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">setClass</span><span class="token punctuation">(</span><span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">SecondActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
    FLAG_ACTIVITY_SINGLE_TOPï¼šsingleTop æ¨¡å¼
    FLAG_ACTIVITY_NEW_TASKï¼šsingleTask æ¨¡å¼

    æ³¨æ„ï¼šæ­¤æ–¹å¼æ— æ³•æŒ‡å®šä¸º singleInstance æ¨¡å¼
*/</span>
intent<span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_NEW_TASK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-4-activity-çš„ä»»åŠ¡æ ˆ-taskaffinity-å±æ€§" tabindex="-1"><a class="header-anchor" href="#_2-4-activity-çš„ä»»åŠ¡æ ˆ-taskaffinity-å±æ€§" aria-hidden="true">#</a> 2.4 <code>Activity</code> çš„ä»»åŠ¡æ ˆ &amp; <code>taskAffinity</code> å±æ€§</h3><p>ä»»åŠ¡æ ˆåˆ†ä¸ºå‰å°ä»»åŠ¡æ ˆå’Œåå°ä»»åŠ¡æ ˆï¼Œåå°ä»»åŠ¡æ ˆä¸­çš„ <code>Activity</code> ä½äºæš‚åœçŠ¶æ€ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡åˆ‡æ¢å°†åå°ä»»åŠ¡æ ˆå†æ¬¡è°ƒåˆ°å‰å°ã€‚å¦‚ï¼š</p><div class="language-text ext-text"><pre class="language-text"><code>å‡è®¾ä»»åŠ¡æ ˆ S1ï¼šA-B-Cï¼ŒC ä½äºæ ˆé¡¶ã€‚
å½“å±å¹•ä¸Šæ˜¾ç¤º C æ—¶ï¼ŒS1 æ˜¯å‰å°ä»»åŠ¡æ ˆã€‚
å½“åœ¨ C ä¸­é‡‡ç”¨ singleTask æ¨¡å¼å¯åŠ¨ D æ—¶ï¼Œå‡è®¾ D æ‰€éœ€çš„ä»»åŠ¡æ ˆä¸º S2ã€‚
äºæ˜¯å…ˆåˆ›å»º S2ï¼Œå†åˆ›å»º D å®ä¾‹å¹¶æ”¾å…¥åˆ° S2 ä¸­ã€‚
D å¯åŠ¨å¹¶æ˜¾ç¤ºæ—¶ï¼Œä»»åŠ¡æ ˆ S2 æˆä¸º å‰å°ä»»åŠ¡æ ˆï¼Œä»»åŠ¡æ ˆ S1 åˆ™åˆ‡æ¢æˆåå°ä»»åŠ¡æ ˆã€‚
</code></pre></div><p><code>taskAffinity</code> å¯ä»¥ç¿»è¯‘ä¸ºä»»åŠ¡ç›¸å…³æ€§ã€‚<code>taskAffinity</code> å±æ€§ç”¨äºæŒ‡å®š <code>Activity</code> æ‰€éœ€ä»»åŠ¡æ ˆçš„åå­—ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ <code>Activity</code> æ‰€éœ€ä»»åŠ¡æ ˆçš„åå­—éƒ½ä¸ºåº”ç”¨çš„åŒ…åã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ²¡æœ‰ä½¿ç”¨ <code>taskAffinity</code> å±æ€§ä¸º <code>Activity</code> æŒ‡å®šä»»åŠ¡æ ˆæ—¶ï¼Œé™¤äº† <code>singleInstance</code> æ¨¡å¼ä¹‹å¤–ï¼Œ<code>standard</code>ã€<code>singleTop</code>ã€<code>singleTask</code> è¿™ä¸‰ç§æ¨¡å¼ä¸‹å¯åŠ¨çš„ <code>Activity</code> éƒ½åªå¯èƒ½ä½äºåŒä¸€ä¸ªä»»åŠ¡æ ˆä¸­ï¼Œä¸”ä»»åŠ¡æ ˆå = åŒ…åã€‚</p></blockquote><p>æ³¨æ„ï¼š</p><ol><li><p><code>taskAffinity</code> å±æ€§çš„å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”ä¸­é—´å¿…é¡»å«æœ‰åŒ…ååˆ†éš”ç¬¦ &quot;<code>.</code>&quot;</p></li><li><p>å½“é€šè¿‡ <code>taskAffinity</code> å±æ€§ä¸º <code>Activity</code> å•ç‹¬æŒ‡å®šåŒ…åæ—¶ï¼Œå±æ€§å€¼ä¸èƒ½å’ŒåŒ…åç›¸åŒï¼Œå¦åˆ™å°±ç›¸å½“äºæ²¡æœ‰æŒ‡å®šã€‚</p></li><li><p><code>taskAffinity</code> å±æ€§ä¸»è¦å’Œ <code>singleTask</code> å¯åŠ¨æ¨¡å¼æˆ–è€… <code>allowTaskReparenting</code> å±æ€§é…å¯¹ä½¿ç”¨ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹æ²¡æœ‰æ„ä¹‰ã€‚</p></li></ol><h4 id="_2-4-1-taskaffinity-å±æ€§-singletask-æ¨¡å¼ç»“åˆä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-4-1-taskaffinity-å±æ€§-singletask-æ¨¡å¼ç»“åˆä½¿ç”¨" aria-hidden="true">#</a> 2.4.1 <code>taskAffinity</code> å±æ€§ &amp; <code>singleTask</code> æ¨¡å¼ç»“åˆä½¿ç”¨</h4><p>æŒ‡å®šé‡‡ç”¨ <code>singleTask</code> æ¨¡å¼å¯åŠ¨çš„ <code>Activity</code> æ‰€éœ€çš„ä»»åŠ¡æ ˆçš„åå­—ã€‚ä»è€Œå¯ä»¥è®© <code>Activity</code> è¿è¡Œåœ¨ä¸€ä¸ªåç§°ä¸åŒäºåŒ…åçš„ä»»åŠ¡æ ˆä¸­ã€‚</p><h4 id="_2-4-2-taskaffinity-å±æ€§-allowtaskreparenting-å±æ€§ç»“åˆä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-4-2-taskaffinity-å±æ€§-allowtaskreparenting-å±æ€§ç»“åˆä½¿ç”¨" aria-hidden="true">#</a> 2.4.2 <code>taskAffinity</code> å±æ€§ &amp; <code>allowTaskReparenting</code> å±æ€§ç»“åˆä½¿ç”¨</h4><p>åœ¨ <code>Activity</code> <code>A</code> ä¸­ä½¿ç”¨ <code>standard</code> æˆ– <code>singleTop</code> æ¨¡å¼å¯åŠ¨ <code>Activity</code> <code>B</code> æ—¶ï¼Œ<code>B</code> ä¼šæ”¾å…¥ <code>A</code> æ‰€åœ¨çš„ä»»åŠ¡æ ˆ <code>S1</code> ä¸­ï¼Œä¸”åœ¨ <code>B</code> çš„ç”Ÿå‘½å‘¨æœŸå†…ä¸€ç›´å­˜åœ¨äºè¿™ä¸ªä»»åŠ¡æ ˆ <code>S1</code> ä¸­ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœé€šè¿‡ <code>taskAffinity</code> å±æ€§ä¸º <code>B</code> æŒ‡å®šäº†ä¸€ä¸ªä¸åŒäº <code>A</code> çš„ä»»åŠ¡æ ˆ <code>S2</code>ï¼Œé‚£ä¹ˆæ ¹æ® <code>allowTaskReparenting</code> å±æ€§ï¼Œåœ¨ <code>B</code> çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œ<code>B</code> æ‰€åœ¨çš„ä»»åŠ¡æ ˆä¼šæœ‰å¦‚ä¸‹å˜åŒ–ï¼š</p><ol><li><p>å¦‚æœ <code>allowTaskReparenting</code> å±æ€§ä¸º <code>false</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œé‚£ä¹ˆ <code>B</code> çš„ç”Ÿå‘½å‘¨æœŸå†…ä¸€ç›´å­˜åœ¨äºä»»åŠ¡æ ˆ <code>S1</code> ä¸­ï¼Œä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p></li><li><p>å¦‚æœ <code>allowTaskReparenting</code> å±æ€§ä¸º <code>true</code>ï¼Œé‚£ä¹ˆå¯åŠ¨ <code>B</code> æ—¶ï¼Œ<code>B</code> ä»ç„¶ä½äº <code>S1</code> ä¸­ã€‚ä½†æ˜¯ï¼Œå½“æŠŠ <code>S1</code> åˆ‡æ¢æˆåå°ä»»åŠ¡æ ˆï¼ŒæŠŠ <code>S2</code> åˆ‡æ¢æˆå‰å°ä»»åŠ¡æ ˆæ—¶ï¼Œ<code>B</code> æ‰€åœ¨çš„ä»»åŠ¡æ ˆä¼šä» <code>S1</code> è½¬ç§»è‡³ <code>S2</code>ï¼Œæ­¤æ—¶åœ¨ <code>S2</code> ä½œä¸ºå‰å°ä»»åŠ¡æ ˆæ—¶æ˜¾ç¤ºçš„å°±æ˜¯ Bã€‚è€Œå½“ <code>S1</code> å†æ¬¡åˆ‡æ¢æˆå‰å°ä»»åŠ¡æ ˆæ—¶ï¼Œå°±ä¸ä¼šå†æ˜¾ç¤º <code>B</code> äº†ã€‚</p><div class="language-text ext-text"><pre class="language-text"><code>æ¯”å¦‚ï¼Œç”µå­é‚®ä»¶ App ä¸­æ˜¾ç¤ºé‚®ä»¶å†…å®¹çš„ Activity A ä¸­åŒ…å«ç½‘é¡µé“¾æ¥ï¼Œç‚¹å‡»è¯¥é“¾æ¥ä¼šå¯åŠ¨å¯æ˜¾ç¤ºè¯¥ç½‘é¡µçš„ Activity Bã€‚
è€Œ B åº”è¯¥æ˜¯åœ¨æµè§ˆå™¨ App ä¸­å®šä¹‰çš„ï¼Œå³ A å’Œ B å±äºä¸åŒçš„ Appã€‚
äºæ˜¯ï¼ŒA å’Œ B æ‰€éœ€çš„ä»»åŠ¡æ ˆä¸åŒï¼ˆä»»åŠ¡æ ˆåä¸ºå„è‡ªæ‰€åœ¨ App çš„åŒ…åï¼Œè®¾ A æ‰€éœ€ä»»åŠ¡æ ˆä¸º S1ï¼ŒB æ‰€éœ€ä»»åŠ¡æ ˆä¸º S2ï¼‰ã€‚
å‡è®¾ä¸º B è®¾ç½®äº† allowTaskReparenting å±æ€§ä¸º trueï¼Œé‚£ä¹ˆ B æ‰€åœ¨çš„ä»»åŠ¡æ ˆçš„å˜åŒ–è¿‡ç¨‹ä¸ºï¼š
1. åœ¨ A ä¸­ç‚¹å‡»ç½‘é¡µé“¾æ¥æ˜¾ç¤º B æ—¶ï¼ŒB ä½äº A æ‰€åœ¨çš„ä»»åŠ¡æ ˆ S1 çš„æ ˆé¡¶
2. æŒ‰ HOME é”®å›åˆ°æ¡Œé¢ï¼ŒS1 åˆ‡æ¢æˆåå°ä»»åŠ¡æ ˆ
3. ç‚¹å‡»æµè§ˆå™¨ App çš„æ¡Œé¢å›¾æ ‡ï¼Œäºæ˜¯åˆ›å»ºäº†ä»»åŠ¡æ ˆ S2ï¼Œä¸”ä»»åŠ¡æ ˆ S2 åˆ‡æ¢æˆå‰å°ä»»åŠ¡æ ˆï¼Œ
   æ­¤æ—¶ S1 ä¸­çš„ B å°±ä¼šè½¬ç§»è‡³ S2 çš„æ ˆé¡¶ï¼Œä»è€Œå°† B æ˜¾ç¤ºå‡ºæ¥ã€‚ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶å°±ä¸ä¼šå¯åŠ¨æµè§ˆå™¨ App çš„ä¸» Activity äº†ï¼‰
4. å½“å†æ¬¡è¿›å…¥ç”µå­é‚®ä»¶ App æ—¶ï¼ŒS1 åˆ‡æ¢æˆå‰å°ä»»åŠ¡æ ˆï¼Œä½†æ­¤æ—¶ B å·²ä» S1 ä¸­ç§»é™¤ï¼Œæ‰€ä»¥ä¸ä¼šå†æ˜¾ç¤º B äº†ã€‚
</code></pre></div></li></ol><h3 id="_2-5-ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-5-ç¤ºä¾‹" aria-hidden="true">#</a> 2.5 ç¤ºä¾‹</h3><h4 id="_2-5-1-ç¤ºä¾‹-1-æŸ¥çœ‹-activity-ä»»åŠ¡æ ˆ-dumpsys-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_2-5-1-ç¤ºä¾‹-1-æŸ¥çœ‹-activity-ä»»åŠ¡æ ˆ-dumpsys-å‘½ä»¤" aria-hidden="true">#</a> 2.5.1 ç¤ºä¾‹ 1ï¼šæŸ¥çœ‹ <code>Activity</code> ä»»åŠ¡æ ˆ &amp; <code>dumpsys</code> å‘½ä»¤</h4><div class="language-xml ext-xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ryg.chapter_1.MainActivity<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>configChanges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orientation|screenSize<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@string/app_name<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>launchMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>standard<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.action.MAIN<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.category.LAUNCHER<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>button1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span>v <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            intent<span class="token punctuation">.</span><span class="token function">setClass</span><span class="token punctuation">(</span><span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onNewIntent</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onNewIntent</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span><span class="token string">&quot;onNewIntent, time=&quot;</span> <span class="token operator">+</span> intent<span class="token punctuation">.</span><span class="token function">getLongExtra</span><span class="token punctuation">(</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>MainActivity</code> æŒ‡å®šä¸º <code>standard</code> æ¨¡å¼ï¼Œæ­¤æ—¶ï¼Œè¿ç»­ç‚¹å‡»ä¸‰æ¬¡æŒ‰é’®å¯åŠ¨ <code>3</code> æ¬¡ <code>MainActivity</code>ã€‚ç®—ä¸ŠåŸæœ¬çš„ <code>MainActvity</code> å®ä¾‹ï¼Œä»»åŠ¡æ ˆä¸­åº”è¯¥æœ‰ <code>4</code> ä¸ª <code>MainActivity</code> çš„å®ä¾‹ï¼Œæ‰§è¡Œ <code>adb shell dumpsys activity</code> å‘½ä»¤çš„æ—¥å¿—å¦‚ä¸‹ï¼š</p><div class="language-log ext-log"><pre class="language-log"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token property">Running activities (most recent first):</span>
     TaskRecord<span class="token operator">{</span><span class="token number">41325370</span> <span class="token operator">#</span><span class="token number">17</span> A com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">}</span> <span class="token operator">#</span> åŒ…åä¸º com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1 çš„ App çš„ä¸»ä»»åŠ¡æ ˆ
       Run <span class="token operator">#</span><span class="token number">4</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">41236968</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>MainActivity<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">3</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">411f4b30</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>MainActivity<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">2</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">411edcb8</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>MainActivity<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">1</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">411e7588</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>MainActivity<span class="token operator">}</span>
     TaskRecord<span class="token operator">{</span><span class="token number">4125abc8</span> <span class="token operator">#</span><span class="token number">2</span> A com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher<span class="token operator">}</span> <span class="token operator">#</span> åŒ…åä¸º <span class="token domain constant">com.android.launcher</span> çš„æ¡Œé¢ App çš„ä¸»ä»»åŠ¡æ ˆ
       Run <span class="token operator">#</span><span class="token number">0</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">412381f8</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher<span class="token operator">/</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>
       launcher2<span class="token punctuation">.</span>Launcher<span class="token operator">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><blockquote><p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨åç§°ä¸º <code>com.ryg.chapter_1</code> çš„ä»»åŠ¡æ ˆä¸­ï¼Œä¸€å…±æœ‰ <code>4</code> ä¸ª <code>MainActivity</code> å®ä¾‹ã€‚</p></blockquote><p>å°† <code>MainActivity</code> æŒ‡å®šä¸º <code>singleTask</code> æ¨¡å¼ï¼Œæ­¤æ—¶ï¼Œè¿ç»­ç‚¹å‡»ä¸‰æ¬¡æŒ‰é’®å¯åŠ¨ <code>3</code> æ¬¡ <code>MainActivity</code>ã€‚æ‰§è¡Œ <code>adb shell dumpsys activity</code> å‘½ä»¤çš„æ—¥å¿—å¦‚ä¸‹ï¼š</p><div class="language-log ext-log"><pre class="language-log"><code><span class="token property">Running activities (most recent first):</span>
     TaskRecord<span class="token operator">{</span><span class="token number">41350dc8</span> <span class="token operator">#</span><span class="token number">9</span> A com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">1</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">412cc188</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>MainActivity<span class="token operator">}</span>
     TaskRecord<span class="token operator">{</span><span class="token number">4125abc8</span> <span class="token operator">#</span><span class="token number">2</span> A com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">0</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">412381f8</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher<span class="token operator">/</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>
       launcher2<span class="token punctuation">.</span>Launcher<span class="token operator">}</span>
</code></pre></div><blockquote><p>å¯ä»¥çœ‹å‡ºï¼Œé‡‡ç”¨ <code>singleTask</code> æ—¶ï¼Œåœ¨åç§°ä¸º <code>com.ryg.chapter_1</code> çš„ä»»åŠ¡æ ˆä¸­ï¼Œä¸€å…±åªæœ‰ <code>1</code> ä¸ª <code>MainActivity</code> å®ä¾‹ã€‚</p><p>æŸ¥çœ‹ <code>logcat</code> æ—¥å¿—å‘ç°ï¼Œ<code>3</code> æ¬¡ç‚¹å‡»æŒ‰é’®å¯åŠ¨ <code>MainActivity</code> æ—¶ï¼Œéƒ½å›è°ƒäº† <code>onNewIntent</code> æ–¹æ³•ã€‚</p><p><img src="/assets/02.13f92016.png" alt="" loading="lazy"></p></blockquote><h4 id="_2-5-2-ç¤ºä¾‹-2-singletop-æ¨¡å¼å…·æœ‰-cleartop-çš„æ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#_2-5-2-ç¤ºä¾‹-2-singletop-æ¨¡å¼å…·æœ‰-cleartop-çš„æ•ˆæœ" aria-hidden="true">#</a> 2.5.2 ç¤ºä¾‹ 2ï¼š<code>singleTop</code> æ¨¡å¼å…·æœ‰ <code>clearTop</code> çš„æ•ˆæœ</h4><div class="language-xml ext-xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ryg.chapter_1.MainActivity<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>configChanges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orientation|screenSize<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@string/app_name<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>launchMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>standard<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.action.MAIN<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.category.LAUNCHER<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ryg.chapter_1.SecondActivity<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>configChanges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>screenLayout<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@string/app_name<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>taskAffinity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ryg.task1<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>launchMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>singleTask<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ryg.chapter_1.ThirdActivity<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>configChanges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>screenLayout<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>taskAffinity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ryg.task1<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@string/app_name<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>launchMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>singleTask<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>æ“ä½œæ­¥éª¤ä¸ºï¼š</p><ol><li><p>åœ¨ <code>MainActivity</code> ä¸­å•å‡»æŒ‰é’®å¯åŠ¨ <code>SecondActivity</code></p></li><li><p>åœ¨ <code>SecondActivity</code> ä¸­å•å‡»æŒ‰é’®å¯åŠ¨ <code>ThirdActivity</code></p></li><li><p>åœ¨ <code>ThirdActivity</code> ä¸­å•å‡»æŒ‰é’®åˆå¯åŠ¨ <code>MainActivity</code></p></li><li><p>å†åœ¨ <code>MainActivity</code> ä¸­å•å‡»æŒ‰é’®å¯åŠ¨ <code>SecondActivity</code></p></li><li><p>æŒ‰è¿”å›é”®</p></li><li><p>å†æŒ‰è¿”å›é”®</p></li></ol><p>æ‰§è¡Œå®Œç¬¬ <code>3</code> æ­¥æ—¶ï¼Œé€šè¿‡ <code>adb shell dumpsys activity</code> å‘½ä»¤æ‰“å°æ—¥å¿—å¦‚ä¸‹ï¼š</p><div class="language-log ext-log"><pre class="language-log"><code><span class="token property">Running activities (most recent first):</span>
    TaskRecord<span class="token operator">{</span><span class="token number">4132bd90</span> <span class="token operator">#</span><span class="token number">12</span> A com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>task1<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">4</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">4133fd18</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>MainActivity<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">3</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">41349c58</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>ThirdActivity<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">2</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">4132bab0</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>SecondActivity<span class="token operator">}</span>
    TaskRecord<span class="token operator">{</span><span class="token number">4125a008</span> <span class="token operator">#</span><span class="token number">11</span> A com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">1</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">41328c60</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>MainActivity<span class="token operator">}</span>
    TaskRecord<span class="token operator">{</span><span class="token number">41256440</span> <span class="token operator">#</span><span class="token number">2</span> A com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">0</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">41231d30</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher<span class="token operator">/</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher2<span class="token punctuation">.</span>Launcher<span class="token operator">}</span>
</code></pre></div><blockquote><p>åˆ†æï¼š</p><ol><li><p><code>MainActivity</code> ä½œä¸ºä¸» <code>Activity</code>ï¼Œä¸”æ²¡æœ‰é€šè¿‡ <code>taskAffinity</code> å±æ€§æŒ‡å®šä»»åŠ¡æ ˆï¼Œæ‰€ä»¥ <code>App</code> å¯åŠ¨æ—¶ï¼Œå…ˆå¯åŠ¨ <code>MainActivity</code>ï¼Œå¹¶æ”¾å…¥åˆ°ä»»åŠ¡æ ˆ <code>com.ryg.chapter_1</code> ä¸­ï¼›</p></li><li><p><code>MainActivity</code> ä¸­å¯åŠ¨ <code>SecondActivity</code> æ—¶ï¼Œç”±äº <code>SecondActivity</code> çš„å¯åŠ¨æ¨¡å¼ä¸º <code>singleTask</code>ï¼Œä¸”é€šè¿‡ <code>taskAffinity</code> å±æ€§æŒ‡å®šä»»åŠ¡æ ˆä¸º <code>com.ryg.task1</code>ï¼Œæ‰€ä»¥å…ˆåˆ›å»ºä»»åŠ¡æ ˆ <code>com.ryg.task1</code>ï¼Œå†åˆ›å»º <code>SecondActivity</code> å®ä¾‹ï¼Œå¹¶å°† <code>SecondActivity</code> å®ä¾‹æ”¾å…¥ä»»åŠ¡æ ˆ <code>com.ryg.task1</code> ä¸­ï¼›</p></li><li><p><code>SecondActivity</code> ä¸­å¯åŠ¨ <code>ThirdActivity</code> æ—¶ï¼Œç”±äº <code>ThirdActivity</code> çš„å¯åŠ¨æ¨¡å¼ä¸º <code>singleTask</code>ï¼Œä¸”é€šè¿‡ <code>taskAffinity</code> å±æ€§æŒ‡å®šä»»åŠ¡æ ˆä¸º <code>com.ryg.task1</code>ï¼Œå³å’Œ <code>SecondActivity</code> åœ¨åŒä¸€ä¸ªä»»åŠ¡æ ˆä¸­ï¼Œæ­¤æ—¶ä»»åŠ¡æ ˆ <code>com.ryg.task1</code> ä¸­ä¸å­˜åœ¨ <code>ThirdActivity</code> å®ä¾‹ï¼Œæ‰€ä»¥åˆ›å»º <code>ThirdActivity</code> å®ä¾‹å¹¶æ”¾å…¥ä»»åŠ¡æ ˆ <code>com.ryg.task1</code> ä¸­ï¼›</p></li><li><p><code>ThirdActivity</code> ä¸­å¯åŠ¨ <code>MainActivity</code> æ—¶ï¼Œç”±äº <code>MainActivity</code> çš„å¯åŠ¨æ¨¡å¼ä¸º <code>standard</code>ï¼Œæ‰€ä»¥æ–°åˆ›å»º <code>MainActivity</code> å®ä¾‹å¹¶æ”¾å…¥åˆ°ä»»åŠ¡æ ˆ <code>com.ryg.task1</code> ä¸­ã€‚ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶å­˜åœ¨äº†ä¸¤ä¸ªä½äºä¸åŒä»»åŠ¡æ ˆçš„ <code>MainActivity</code> å®ä¾‹äº†ï¼‰&gt;</p></li></ol></blockquote><p>æ‰§è¡Œå®Œç¬¬ <code>4</code> æ­¥æ—¶ï¼Œé€šè¿‡ <code>adb shell dumpsys activity</code> å‘½ä»¤æ‰“å°æ—¥å¿—å¦‚ä¸‹ï¼š</p><div class="language-log ext-log"><pre class="language-log"><code><span class="token property">Running activities (most recent first):</span>
    TaskRecord<span class="token operator">{</span><span class="token number">4132bd90</span> <span class="token operator">#</span><span class="token number">12</span> A com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>task1<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">2</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">4132bab0</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>SecondActivity<span class="token operator">}</span>
    TaskRecord<span class="token operator">{</span><span class="token number">4125a008</span> <span class="token operator">#</span><span class="token number">11</span> A com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">1</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">41328c60</span> com<span class="token punctuation">.</span>ryg<span class="token punctuation">.</span>chapter_1<span class="token operator">/</span><span class="token punctuation">.</span>MainActivity<span class="token operator">}</span>
    TaskRecord<span class="token operator">{</span><span class="token number">41256440</span> <span class="token operator">#</span><span class="token number">2</span> A com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher<span class="token operator">}</span>
       Run <span class="token operator">#</span><span class="token number">0</span><span class="token operator">:</span> ActivityRecord<span class="token operator">{</span><span class="token number">41231d30</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher<span class="token operator">/</span>com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>launcher2<span class="token punctuation">.</span>Launcher<span class="token operator">}</span>
</code></pre></div><blockquote><p>åˆ†æï¼š</p><ol><li>åœ¨ä½äºä»»åŠ¡æ ˆ <code>com.ryg.task1</code> ä¸­çš„ <code>MainActivity</code> ä¸­å¯åŠ¨ <code>SecondActivity</code> æ—¶ï¼Œç”±äºä»»åŠ¡æ ˆ <code>com.ryg.task1</code> ä¸­å·²ç»å­˜åœ¨äº† <code>SecondActivity</code> å®ä¾‹ï¼Œæ‰€ä»¥ä¸ä¼šå†åˆ›å»º <code>SecondActivity</code> å®ä¾‹äº†ï¼Œè€Œæ˜¯å°†å·²å­˜åœ¨äºæ­¤ä»»åŠ¡æ ˆä¸­çš„ <code>SecondActivity</code> å®ä¾‹ç§»åŠ¨åˆ°æ ˆé¡¶ï¼ŒåŒæ—¶å°† <code>SecondActivity</code> å®ä¾‹ä¹‹ä¸Šçš„å…¶ä»– <code>Activity</code> å…¨éƒ¨ä»æ­¤ä»»åŠ¡æ ˆä¸­ç§»å‡ºã€‚</li></ol></blockquote><p>æ‰§è¡Œç¬¬ <code>5</code> æ­¥æ—¶ï¼Œå‰å°ä»»åŠ¡æ ˆä¸º <code>com.ryg.task1</code>ï¼Œä¸”æ­¤ä»»åŠ¡æ ˆä¸­åªæœ‰ä¸€ä¸ª <code>SecondActivity</code> å®ä¾‹äº†ï¼Œæ‰€ä»¥æŒ‰ä¸‹è¿”å›é”®åï¼Œ<code>SecondActivity</code> ä»ä»»åŠ¡æ ˆ <code>com.ryg.task1</code> ä¸­ç§»é™¤ï¼Œä»»åŠ¡æ ˆ <code>com.ryg.task1</code> å˜æˆç©ºæ ˆã€‚äºæ˜¯ï¼Œå°†ä»»åŠ¡æ ˆ <code>com.ryg.chapter_1</code> åˆ‡æ¢æˆå‰å°ä»»åŠ¡æ ˆï¼Œæ˜¾ç¤ºå‡ºè¯¥ä»»åŠ¡æ ˆä¸­çš„ <code>MainActivity</code>ã€‚</p><p>æ‰§è¡Œç¬¬ <code>6</code> æ­¥æ—¶ï¼Œ<code>App</code> ä¸­åªå­˜åœ¨ä¸€ä¸ªä»»åŠ¡æ ˆ <code>com.ryg.chapter_1</code> äº†ï¼Œä¸”è¯¥ä»»åŠ¡æ ˆä¸­åªå­˜åœ¨ä¸€ä¸ª <code>MainActivity</code> å®ä¾‹ï¼Œæ‰€ä»¥æŒ‰ä¸‹è¿”å›é”®åï¼Œ<code>MainActivity</code> å®ä¾‹ä»è¯¥ä»»åŠ¡æ ˆä¸­ç§»é™¤ï¼Œä»»åŠ¡æ ˆ <code>com.ryg.chapter_1</code> å˜æˆç©ºæ ˆã€‚äºæ˜¯ï¼Œ<code>App</code> æ²¡æœ‰å¯ä»¥æ˜¾ç¤ºçš„ <code>Activity</code> äº†ï¼Œä»è€Œé€€å‡ºåˆ°æ¡Œé¢ã€‚</p><h3 id="_2-6-å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_2-6-å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯" aria-hidden="true">#</a> 2.6 å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</h3><p><code>standard</code> æ¨¡å¼æ˜¯æœ€æ™®é€šçš„ä¸€ç§ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«æ³¨æ„ã€‚</p><p><code>singleInstance</code> æ¨¡å¼æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å•ä¾‹æ¨¡å¼ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ä¸€èˆ¬ä¸ä¼šåº”ç”¨åˆ°ã€‚</p><p><code>singleTask</code> æœ€å…¸å‹çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ App çš„ä¸»é¡µ <code>Activity</code>ã€‚</p><blockquote><p>åœ¨åŒä¸€ä¸ª <code>App</code> ä¸­ï¼Œä¸è€ƒè™‘ä½¿ç”¨ <code>taskAffinity</code> å±æ€§æŒ‡å®šå…¶ä»–ä»»åŠ¡æ ˆçš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„ <code>Activity</code> éƒ½å­˜æ”¾åœ¨åŒä¸€ä¸ªä»»åŠ¡æ ˆä¸­ï¼ˆå³ <code>App</code> çš„ä¸»ä»»åŠ¡æ ˆï¼Œæ ˆå = åŒ…åï¼‰ã€‚æ­¤æ—¶ï¼Œé‡‡ç”¨ <code>singleTask</code> æ¨¡å¼å¯åŠ¨çš„ <code>Activity</code> åœ¨æ•´ä¸ª <code>App</code> ä¸­å°±åªæœ‰å”¯ä¸€çš„å®ä¾‹ã€‚</p><p>é‡‡ç”¨ <code>singleTask</code> æ¨¡å¼å¯åŠ¨ä¸»é¡µ <code>Activity</code> çš„å¥½å¤„é™¤äº†ä½¿ä¸»é¡µ <code>Activity</code> å®ä¾‹å…¨å±€å”¯ä¸€ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>singleTask</code> æ¨¡å¼è‡ªå¸¦çš„ <code>clearTop</code> æ•ˆæœï¼Œä½¿å¾—å½“å†æ¬¡å›åˆ°ä¸»é¡µ <code>Activity</code> æ—¶ï¼ŒåŒä¸€æ ˆå†…çš„å…¶å®ƒ <code>Activity</code> éƒ½è¢«ç§»é™¤æ‰ã€‚äºæ˜¯ï¼Œåªè¦å›åˆ°ä¸»é¡µ <code>Activity</code>ï¼Œé‚£ä¹ˆæŒ‰ä¸‹ <code>back</code> é”®æ—¶å°±ä¼šé€€å‡º <code>App</code>ã€‚</p><p>æ³¨æ„ï¼šä¸»é¡µ <code>Activity</code> æ˜¯ç¬¬ä¸€ä¸ªæ˜¾ç¤ºçš„ <code>Activity</code>ï¼Œå½“é‡‡ç”¨ <code>singleTask</code> æ¨¡å¼ï¼Œä¸” <code>App</code> ä¸­åªæœ‰ä¸€ä¸ªä»»åŠ¡æ ˆæ—¶ï¼Œä¸»é¡µ <code>Activity</code> è¦ä¹ˆåœ¨æ ˆé¡¶ï¼Œè¦ä¹ˆåœ¨æ ˆåº•ã€‚</p></blockquote><p><code>singleTop</code> æ¨¡å¼å¯ç”¨äºåœ¨å½“å‰ <code>Activity</code> ä¸­å†æ¬¡å¯åŠ¨å½“å‰çš„ <code>Activity</code>ã€‚æ­¤åœºæ™¯ä¸‹ä½¿ç”¨ <code>singleTop</code> æ¨¡å¼å¯ä»¥é¿å… <code>Activity</code> çš„é‡å¤åˆ›å»ºã€‚</p><blockquote><p>å¦‚ç‚¹å‡»æŒ‰é’®å¯åŠ¨ <code>Activity</code> æ—¶ï¼Œå¦‚æœå¤šæ¬¡å¿«é€Ÿåœ°é‡å¤ç‚¹å‡»æ­¤æŒ‰é’®ï¼Œå°±ä¼šå¤šæ¬¡é‡å¤åœ°å¯åŠ¨ <code>Activity</code>ï¼Œæ­¤æ—¶è‹¥é‡‡ç”¨ <code>standard</code> æ¨¡å¼å¯åŠ¨ï¼Œä»»åŠ¡æ ˆä¸­å°±ä¼šå­˜åœ¨å¤šä¸ªè¿ç»­é‡å¤çš„ <code>Activity</code> å®ä¾‹ï¼Œé‚£ä¹ˆå½“æŒ‰è¿”å›é”®æ—¶ï¼Œä¼šé‡å¤æ˜¾ç¤ºè¿™ä¸ª <code>Activity</code>ã€‚</p><p>æ­¤æ—¶ï¼Œé‡‡ç”¨ <code>singleTop</code> æ¨¡å¼å¯è§£å†³æ­¤æƒ…å†µä¸‹é‡å¤åˆ›å»º <code>Activity</code> çš„é—®é¢˜ã€‚ï¼ˆè¿™é‡Œåªæ˜¯è¯´æ˜ <code>singleTop</code> æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯ï¼Œå®é™…å¼€å‘ä¸­åº”è¯¥å°½é‡é¿å…å¤šæ¬¡ç‚¹å‡»æŒ‰é’®çš„æƒ…å†µï¼‰</p></blockquote><h3 id="_2-7-activity-çš„-flags" tabindex="-1"><a class="header-anchor" href="#_2-7-activity-çš„-flags" aria-hidden="true">#</a> 2.7 <code>Activity</code> çš„ <code>Flags</code></h3><h4 id="_2-7-1-è®¾ç½®-activity-å¯åŠ¨æ¨¡å¼çš„-flags" tabindex="-1"><a class="header-anchor" href="#_2-7-1-è®¾ç½®-activity-å¯åŠ¨æ¨¡å¼çš„-flags" aria-hidden="true">#</a> 2.7.1 è®¾ç½® <code>Activity</code> å¯åŠ¨æ¨¡å¼çš„ <code>Flags</code></h4><h5 id="_2-7-1-1-flag-activity-new-task" tabindex="-1"><a class="header-anchor" href="#_2-7-1-1-flag-activity-new-task" aria-hidden="true">#</a> 2.7.1.1 <code>FLAG_ACTIVITY_NEW_TASK</code></h5><p>ä¸ºActivityæŒ‡å®šâ€œsingleTaskâ€å¯åŠ¨æ¨¡å¼ï¼Œå…¶æ•ˆæœå’Œåœ¨XMLä¸­æŒ‡å®šè¯¥å¯åŠ¨æ¨¡å¼ç›¸åŒ</p><h5 id="_2-7-1-2-flag-activity-single-top" tabindex="-1"><a class="header-anchor" href="#_2-7-1-2-flag-activity-single-top" aria-hidden="true">#</a> 2.7.1.2 <code>FLAG_ACTIVITY_SINGLE_TOP</code></h5><p>ä¸ºActivityæŒ‡å®šâ€œsingleTopâ€å¯åŠ¨æ¨¡å¼ï¼Œå…¶æ•ˆæœå’Œåœ¨XMLä¸­æŒ‡å®šè¯¥å¯åŠ¨æ¨¡å¼ç›¸åŒã€‚</p><h4 id="_2-7-2-å½±å“-activity-è¿è¡ŒçŠ¶æ€çš„-flags" tabindex="-1"><a class="header-anchor" href="#_2-7-2-å½±å“-activity-è¿è¡ŒçŠ¶æ€çš„-flags" aria-hidden="true">#</a> 2.7.2 å½±å“ <code>Activity</code> è¿è¡ŒçŠ¶æ€çš„ <code>Flags</code></h4><h5 id="_2-7-2-1-flag-activity-clear-top" tabindex="-1"><a class="header-anchor" href="#_2-7-2-1-flag-activity-clear-top" aria-hidden="true">#</a> 2.7.2.1 <code>FLAG_ACTIVITY_CLEAR_TOP</code></h5><p>å…·æœ‰æ­¤æ ‡è®°ä½çš„ <code>Activity</code> å¯åŠ¨æ—¶ï¼Œè‹¥ä»»åŠ¡æ ˆä¸­å·²å­˜åœ¨æ­¤ <code>Activity</code> å®ä¾‹ï¼Œé‚£ä¹ˆä»»åŠ¡æ ˆä¸­æ­¤ <code>Activity</code> å®ä¾‹ä¹‹ä¸Šçš„æ‰€æœ‰ <code>Activity</code> éƒ½è¦å‡ºæ ˆï¼Œå³ï¼šæ¸…é™¤æ­¤ <code>Activity</code> é¡¶éƒ¨çš„æ‰€æœ‰ <code>Activity</code>ã€‚</p><p>æ³¨æ„ï¼š</p><ol><li><p><code>singleTask</code> æ¨¡å¼é»˜è®¤å…·æœ‰æ­¤æ ‡è®°ä½çš„æ•ˆæœã€‚</p></li><li><p>å½“ <code>standard</code> æ¨¡å¼å¯åŠ¨çš„ <code>Activity</code> è®¾ç½®æ­¤æ ‡è®°ä½æ—¶ï¼Œè‹¥ä»»åŠ¡æ ˆä¸­å·²å­˜åœ¨æ­¤ <code>Activity</code> å®ä¾‹ï¼Œé‚£ä¹ˆè¿åŒè¿™ä¸ªå·²å­˜åœ¨çš„ <code>Activity</code> å®ä¾‹ä»¥åŠå…¶é¡¶éƒ¨çš„æ‰€æœ‰ <code>Activity</code> å®ä¾‹éƒ½è¦å‡ºæ ˆï¼Œç„¶åæ–°åˆ›å»ºæ­¤ <code>Activity</code> å®ä¾‹å¹¶æ”¾å…¥æ ˆä¸­ã€‚</p></li></ol><h5 id="_2-7-2-2-flag-activity-exclude-from-recents" tabindex="-1"><a class="header-anchor" href="#_2-7-2-2-flag-activity-exclude-from-recents" aria-hidden="true">#</a> 2.7.2.2 <code>FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS</code></h5><p>å…·æœ‰è¿™ä¸ªæ ‡è®°çš„ <code>Activity</code> ä¸ä¼šå‡ºç°åœ¨å†å² <code>Activity</code> çš„åˆ—è¡¨ä¸­ã€‚</p><blockquote><p>å½“æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬ä¸å¸Œæœ›ç”¨æˆ·é€šè¿‡å†å²åˆ—è¡¨å›åˆ°æˆ‘ä»¬çš„ <code>Activity</code> æ—¶ä½¿ç”¨æ­¤æ ‡è®°ã€‚</p><p>æ­¤æ ‡è®°ä½ç­‰åŒäºåœ¨ <code>XML</code> ä¸­æŒ‡å®š <code>Activity</code> çš„å±æ€§ <code>android:excludeFromRecents=&quot;true&quot;</code>ã€‚</p></blockquote><h3 id="_2-8-onnewintent-æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#_2-8-onnewintent-æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ" aria-hidden="true">#</a> 2.8 <code>onNewIntent</code> æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ</h3><p>åªæœ‰å½“ä»¥ <code>singleTop</code>ã€<code>singleTask</code>ã€æˆ– <code>singleInstance</code> è¿™ä¸‰ç§æ¨¡å¼å¯åŠ¨ <code>Activity</code> æ—¶ï¼Œ <code>onNewIntent</code> æ–¹æ³•æ‰ä¼šè¢«è°ƒç”¨ã€‚å…·ä½“ä¸ºï¼š</p><ol><li><p>å½“ä»¥ <code>singleTop</code> æ¨¡å¼å¯åŠ¨ <code>Activity</code> æ—¶ï¼Œè‹¥ <code>Activity</code> æ‰€éœ€ä»»åŠ¡æ ˆçš„æ ˆé¡¶å·²å­˜åœ¨æ­¤ <code>Activity</code> å®ä¾‹ï¼Œåˆ™æ‰§è¡Œ <code>onNewIntent</code>ï¼›</p></li><li><p>å½“ä»¥ <code>singleTask</code> æ¨¡å¼å¯åŠ¨ <code>Activity</code> æ—¶ï¼Œè‹¥ <code>Activity</code> æ‰€éœ€ä»»åŠ¡æ ˆä¸­å·²å­˜åœ¨æ­¤ <code>Activity</code> å®ä¾‹ï¼Œåˆ™æ‰§è¡Œ onNewIntentï¼›</p></li><li><p>å½“ä»¥ <code>singleInstance</code> æ¨¡å¼å¯åŠ¨ <code>Activity</code> æ—¶ï¼Œè‹¥ <code>Activity</code> æ‰€éœ€ä»»åŠ¡æ ˆå­˜åœ¨ï¼Œåˆ™æ‰§è¡Œ <code>onNewIntent</code>ï¼›</p></li></ol><h2 id="_3-æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_3-æ•°æ®" aria-hidden="true">#</a> 3. æ•°æ®</h2><h3 id="_3-1-intent-ä¼ é€’æ•°æ®å¤ªå¤§-æŠ¥-transactiontoolargeexception-å¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_3-1-intent-ä¼ é€’æ•°æ®å¤ªå¤§-æŠ¥-transactiontoolargeexception-å¼‚å¸¸" aria-hidden="true">#</a> 3.1 <code>Intent</code> ä¼ é€’æ•°æ®å¤ªå¤§ï¼ŒæŠ¥ <code>TransactionTooLargeException</code> å¼‚å¸¸</h3><p><code>Intent</code> åœ¨ä¼ é€’æ•°æ®æ—¶æ˜¯æœ‰å¤§å°é™åˆ¶çš„ï¼šæ•°æ®åº”è¯¥è¢«é™åˆ¶åœ¨ <code>1MB</code> ä¹‹å†…ï¼ˆ<code>1024KB</code>ï¼‰</p><h2 id="_4-context" tabindex="-1"><a class="header-anchor" href="#_4-context" aria-hidden="true">#</a> 4. <code>Context</code></h2><h3 id="_4-1-context-çš„ç»§æ‰¿å…³ç³»" tabindex="-1"><a class="header-anchor" href="#_4-1-context-çš„ç»§æ‰¿å…³ç³»" aria-hidden="true">#</a> 4.1 <code>Context</code> çš„ç»§æ‰¿å…³ç³»</h3><p><img src="/assets/03.f2054a66.png" alt="" loading="lazy"></p><h2 id="_5-è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#_5-è¿›ç¨‹" aria-hidden="true">#</a> 5. è¿›ç¨‹</h2><h3 id="_5-1-è¿›ç¨‹ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#_5-1-è¿›ç¨‹ä¼˜å…ˆçº§" aria-hidden="true">#</a> 5.1 è¿›ç¨‹ä¼˜å…ˆçº§</h3><div class="language-text ext-text"><pre class="language-text"><code>å‰å°è¿›ç¨‹ &gt; å¯è§è¿›ç¨‹ &gt; æœåŠ¡è¿›ç¨‹ &gt; åå°è¿›ç¨‹ &gt; ç©ºè¿›ç¨‹
</code></pre></div><h3 id="_5-2-è¿›ç¨‹åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_5-2-è¿›ç¨‹åˆ†ç±»" aria-hidden="true">#</a> 5.2 è¿›ç¨‹åˆ†ç±»</h3><h4 id="_5-2-1-å‰å°è¿›ç¨‹-foreground-process" tabindex="-1"><a class="header-anchor" href="#_5-2-1-å‰å°è¿›ç¨‹-foreground-process" aria-hidden="true">#</a> 5.2.1 å‰å°è¿›ç¨‹ï¼ˆ<code>Foreground Process</code>ï¼‰</h4><p>ä»¥ä¸‹ä»»ä¸€æ¡ä»¶æˆç«‹ï¼Œåˆ™è¿›ç¨‹ä¼šè¢«è®¤ä¸ºä½äºå‰å°ï¼š</p><ol><li><p>è¿›ç¨‹ä¸­è¿è¡Œçš„ <code>Activity</code> æ­£åœ¨ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼ˆæ­¤æ—¶ï¼Œ<code>Activity</code> çš„ <code>onResume</code> æ–¹æ³•å·²è¢«è°ƒç”¨ï¼‰ã€‚</p></li><li><p>ç»„ä»¶æ­£åœ¨æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„å›è°ƒï¼ˆå¦‚ï¼š<code>onCreate</code>ã€<code>onStart</code>ã€<code>onDestory</code>ï¼‰</p></li><li><p>è¢«ä¸»åŠ¨è°ƒç”¨ä¸ºå‰å° <code>Service</code>ï¼ˆ<code>startForeground()</code>ï¼‰</p></li><li><p><code>BroadcastReceiver</code> æ­£åœ¨æ‰§è¡Œ <code>onReceive()</code></p></li></ol><h4 id="_5-2-2-å¯è§è¿›ç¨‹-visible-process" tabindex="-1"><a class="header-anchor" href="#_5-2-2-å¯è§è¿›ç¨‹-visible-process" aria-hidden="true">#</a> 5.2.2 å¯è§è¿›ç¨‹ï¼ˆ<code>Visible Process</code>ï¼‰</h4><p>å¯è§è¿›ç¨‹æŒ‡éƒ¨åˆ†ç¨‹åºç•Œé¢èƒ½å¤Ÿè¢«ç”¨æˆ·çœ‹è§ï¼Œå´ä¸åœ¨å‰å°ä¸ç”¨æˆ·äº¤äº’çš„è¿›ç¨‹ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ª <code>App</code> çš„ç•Œé¢ä¸Šå¼¹å‡ºå¦ä¸€ä¸ª <code>App</code> çš„å¯¹è¯æ¡†ä¸»é¢˜çš„ <code>Activity</code>ï¼Œé‚£ä¹ˆåœ¨å¯¹è¯æ¡†åé¢çš„åŸ <code>App</code> çš„ç•Œé¢æ˜¯å¯è§çš„ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œé‚£ä¹ˆåŸ <code>App</code> è¿›ç¨‹å°±æ˜¯å¯è§è¿›ç¨‹ã€‚</p><h4 id="_5-2-3-æœåŠ¡è¿›ç¨‹-service-process" tabindex="-1"><a class="header-anchor" href="#_5-2-3-æœåŠ¡è¿›ç¨‹-service-process" aria-hidden="true">#</a> 5.2.3 æœåŠ¡è¿›ç¨‹ï¼ˆ<code>Service Process</code>ï¼‰</h4><p>å¦‚æœ <code>App</code> ç•Œé¢å¯¹ç”¨æˆ·ä¸å¯è§ï¼Œä½†å­˜åœ¨ä¸€ä¸ªé€šè¿‡ <code>startService</code> æ–¹æ³•å¯åŠ¨çš„ <code>Service</code> ç»„ä»¶åœ¨åå°è¿è¡Œï¼Œé‚£ä¹ˆè¯¥ <code>App</code> è¿›ç¨‹å°±æ˜¯æœåŠ¡è¿›ç¨‹ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨åå°æ’­æ”¾éŸ³ä¹æˆ–è€…åœ¨åå°ä¸‹è½½å°±æ˜¯æœåŠ¡è¿›ç¨‹ã€‚</p><h4 id="_5-2-4-åå°è¿›ç¨‹-background-process" tabindex="-1"><a class="header-anchor" href="#_5-2-4-åå°è¿›ç¨‹-background-process" aria-hidden="true">#</a> 5.2.4 åå°è¿›ç¨‹ï¼ˆ<code>Background Process</code>ï¼‰</h4><p>å½“ <code>App</code> ä¸­è¿è¡Œçš„ <code>Activity</code> å¯¹ç”¨æˆ·ä¸å¯è§ï¼ˆå·²è°ƒç”¨äº† <code>Activity</code> çš„ <code>onStop</code> æ–¹æ³•ï¼‰æ—¶ï¼ŒApp æ‰€åœ¨çš„è¿›ç¨‹å°±æ˜¯åå°è¿›ç¨‹ã€‚</p><p>åå°è¿›ç¨‹ä¸ä¼šç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥å½“å†…å­˜ä¸è¶³æ—¶ï¼Œä¼šä¼˜å…ˆæ€æ­»åå°è¿›ç¨‹ä»¥ç©ºå‡ºå†…å­˜ç»™å‰å°ã€å¯è§ã€æœåŠ¡è¿›ç¨‹ä½¿ç”¨ã€‚</p><p>ä¸€èˆ¬åœ°ï¼Œä¼šæœ‰å¾ˆå¤šåå°è¿›ç¨‹åŒæ—¶è¿è¡Œç€ï¼Œå› æ­¤ï¼Œç³»ç»Ÿå°†æ‰€æœ‰çš„åå°è¿›ç¨‹ä¿å­˜åœ¨ä¸€ä¸ªå®ç°äº† <code>LRU</code>ï¼ˆ<code>least recently used</code>ï¼‰ç®—æ³•çš„å®¹å™¨ä¸­ï¼Œä»¥ç¡®ä¿æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„åå°è¿›ç¨‹å…ˆè¢«æ€æ­»ã€‚</p><h4 id="_5-2-5-ç©ºè¿›ç¨‹-empty-process" tabindex="-1"><a class="header-anchor" href="#_5-2-5-ç©ºè¿›ç¨‹-empty-process" aria-hidden="true">#</a> 5.2.5 ç©ºè¿›ç¨‹ï¼ˆ<code>Empty Process</code>ï¼‰</h4><p>è‹¥ <code>App</code> ä¸­æ²¡æœ‰ç»„ä»¶æ­£åœ¨è¿è¡Œï¼Œåˆ™ <code>App</code> è¿›ç¨‹æ˜¯ä¸€ä¸ªç©ºè¿›ç¨‹ã€‚</p><p>ç©ºè¿›ç¨‹å­˜åœ¨çš„æ„æ€åœ¨äºï¼šä½œä¸ºä¸€ä¸ª <code>cache</code> ä»¥æé«˜ä¸‹æ¬¡å¯åŠ¨ç»„ä»¶çš„é€Ÿåº¦ã€‚</p><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zengkaiqiang562/JavaGuide/edit/main/docs/zkq/android/basic/activity.md" rel="noopener noreferrer" target="_blank" arialabel="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/7/6 18:07:29</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: zengkaiqiang562@163.com">zengk</span><!--]--><!--]--></div></footer><nav class="page-nav"><!----><a href="/zkq/android/basic/fragment.html" class="nav-link next" arialabel="Fragmentï¼ˆTODOï¼‰"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">Fragmentï¼ˆTODOï¼‰<!----></div></a></nav><!----><!----></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright Â© 2023 Zenk562</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.625aa393.js" defer></script>
  </body>
</html>
