<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zengkaiqiang562.github.io/zkq/gradle/_05_project.html"><meta property="og:site_name" content="Android Guide"><meta property="og:title" content="Project详解与实战"><meta property="og:type" content="article"><meta property="og:image" content="https://zengkaiqiang562.github.io/"><meta property="og:updated_time" content="2022-11-13T15:38:57.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Project详解与实战"><meta property="article:tag" content="gradle"><meta property="article:modified_time" content="2022-11-13T15:38:57.000Z"><script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?5dd2e8c97962d57b7b8fea1737c01743";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2922463_99aa80ii7cf.css"><title>Project详解与实战 | Android Guide</title><meta name="description" content="Android 学习 && 面试指南">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.5a38b724.css">
    <link rel="modulepreload" href="/assets/app.625aa393.js"><link rel="modulepreload" href="/assets/_05_project.html.8f389b3c.js"><link rel="modulepreload" href="/assets/_05_project.html.b920dac4.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.png" alt="Android Guide"><!----><span class="site-name hide-in-pad">Android Guide</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" arialabel="面试指南"><i class="icon iconfont icon-java"></i>面试指南<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zhuanlan/" class="nav-link" arialabel="优质专栏"><i class="icon iconfont icon-recommend"></i>优质专栏<!----></a></div><div class="nav-item hide-in-mobile"><a href="/open-source-project/" class="nav-link" arialabel="项目精选"><i class="icon iconfont icon-github"></i>项目精选<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://snailclimb.gitee.io/javaguide/#/" rel="noopener noreferrer" target="_blank" arialabel="旧版链接" class="nav-link"><i class="icon iconfont icon-java"></i>旧版链接<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="https://javaguide.cn/feed.json" rel="noopener noreferrer" target="_blank" arialabel="RSS订阅" class="nav-link"><i class="icon iconfont icon-rss"></i>RSS订阅<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/about-the-author/" class="nav-link" arialabel="关于作者"><i class="icon iconfont icon-zuozhe"></i>关于作者<!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/zengkaiqiang562/JavaGuide" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" arialabelledby="auto" style="display:block;"><title id="auto" lang="en">auto icon</title><g fill="currentColor"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" arialabelledby="dark" style="display:none;"><title id="dark" lang="en">dark icon</title><g fill="currentColor"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" arialabelledby="light" style="display:none;"><title id="light" lang="en">light icon</title><g fill="currentColor"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></g></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zkq/gradle/_01_introduce.html" class="nav-link sidebar-link sidebar-page" arialabel="Gradle相关介绍"><!---->Gradle相关介绍<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Gradle核心语法</span><span class="arrow right"></span></button><!--[--><!----><!----><!--]--></section><!--]--></li><li><!--[--><a href="/zkq/gradle/_03_advance.html" class="nav-link sidebar-link sidebar-page" arialabel="Gradle高级用法实战"><!---->Gradle高级用法实战<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/gradle/_04_lifecycle.html" class="nav-link sidebar-link sidebar-page" arialabel="Gradle生命周期探索"><!---->Gradle生命周期探索<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zkq/gradle/_05_project.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="Project详解与实战"><!---->Project详解与实战<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-project-概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1. Project 概述"><!---->1. Project 概述<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-1-每个-module-都是一个-project-子-project" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.1 每个 Module 都是一个 Project（子 Project）"><!---->1.1 每个 Module 都是一个 Project（子 Project）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-2-遍历-android-项目中的所有-project-gradlew-projects" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2 遍历 Android 项目中的所有 Project：gradlew projects"><!---->1.2 遍历 Android 项目中的所有 Project：gradlew projects<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-3-一个-build-gradle-文件表示一个-project" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3 一个 build.gradle 文件表示一个 Project"><!---->1.3 一个 build.gradle 文件表示一个 Project<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-4-根-project-的作用-管理子-project" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.4 根 Project 的作用：管理子 Project"><!---->1.4 根 Project 的作用：管理子 Project<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-5-子-project-的作用-生成构建产物" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.5 子 Project 的作用：生成构建产物"><!---->1.5 子 Project 的作用：生成构建产物<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-project-的-api-组成" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2. Project 的 API 组成"><!---->2. Project 的 API 组成<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-1-gradle-生命周期-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.1 Gradle 生命周期 API"><!---->2.1 Gradle 生命周期 API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-project-相关的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2 Project 相关的 API"><!---->2.2 Project 相关的 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-1-build-gradle-文件中编写的代码相当于-project-类中的代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.1 build.gradle 文件中编写的代码相当于 Project 类中的代码"><!---->2.2.1 build.gradle 文件中编写的代码相当于 Project 类中的代码<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-2-build-gradle-文件中编写的代码都是在配置阶段执行" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.2 build.gradle 文件中编写的代码都是在配置阶段执行"><!---->2.2.2 build.gradle 文件中编写的代码都是在配置阶段执行<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-project-类提供的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3 Project 类提供的 API"><!---->2.2.3 Project 类提供的 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-1-获取所有-project-getallprojects" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3.1 获取所有 Project：getAllprojects()"><!---->2.2.3.1 获取所有 Project：getAllprojects()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-2-获取所有子-project-getsubprojects" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3.2 获取所有子 Project：getSubprojects()"><!---->2.2.3.2 获取所有子 Project：getSubprojects()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-3-获取父-project-getparent" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3.3 获取父 Project：getParent()"><!---->2.2.3.3 获取父 Project：getParent()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-4-获取根-project-getrootproject" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3.4 获取根 Project：getRootProject()"><!---->2.2.3.4 获取根 Project：getRootProject()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-5-获取指定-project-并对其进行配置-project-path-closure" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3.5 获取指定 Project 并对其进行配置：project(path, closure)"><!---->2.2.3.5 获取指定 Project 并对其进行配置：project(path, closure)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-6-遍历所有-project-并进行配置-allprojects-closure" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3.6 遍历所有 Project 并进行配置：allprojects(closure)"><!---->2.2.3.6 遍历所有 Project 并进行配置：allprojects(closure)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-7-遍历所有子-project-并进行配置-subprojects-closure" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2.3.7 遍历所有子 Project 并进行配置：subprojects(closure)"><!---->2.2.3.7 遍历所有子 Project 并进行配置：subprojects(closure)<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-3-task-相关的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.3 Task 相关的 API"><!---->2.3 Task 相关的 API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-属性相关的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4 属性相关的 API"><!---->2.4 属性相关的 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-project-类默认提供的属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.1 Project 类默认提供的属性"><!---->2.4.1 Project 类默认提供的属性<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-1-default-build-file" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.1.1 DEFAULT_BUILD_FILE"><!---->2.4.1.1 DEFAULT_BUILD_FILE<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-2-path-separator" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.1.2 PATH_SEPARATOR"><!---->2.4.1.2 PATH_SEPARATOR<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-3-default-build-dir-name" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.1.3 DEFAULT_BUILD_DIR_NAME"><!---->2.4.1.3 DEFAULT_BUILD_DIR_NAME<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-4-gradle-properties" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.1.4 GRADLE_PROPERTIES"><!---->2.4.1.4 GRADLE_PROPERTIES<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-2-分析-ext-扩展属性的内部实现" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.2 分析 ext 扩展属性的内部实现"><!---->2.4.2 分析 ext 扩展属性的内部实现<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-3-为-project-扩展新的属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.3 为 Project 扩展新的属性"><!---->2.4.3 为 Project 扩展新的属性<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-4-扩展属性的实际案例-引入外部文件-ext-gradle-中的扩展属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.4 扩展属性的实际案例：引入外部文件 ext.gradle 中的扩展属性"><!---->2.4.4 扩展属性的实际案例：引入外部文件 ext.gradle 中的扩展属性<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-5-在-gradle-properties-文件中定义扩展属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.5 在 gradle.properties 文件中定义扩展属性"><!---->2.4.5 在 gradle.properties 文件中定义扩展属性<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-6-分析-setting-gradle-文件的内部实现" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4.6 分析 setting.gradle 文件的内部实现"><!---->2.4.6 分析 setting.gradle 文件的内部实现<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-文件-file-相关的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5 文件（file）相关的 API"><!---->2.5 文件（file）相关的 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-project-类提供的获取路径相关的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.1 Project 类提供的获取路径相关的 API"><!---->2.5.1 Project 类提供的获取路径相关的 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-1-获取表示根-project-文件夹-getrootdir" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.1.1 获取表示根 Project 文件夹：getRootDir()"><!---->2.5.1.1 获取表示根 Project 文件夹：getRootDir()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-2-获取表示当前-project-的-build-文件夹-getbuilddir" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.1.2 获取表示当前 Project 的 build 文件夹：getBuildDir()"><!---->2.5.1.2 获取表示当前 Project 的 build 文件夹：getBuildDir()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-3-获取表示当前-project-的文件夹-getprojectdir" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.1.3 获取表示当前 Project 的文件夹：getProjectDir()"><!---->2.5.1.3 获取表示当前 Project 的文件夹：getProjectDir()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-3-示例代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.1.3 示例代码"><!---->2.5.1.3 示例代码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-project-类提供的文件操作相关的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.2 Project 类提供的文件操作相关的 API"><!---->2.5.2 Project 类提供的文件操作相关的 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-1-获取相对于当前-project-的某个-path-路径-file-path" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.2.1 获取相对于当前 Project 的某个 path 路径：file(path)"><!---->2.5.2.1 获取相对于当前 Project 的某个 path 路径：file(path)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-2-获取相对于当前-project-的某些-path-路径-files-paths" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.2.2 获取相对于当前 Project 的某些 path 路径：files(paths)"><!---->2.5.2.2 获取相对于当前 Project 的某些 path 路径：files(paths)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-3-示例代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.2.3 示例代码"><!---->2.5.2.3 示例代码<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-4-文件拷贝-copy-closure" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.2.4 文件拷贝：copy(closure)"><!---->2.5.2.4 文件拷贝：copy(closure)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-5-示例代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.2.5 示例代码"><!---->2.5.2.5 示例代码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-project-类提供的文件树的操作" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3 Project 类提供的文件树的操作"><!---->2.5.3 Project 类提供的文件树的操作<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-1-什么是文件树" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3.1 什么是文件树"><!---->2.5.3.1 什么是文件树<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-文件树-configurablefiletree-提供的常用-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3.2 文件树 ConfigurableFileTree 提供的常用 API"><!---->2.5.3.2 文件树 ConfigurableFileTree 提供的常用 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-1-设置文件树的根节点-setdir-dir" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3.2.1 设置文件树的根节点：setDir(dir)"><!---->2.5.3.2.1 设置文件树的根节点：setDir(dir)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-2-设置文件树中需要排除的文件-setexcludes-excludes" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3.2.2 设置文件树中需要排除的文件：setExcludes(excludes)"><!---->2.5.3.2.2 设置文件树中需要排除的文件：setExcludes(excludes)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-3-设置文件树中需要导入的文件-setincludes-includes" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3.2.3 设置文件树中需要导入的文件：setIncludes(includes)"><!---->2.5.3.2.3 设置文件树中需要导入的文件：setIncludes(includes)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-4-遍历文件树-visit-closure" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3.2.4 遍历文件树：visit(closure)"><!---->2.5.3.2.4 遍历文件树：visit(closure)<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-3-构建文件树-filetree" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3.3 构建文件树：fileTree"><!---->2.5.3.3 构建文件树：fileTree<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-4-示例代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5.3.4 示例代码"><!---->2.5.3.4 示例代码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-依赖相关的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6 依赖相关的 API"><!---->2.6 依赖相关的 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-配置依赖仓库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1 配置依赖仓库"><!---->2.6.1 配置依赖仓库<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-1-配置-gradle-插件的依赖仓库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.1 配置 Gradle 插件的依赖仓库"><!---->2.6.1.1 配置 Gradle 插件的依赖仓库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-2-配置第三方库的依赖仓库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.2 配置第三方库的依赖仓库"><!---->2.6.1.2 配置第三方库的依赖仓库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-repositoryhandler-类提供的配置依赖仓库的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.3 RepositoryHandler 类提供的配置依赖仓库的 API"><!---->2.6.1.3 RepositoryHandler 类提供的配置依赖仓库的 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-1-配置本地仓库-flatdir-closure" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.3.1 配置本地仓库：flatDir(closure)"><!---->2.6.1.3.1 配置本地仓库：flatDir(closure)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-2-配置-maven-仓库-maven-closure" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.3.2 配置 maven 仓库：maven(closure)"><!---->2.6.1.3.2 配置 maven 仓库：maven(closure)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-3-配置-mavencentral-仓库-mavencentral" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.3.3 配置 mavenCentral  仓库：mavenCentral()"><!---->2.6.1.3.3 配置 mavenCentral  仓库：mavenCentral()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-4-配置本地maven仓库-mavenlocal" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.3.4 配置本地maven仓库 ：mavenLocal()"><!---->2.6.1.3.4 配置本地maven仓库 ：mavenLocal()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-5-配置-jcenter仓库-jcenter" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.3.5 配置 jcenter仓库：jcenter()"><!---->2.6.1.3.5 配置 jcenter仓库：jcenter()<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-4-示例代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.1.4 示例代码"><!---->2.6.1.4 示例代码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-2-配置依赖的-gradle-插件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.2 配置依赖的 Gradle 插件"><!---->2.6.2 配置依赖的 Gradle 插件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-配置依赖的第三方库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3 配置依赖的第三方库"><!---->2.6.3 配置依赖的第三方库<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-1-导入依赖仓库中的第三方库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3.1 导入依赖仓库中的第三方库"><!---->2.6.3.1 导入依赖仓库中的第三方库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-2-导入-1-个或多个本地-jar-文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3.2 导入 1 个或多个本地 jar 文件"><!---->2.6.3.2 导入 1 个或多个本地 jar 文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-3-导入当前-project-下的以-libs-为根节点的文件树" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3.3 导入当前 Project 下的以 libs 为根节点的文件树"><!---->2.6.3.3 导入当前 Project 下的以 libs 为根节点的文件树<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-4-排除-group-name-version-内部的依赖" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3.4 排除 &#39;group:name:version&#39; 内部的依赖"><!---->2.6.3.4 排除 &#39;group:name:version&#39; 内部的依赖<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-5-依赖本地的子-project" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3.5 依赖本地的子 Project"><!---->2.6.3.5 依赖本地的子 Project<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-6-导入当前-project-的-libs-文件夹下的-aar-库文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3.6 导入当前 Project 的 libs 文件夹下的 aar 库文件"><!---->2.6.3.6 导入当前 Project 的 libs 文件夹下的 aar 库文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-7-占位编译配置-provided" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3.7 占位编译配置 provided"><!---->2.6.3.7 占位编译配置 provided<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-8-示例代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6.3.8 示例代码"><!---->2.6.3.8 示例代码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-7-外部命令执行相关的-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7 外部命令执行相关的 API"><!---->2.7 外部命令执行相关的 API<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/zkq/gradle/_06_task.html" class="nav-link sidebar-link sidebar-page" arialabel="Task详解与实战"><!---->Task详解与实战<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/gradle/_07_settings_sourcesets.html" class="nav-link sidebar-link sidebar-page" arialabel="Settings类 &amp; SourceSets类"><!---->Settings类 &amp; SourceSets类<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/gradle/_08_plugin.html" class="nav-link sidebar-link sidebar-page" arialabel="Plugin插件"><!---->Plugin插件<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/gradle/_09_other.html" class="nav-link sidebar-link sidebar-page" arialabel="其他"><!---->其他<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Project详解与实战</h1><div class="article-info"><span class="author-info" arialabel="作者🖊" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://zengkaiqiang562.github.io/" target="_blank" rel="noopener noreferrer">Zenk562</a></span><span property="author" content="Zenk562"></span></span><span class="category-info" arialabel="分类🌈" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" arialabelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category clickable" role="navigation">gradle</li><meta property="articleSection" content="gradle"></ul></span><span arialabel="标签🏷" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" arialabelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag clickable" role="navigation">gradle</li></ul><meta property="keywords" content="gradle"></span><span class="date-info" arialabel="写作日期📅" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年10月23日</span><meta property="datePublished" content="2022-10-23T14:49:16.000Z"></span><!----><span class="words-info" arialabel="字数🔠" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" arialabelledby="word"><title id="word" lang="en">word icon</title><g fill="currentColor"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></g></svg><span>约 6712 字</span><meta property="wordCount" content="6712"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-project-概述" class="router-link-active router-link-exact-active toc-link level2">1. Project 概述</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-1-每个-module-都是一个-project-子-project" class="router-link-active router-link-exact-active toc-link level3">1.1 每个 Module 都是一个 Project（子 Project）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-2-遍历-android-项目中的所有-project-gradlew-projects" class="router-link-active router-link-exact-active toc-link level3">1.2 遍历 Android 项目中的所有 Project：gradlew projects</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-3-一个-build-gradle-文件表示一个-project" class="router-link-active router-link-exact-active toc-link level3">1.3 一个 build.gradle 文件表示一个 Project</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-4-根-project-的作用-管理子-project" class="router-link-active router-link-exact-active toc-link level3">1.4 根 Project 的作用：管理子 Project</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_1-5-子-project-的作用-生成构建产物" class="router-link-active router-link-exact-active toc-link level3">1.5 子 Project 的作用：生成构建产物</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-project-的-api-组成" class="router-link-active router-link-exact-active toc-link level2">2. Project 的 API 组成</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-1-gradle-生命周期-api" class="router-link-active router-link-exact-active toc-link level3">2.1 Gradle 生命周期 API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-project-相关的-api" class="router-link-active router-link-exact-active toc-link level3">2.2 Project 相关的 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-1-build-gradle-文件中编写的代码相当于-project-类中的代码" class="router-link-active router-link-exact-active toc-link level4">2.2.1 build.gradle 文件中编写的代码相当于 Project 类中的代码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-2-build-gradle-文件中编写的代码都是在配置阶段执行" class="router-link-active router-link-exact-active toc-link level4">2.2.2 build.gradle 文件中编写的代码都是在配置阶段执行</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-project-类提供的-api" class="router-link-active router-link-exact-active toc-link level4">2.2.3 Project 类提供的 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-1-获取所有-project-getallprojects" class="router-link-active router-link-exact-active toc-link level5">2.2.3.1 获取所有 Project：getAllprojects()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-2-获取所有子-project-getsubprojects" class="router-link-active router-link-exact-active toc-link level5">2.2.3.2 获取所有子 Project：getSubprojects()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-3-获取父-project-getparent" class="router-link-active router-link-exact-active toc-link level5">2.2.3.3 获取父 Project：getParent()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-4-获取根-project-getrootproject" class="router-link-active router-link-exact-active toc-link level5">2.2.3.4 获取根 Project：getRootProject()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-5-获取指定-project-并对其进行配置-project-path-closure" class="router-link-active router-link-exact-active toc-link level5">2.2.3.5 获取指定 Project 并对其进行配置：project(path, closure)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-6-遍历所有-project-并进行配置-allprojects-closure" class="router-link-active router-link-exact-active toc-link level5">2.2.3.6 遍历所有 Project 并进行配置：allprojects(closure)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-2-3-7-遍历所有子-project-并进行配置-subprojects-closure" class="router-link-active router-link-exact-active toc-link level5">2.2.3.7 遍历所有子 Project 并进行配置：subprojects(closure)</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-3-task-相关的-api" class="router-link-active router-link-exact-active toc-link level3">2.3 Task 相关的 API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-属性相关的-api" class="router-link-active router-link-exact-active toc-link level3">2.4 属性相关的 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-project-类默认提供的属性" class="router-link-active router-link-exact-active toc-link level4">2.4.1 Project 类默认提供的属性</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-1-default-build-file" class="router-link-active router-link-exact-active toc-link level5">2.4.1.1 DEFAULT_BUILD_FILE</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-2-path-separator" class="router-link-active router-link-exact-active toc-link level5">2.4.1.2 PATH_SEPARATOR</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-3-default-build-dir-name" class="router-link-active router-link-exact-active toc-link level5">2.4.1.3 DEFAULT_BUILD_DIR_NAME</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-1-4-gradle-properties" class="router-link-active router-link-exact-active toc-link level5">2.4.1.4 GRADLE_PROPERTIES</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-2-分析-ext-扩展属性的内部实现" class="router-link-active router-link-exact-active toc-link level4">2.4.2 分析 ext 扩展属性的内部实现</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-3-为-project-扩展新的属性" class="router-link-active router-link-exact-active toc-link level4">2.4.3 为 Project 扩展新的属性</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-4-扩展属性的实际案例-引入外部文件-ext-gradle-中的扩展属性" class="router-link-active router-link-exact-active toc-link level4">2.4.4 扩展属性的实际案例：引入外部文件 ext.gradle 中的扩展属性</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-5-在-gradle-properties-文件中定义扩展属性" class="router-link-active router-link-exact-active toc-link level4">2.4.5 在 gradle.properties 文件中定义扩展属性</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-4-6-分析-setting-gradle-文件的内部实现" class="router-link-active router-link-exact-active toc-link level4">2.4.6 分析 setting.gradle 文件的内部实现</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-文件-file-相关的-api" class="router-link-active router-link-exact-active toc-link level3">2.5 文件（file）相关的 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-project-类提供的获取路径相关的-api" class="router-link-active router-link-exact-active toc-link level4">2.5.1 Project 类提供的获取路径相关的 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-1-获取表示根-project-文件夹-getrootdir" class="router-link-active router-link-exact-active toc-link level5">2.5.1.1 获取表示根 Project 文件夹：getRootDir()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-2-获取表示当前-project-的-build-文件夹-getbuilddir" class="router-link-active router-link-exact-active toc-link level5">2.5.1.2 获取表示当前 Project 的 build 文件夹：getBuildDir()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-3-获取表示当前-project-的文件夹-getprojectdir" class="router-link-active router-link-exact-active toc-link level5">2.5.1.3 获取表示当前 Project 的文件夹：getProjectDir()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-1-3-示例代码" class="router-link-active router-link-exact-active toc-link level5">2.5.1.3 示例代码</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-project-类提供的文件操作相关的-api" class="router-link-active router-link-exact-active toc-link level4">2.5.2 Project 类提供的文件操作相关的 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-1-获取相对于当前-project-的某个-path-路径-file-path" class="router-link-active router-link-exact-active toc-link level5">2.5.2.1 获取相对于当前 Project 的某个 path 路径：file(path)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-2-获取相对于当前-project-的某些-path-路径-files-paths" class="router-link-active router-link-exact-active toc-link level5">2.5.2.2 获取相对于当前 Project 的某些 path 路径：files(paths)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-3-示例代码" class="router-link-active router-link-exact-active toc-link level5">2.5.2.3 示例代码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-4-文件拷贝-copy-closure" class="router-link-active router-link-exact-active toc-link level5">2.5.2.4 文件拷贝：copy(closure)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-2-5-示例代码" class="router-link-active router-link-exact-active toc-link level5">2.5.2.5 示例代码</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-project-类提供的文件树的操作" class="router-link-active router-link-exact-active toc-link level4">2.5.3 Project 类提供的文件树的操作</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-1-什么是文件树" class="router-link-active router-link-exact-active toc-link level5">2.5.3.1 什么是文件树</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-文件树-configurablefiletree-提供的常用-api" class="router-link-active router-link-exact-active toc-link level5">2.5.3.2 文件树 ConfigurableFileTree 提供的常用 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-1-设置文件树的根节点-setdir-dir" class="router-link-active router-link-exact-active toc-link level6">2.5.3.2.1 设置文件树的根节点：setDir(dir)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-2-设置文件树中需要排除的文件-setexcludes-excludes" class="router-link-active router-link-exact-active toc-link level6">2.5.3.2.2 设置文件树中需要排除的文件：setExcludes(excludes)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-3-设置文件树中需要导入的文件-setincludes-includes" class="router-link-active router-link-exact-active toc-link level6">2.5.3.2.3 设置文件树中需要导入的文件：setIncludes(includes)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-2-4-遍历文件树-visit-closure" class="router-link-active router-link-exact-active toc-link level6">2.5.3.2.4 遍历文件树：visit(closure)</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-3-构建文件树-filetree" class="router-link-active router-link-exact-active toc-link level5">2.5.3.3 构建文件树：fileTree</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-5-3-4-示例代码" class="router-link-active router-link-exact-active toc-link level5">2.5.3.4 示例代码</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-依赖相关的-api" class="router-link-active router-link-exact-active toc-link level3">2.6 依赖相关的 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-配置依赖仓库" class="router-link-active router-link-exact-active toc-link level4">2.6.1 配置依赖仓库</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-1-配置-gradle-插件的依赖仓库" class="router-link-active router-link-exact-active toc-link level5">2.6.1.1 配置 Gradle 插件的依赖仓库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-2-配置第三方库的依赖仓库" class="router-link-active router-link-exact-active toc-link level5">2.6.1.2 配置第三方库的依赖仓库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-repositoryhandler-类提供的配置依赖仓库的-api" class="router-link-active router-link-exact-active toc-link level5">2.6.1.3 RepositoryHandler 类提供的配置依赖仓库的 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-1-配置本地仓库-flatdir-closure" class="router-link-active router-link-exact-active toc-link level6">2.6.1.3.1 配置本地仓库：flatDir(closure)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-2-配置-maven-仓库-maven-closure" class="router-link-active router-link-exact-active toc-link level6">2.6.1.3.2 配置 maven 仓库：maven(closure)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-3-配置-mavencentral-仓库-mavencentral" class="router-link-active router-link-exact-active toc-link level6">2.6.1.3.3 配置 mavenCentral  仓库：mavenCentral()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-4-配置本地maven仓库-mavenlocal" class="router-link-active router-link-exact-active toc-link level6">2.6.1.3.4 配置本地maven仓库 ：mavenLocal()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-3-5-配置-jcenter仓库-jcenter" class="router-link-active router-link-exact-active toc-link level6">2.6.1.3.5 配置 jcenter仓库：jcenter()</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-1-4-示例代码" class="router-link-active router-link-exact-active toc-link level5">2.6.1.4 示例代码</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-2-配置依赖的-gradle-插件" class="router-link-active router-link-exact-active toc-link level4">2.6.2 配置依赖的 Gradle 插件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-配置依赖的第三方库" class="router-link-active router-link-exact-active toc-link level4">2.6.3 配置依赖的第三方库</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-1-导入依赖仓库中的第三方库" class="router-link-active router-link-exact-active toc-link level5">2.6.3.1 导入依赖仓库中的第三方库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-2-导入-1-个或多个本地-jar-文件" class="router-link-active router-link-exact-active toc-link level5">2.6.3.2 导入 1 个或多个本地 jar 文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-3-导入当前-project-下的以-libs-为根节点的文件树" class="router-link-active router-link-exact-active toc-link level5">2.6.3.3 导入当前 Project 下的以 libs 为根节点的文件树</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-4-排除-group-name-version-内部的依赖" class="router-link-active router-link-exact-active toc-link level5">2.6.3.4 排除 &#39;group:name:version&#39; 内部的依赖</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-5-依赖本地的子-project" class="router-link-active router-link-exact-active toc-link level5">2.6.3.5 依赖本地的子 Project</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-6-导入当前-project-的-libs-文件夹下的-aar-库文件" class="router-link-active router-link-exact-active toc-link level5">2.6.3.6 导入当前 Project 的 libs 文件夹下的 aar 库文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-7-占位编译配置-provided" class="router-link-active router-link-exact-active toc-link level5">2.6.3.7 占位编译配置 provided</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-6-3-8-示例代码" class="router-link-active router-link-exact-active toc-link level5">2.6.3.8 示例代码</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/gradle/_05_project.html#_2-7-外部命令执行相关的-api" class="router-link-active router-link-exact-active toc-link level3">2.7 外部命令执行相关的 API</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h2 id="_1-project-概述" tabindex="-1"><a class="header-anchor" href="#_1-project-概述" aria-hidden="true">#</a> 1. <code>Project</code> 概述</h2><h3 id="_1-1-每个-module-都是一个-project-子-project" tabindex="-1"><a class="header-anchor" href="#_1-1-每个-module-都是一个-project-子-project" aria-hidden="true">#</a> 1.1 每个 <code>Module</code> 都是一个 <code>Project</code>（子 <code>Project</code>）</h3><p>一个通过 <code>Gradle</code> 构建的 <code>Android</code> 项目中，除了项目本身是一个 <code>Project</code>（根 <code>Project</code>）外，</p><p>项目中的每个 <code>Module</code> 也是一个 <code>Project</code>（子 <code>Project</code>）。</p><h3 id="_1-2-遍历-android-项目中的所有-project-gradlew-projects" tabindex="-1"><a class="header-anchor" href="#_1-2-遍历-android-项目中的所有-project-gradlew-projects" aria-hidden="true">#</a> 1.2 遍历 <code>Android</code> 项目中的所有 <code>Project</code>：<code>gradlew projects</code></h3><p>执行命令 &quot;<code>gradlew projects</code>&quot;（其中 <code>projects</code> 是一个 <code>Task</code> 的名称）可以遍历出 <code>Android</code> 项目中的所有 <code>Project</code>。</p><p><img src="/assets/01.f25d2298.png" alt="" loading="lazy"></p><h3 id="_1-3-一个-build-gradle-文件表示一个-project" tabindex="-1"><a class="header-anchor" href="#_1-3-一个-build-gradle-文件表示一个-project" aria-hidden="true">#</a> 1.3 一个 <code>build.gradle</code> 文件表示一个 <code>Project</code></h3><p>每个 <code>Project</code> 中都包含有一个 <code>build.gradle</code> 文件。</p><p>如果删除了 <code>Project</code> 文件夹下的 <code>build.gradle</code> 文件，那么这个 <code>Project</code> 文件夹就是一个普通的文件夹，不会被识别为 <code>Project</code>。</p><p>也就是说，一个 <code>build.gradle</code> 文件表示一个 <code>Project</code>。</p><h3 id="_1-4-根-project-的作用-管理子-project" tabindex="-1"><a class="header-anchor" href="#_1-4-根-project-的作用-管理子-project" aria-hidden="true">#</a> 1.4 根 <code>Project</code> 的作用：管理子 <code>Project</code></h3><p>根 <code>Project</code> 的作用主要是用来管理子 <code>Project</code>。</p><h3 id="_1-5-子-project-的作用-生成构建产物" tabindex="-1"><a class="header-anchor" href="#_1-5-子-project-的作用-生成构建产物" aria-hidden="true">#</a> 1.5 子 <code>Project</code> 的作用：生成构建产物</h3><p>子 <code>Project</code> 的作用就是用来生成构建产物的，如：</p><ol><li><p><code>app</code> 模块作为子 <code>Project</code> 生成 <code>apk</code> 文件；</p></li><li><p>其他模块作为子 <code>Project</code> 生成 <code>aar</code> 库文件。</p></li></ol><h2 id="_2-project-的-api-组成" tabindex="-1"><a class="header-anchor" href="#_2-project-的-api-组成" aria-hidden="true">#</a> 2. <code>Project</code> 的 <code>API</code> 组成</h2><p><code>Project</code> 的 <code>API</code> 可以分为六大部分。</p><p><img src="/assets/02.78b1de1e.png" alt="" loading="lazy"></p><h3 id="_2-1-gradle-生命周期-api" tabindex="-1"><a class="header-anchor" href="#_2-1-gradle-生命周期-api" aria-hidden="true">#</a> 2.1 <code>Gradle</code> 生命周期 <code>API</code></h3><p>参考：<a href="/zkq/gradle/_04_lifecycle.html#_2-2-gradle-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E7%9B%91%E5%90%AC%E5%9B%9E%E8%B0%83" class="">Gradle 生命周期的监听回调</a></p><h3 id="_2-2-project-相关的-api" tabindex="-1"><a class="header-anchor" href="#_2-2-project-相关的-api" aria-hidden="true">#</a> 2.2 <code>Project</code> 相关的 <code>API</code></h3><p>提供了操作父 <code>Project</code>，管理子 <code>Project</code> 的功能。</p><h4 id="_2-2-1-build-gradle-文件中编写的代码相当于-project-类中的代码" tabindex="-1"><a class="header-anchor" href="#_2-2-1-build-gradle-文件中编写的代码相当于-project-类中的代码" aria-hidden="true">#</a> 2.2.1 <code>build.gradle</code> 文件中编写的代码相当于 <code>Project</code> 类中的代码</h4><p>在学习 <code>Groovy</code> 时，我们在 <code>Groovy</code> 脚本文件中编写的代码经过编译后会生成字节码文件。</p><p>字节码文件中 <code>Groovy</code> 脚本文件名做为一个类，继承自 <code>Script</code>。也就是说，在 <code>Groovy</code> 脚本文件中的代码其实就是在 <code>Script</code> 类中编写代码，可以访问到 <code>Script</code> 类的 <code>API</code>（如 <code>println</code> 方法就是 <code>Script</code> 类提供的）。</p><p>类似的，在 <code>Gradle</code> 中，<code>build.gradle</code> 文件也会经过编译生成字节码文件，<code>build.gradle</code> 文件中的代码其实就是在 <code>Project</code> 类中编写的代码。</p><p>也就是说，<strong>在 <code>build.gradle</code> 文件中可以访问到 <code>Project</code> 类的 <code>API</code></strong>。</p><h4 id="_2-2-2-build-gradle-文件中编写的代码都是在配置阶段执行" tabindex="-1"><a class="header-anchor" href="#_2-2-2-build-gradle-文件中编写的代码都是在配置阶段执行" aria-hidden="true">#</a> 2.2.2 <code>build.gradle </code>文件中编写的代码都是在配置阶段执行</h4><p>所有在 <code>build.gradle</code> 文件中编写的代码，都是在配置阶段执行的。</p><blockquote><p>如何使代码在执行阶段执行，在讲解 <code>Task</code> 时进行讲解。</p></blockquote><h4 id="_2-2-3-project-类提供的-api" tabindex="-1"><a class="header-anchor" href="#_2-2-3-project-类提供的-api" aria-hidden="true">#</a> 2.2.3 <code>Project</code> 类提供的 <code>API</code></h4><h5 id="_2-2-3-1-获取所有-project-getallprojects" tabindex="-1"><a class="header-anchor" href="#_2-2-3-1-获取所有-project-getallprojects" aria-hidden="true">#</a> 2.2.3.1 获取所有 <code>Project</code>：<code>getAllprojects()</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>Set<span class="token operator">&lt;</span>Project<span class="token operator">&gt;</span> <span class="token function">getAllprojects</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>遍历项目中的所有 Project（包括根 Project 和各个子 Project）
</code></pre></div><p><img src="/assets/03.08a50805.png" alt="" loading="lazy"></p><h5 id="_2-2-3-2-获取所有子-project-getsubprojects" tabindex="-1"><a class="header-anchor" href="#_2-2-3-2-获取所有子-project-getsubprojects" aria-hidden="true">#</a> 2.2.3.2 获取所有子 <code>Project</code>：<code>getSubprojects()</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>Set<span class="token operator">&lt;</span>Project<span class="token operator">&gt;</span> <span class="token function">getSubprojects</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>遍历调用该方法的 build.gradle 所对应的 Project 下的所有子 Project
</code></pre></div><p><img src="/assets/04.aca80509.png" alt="" loading="lazy"></p><h5 id="_2-2-3-3-获取父-project-getparent" tabindex="-1"><a class="header-anchor" href="#_2-2-3-3-获取父-project-getparent" aria-hidden="true">#</a> 2.2.3.3 获取父 <code>Project</code>：<code>getParent()</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>Project <span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>返回调用该方法的 build.gradle 所对应的 Project 的父 Project。
如果 build.gradle 所对应的 Project 是根 Project，那么该方法返回 null。
</code></pre></div><p><img src="/assets/05.c192d4ed.png" alt="" loading="lazy"></p><h5 id="_2-2-3-4-获取根-project-getrootproject" tabindex="-1"><a class="header-anchor" href="#_2-2-3-4-获取根-project-getrootproject" aria-hidden="true">#</a> 2.2.3.4 获取根 <code>Project</code>：<code>getRootProject()</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>Project <span class="token function">getRootProject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>返回项目的根 Project，不管在哪个 build.gradle 中调用，都不会返回 null。
</code></pre></div><p><img src="/assets/06.34f4821f.png" alt="" loading="lazy"></p><h5 id="_2-2-3-5-获取指定-project-并对其进行配置-project-path-closure" tabindex="-1"><a class="header-anchor" href="#_2-2-3-5-获取指定-project-并对其进行配置-project-path-closure" aria-hidden="true">#</a> 2.2.3.5 获取指定 <code>Project</code> 并对其进行配置：<code>project(path, closure)</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>Project <span class="token function">project</span><span class="token punctuation">(</span>String path<span class="token punctuation">,</span> Closure configureClosure<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>1. 参数 path 用来指定一个 Project，当 path 为相对路径时，表示调用该方法的 build.gradle 所对应的 Project 目录下的相对路径。即：
    如果在根 Project 的 build.gradle 中调用 project(&#39;app&#39;) {...}
    那么 &#39;app&#39; 表示 &quot;./app/&quot;，而 &quot;./app/&quot; 文件夹表示子 Project(app)。

2. 参数闭包 configureClosure 作用是用来对参数 path 指定的 Project 进行配置，需注意：
    1. 闭包的参数传入 path 指定的 Project 对象；
    2. 闭包的 delegate 属性指定的委托对象 也就是 path 指定的 Project 对象；
    3. 因为该闭包的委托策略 resolveStrategy=2，即 OWNER_ONLY，
       而闭包的 owner 属性指定的 Project 也就是 path 指定的 Project（但不是同一个对象）
       所以，在闭包中访问的属性和方法，就是在访问 path指定的Project 的属性和方法

3. 返回参数 path 指定的 Project。

4. 使用该 project(path.closure) 方法，可以在根 Project 的 build.gradle 中，实现对子 Project 的配置。
    但通常，我们不会以这种方式去处理对子 Project 的所有配置，还是应该以在子 Project 的 build.gradle 中配置为主。

5. Project project(String path) throws UnknownProjectException; // 该重载方法仅用于返回参数 path 指定的 Project
</code></pre></div><p><img src="/assets/07.03dd029e.png" alt="" loading="lazy"></p><h5 id="_2-2-3-6-遍历所有-project-并进行配置-allprojects-closure" tabindex="-1"><a class="header-anchor" href="#_2-2-3-6-遍历所有-project-并进行配置-allprojects-closure" aria-hidden="true">#</a> 2.2.3.6 遍历所有 <code>Project</code> 并进行配置：<code>allprojects(closure)</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token keyword">void</span> <span class="token function">allprojects</span><span class="token punctuation">(</span>Closure configureClosure<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>1. 作用：遍历当前 build.gradle 对应的 Project 下的所有子 Project（包含当前 build.gradle 对应的 Project）。

2. 参数闭包 configureClosure 接收一个 Project 类型的参数，表示当前遍历到的 Project。

3. project(path, closure) 方法是对参数 path 指定的 Project 进行配置处理
    allprojects(closure) 方法是对当前 Project 和当前 Project 下的所有子 Project 进行配置处理。

4. 因为在 allprojects 方法内部每次遍历调用该实参闭包时，闭包的委托策略都是 resolveStrategy=2，即 Closure.OWNER_ONLY，
    而每次遍历调用该实参闭包时，闭包的 owner 属性指定为当前遍历到的 Project，
    所以每次遍历调用该实参闭包时，在闭包中访问的属性和方法就是在访问当前遍历到的 Project 中的属性和方法。
</code></pre></div><p><img src="/assets/08.a6b1d83f.png" alt="" loading="lazy"></p><h5 id="_2-2-3-7-遍历所有子-project-并进行配置-subprojects-closure" tabindex="-1"><a class="header-anchor" href="#_2-2-3-7-遍历所有子-project-并进行配置-subprojects-closure" aria-hidden="true">#</a> 2.2.3.7 遍历所有子 <code>Project</code> 并进行配置：<code>subprojects(closure)</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token keyword">void</span> <span class="token function">subprojects</span><span class="token punctuation">(</span>Closure configureClosure<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>subprojects(closure) 和 allprojects(closure) 的唯一区别在于：
1. allprojects 会遍历到当前 build.gradle 对应的 Project；
2. subprojects 不会遍历到当前 build.gradle 对应的 Project。
</code></pre></div><p><img src="/assets/09.a6ac5bad.png" alt="" loading="lazy"></p><h3 id="_2-3-task-相关的-api" tabindex="-1"><a class="header-anchor" href="#_2-3-task-相关的-api" aria-hidden="true">#</a> 2.3 <code>Task</code> 相关的 <code>API</code></h3><p>提供了新增 <code>Task</code>，使用 <code>Project</code> 中已有 <code>Task</code> 的功能。</p><h3 id="_2-4-属性相关的-api" tabindex="-1"><a class="header-anchor" href="#_2-4-属性相关的-api" aria-hidden="true">#</a> 2.4 属性相关的 <code>API</code></h3><p>除了操作 <code>Gradle</code> 本身提供的属性外，还可以为 <code>Project</code> 添加新的属性。</p><h4 id="_2-4-1-project-类默认提供的属性" tabindex="-1"><a class="header-anchor" href="#_2-4-1-project-类默认提供的属性" aria-hidden="true">#</a> 2.4.1 <code>Project</code> 类默认提供的属性</h4><h5 id="_2-4-1-1-default-build-file" tabindex="-1"><a class="header-anchor" href="#_2-4-1-1-default-build-file" aria-hidden="true">#</a> 2.4.1.1 <code>DEFAULT_BUILD_FILE</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>String DEFAULT_BUILD_FILE <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">&quot;build.gradle&quot;</span></span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>该属性指定了 Project 的构建脚本文件名默认为 build.gradle
</code></pre></div><h5 id="_2-4-1-2-path-separator" tabindex="-1"><a class="header-anchor" href="#_2-4-1-2-path-separator" aria-hidden="true">#</a> 2.4.1.2 <code>PATH_SEPARATOR</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>String PATH_SEPARATOR <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">&quot;:&quot;</span></span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>该属性指定了 Project 路径名和 Task 路径名的层级分隔符为冒号 &quot;:&quot;
相当于普通文件系统中的路径分隔符 &quot;/&quot;
</code></pre></div><h5 id="_2-4-1-3-default-build-dir-name" tabindex="-1"><a class="header-anchor" href="#_2-4-1-3-default-build-dir-name" aria-hidden="true">#</a> 2.4.1.3 <code>DEFAULT_BUILD_DIR_NAME</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>String DEFAULT_BUILD_DIR_NAME <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">&quot;build&quot;</span></span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>该属性指定了对 Project 进行构建后输出目录为 build 目录。
即：对根 Project 和各个子 Project 进行构建后，都会在每个 Project 文件夹下生成一个 build 目录。
</code></pre></div><h5 id="_2-4-1-4-gradle-properties" tabindex="-1"><a class="header-anchor" href="#_2-4-1-4-gradle-properties" aria-hidden="true">#</a> 2.4.1.4 <code>GRADLE_PROPERTIES</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>String GRADLE_PROPERTIES <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">&quot;gradle.properties&quot;</span></span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>该属性指定了用于对 Gradle 的属性进行配置的默认文件为 gradle.properties
</code></pre></div><h4 id="_2-4-2-分析-ext-扩展属性的内部实现" tabindex="-1"><a class="header-anchor" href="#_2-4-2-分析-ext-扩展属性的内部实现" aria-hidden="true">#</a> 2.4.2 分析 <code>ext</code> 扩展属性的内部实现</h4><p><code>build.gradle</code> 文件对应的 <code>Project</code> 对象的类是 <code>DefaultProject</code> 子类：</p><div class="language-text ext-text"><pre class="language-text"><code>1. 是通过 org.gradle.testfixtures.internal.ProjectBuilderImpl 类提供的 createProject 和 createChildProject 方法动态创建出来的；
2. 是 org.gradle.api.internal.project.DefaultProject 的子类。

参考：
1. org.gradle.testfixtures.internal.ProjectBuilderImpl
2. org.gradle.api.internal.AsmBackedClassGenerator
   动态创建的 DefaultProject 子类就是在 AsmBackedClassGenerator 的静态内部类 ClassBuilderImpl 中完成的。
</code></pre></div><p>动态创建 <code>DefaultProject</code> 子类时会动态定义 <code>invokeMethod</code> 方法：</p><div class="language-text ext-text"><pre class="language-text"><code>1. invokeMethod 方法内部则是调用了 DefaultProject 的 getAsDynamicObject().invokeMethod 方法，即:

    public Object invokeMethod(String name, Object params) { 
        return getAsDynamicObject().invokeMethod(name, (Object[])params); 
    }

    参考：org.gradle.api.internal.AsmBackedClassGenerator.ClassBuilderImpl#addDynamicMethods

2. getAsDynamicObject() 方法返回的是一个 org.gradle.api.internal.ExtensibleDynamicObject 类对象

    ExtensibleDynamicObject 的继承结构图如下：
        DynamicObject
        --AbstractDynamicObject
        ----CompositeDynamicObject
        ------MixInClosurePropertiesAsMethodsDynamicObject
        --------ExtensibleDynamicObject    
</code></pre></div><p>也就是说，调用 <code>Project</code> 类的 <code>invokeMethod</code> 方法，其实就是在调用 <code>ExtensibleDynamicObject</code> 类的 <code>invokeMethod</code> 方法：</p><div class="language-text ext-text"><pre class="language-text"><code>ExtensibleDynamicObject 类提供的 invokeMethod 方法在父类 AbstractDynamicObject 中定义：

    @Override
    public Object invokeMethod(String name, Object... arguments) throws groovy.lang.MissingMethodException {
        DynamicInvokeResult result = tryInvokeMethod(name, arguments);
        if (result.isFound()) {
            return result.getValue();
        }
        throw methodMissingException(name, arguments);
    }
</code></pre></div><p>也就是说，调用 <code>ExtensibleDynamicObject</code> 类的 <code>invokeMethod</code> 方法，其实就是在调用 <code>tryInvokeMethod</code> 方法，其中：</p><div class="language-text ext-text"><pre class="language-text"><code>1. tryInvokeMethod 方法在 CompositeDynamicObject 和 MixInClosurePropertiesAsMethodsDynamicObject 中都进行了重写；
2. 在 CompositeDynamicObject 类重写的 tryInvokeMethod 方法中，会遍历 DynamicObject[] 数组，
   并调用每个 DynamicObject 类的 tryInvokeMethod 方法：

    @Override
    public DynamicInvokeResult tryInvokeMethod(String name, Object... arguments) {
        for (DynamicObject object : objects) {
            DynamicInvokeResult result = object.tryInvokeMethod(name, arguments);
            if (result.isFound()) {
                return result;
            }
        }
        return DynamicInvokeResult.notFound();
    }
</code></pre></div><p>也就是说，调用 <code>ExtensibleDynamicObject</code> 的 <code>tryInvokeMethod</code> 方法，其实就是在调用 <code>DynamicObject</code> 的 <code>tryInvokeMethod</code> 方法。</p><div class="language-text ext-text"><pre class="language-text"><code>其中，DynamicObject[] 数组 objects 会在 ExtensibleDynamicObject 类的构造方法中通过调用 updateDelegates() 方法进行设置。

在 ExtensibleDynamicObject.updateDelegates() 方法中，
会把 convention.getExtensionsAsDynamicObject() 返回的 DynamicObject 子类对象放到 objects 中。

在 ExtensibleDynamicObject 的构造方法中，成员属性 convention = new DefaultConvention(instantiator)，
也就是说，convention.getExtensionsAsDynamicObject() 返回的 DynamicObject 对象要在 DefaultConvention 类中找。

在 DefaultConvention 类中，有如下代码：

    public class DefaultConvention implements Convention, ExtensionContainerInternal {
        ...
        DefaultConvention.ExtensionsDynamicObject extensionsDynamicObject = new ExtensionsDynamicObject();
        ...
        @Override
        public DynamicObject getExtensionsAsDynamicObject() {
           return extensionsDynamicObject;
        }
        ...
        private class ExtensionsDynamicObject extends AbstractDynamicObject {
            ...
            @Override
            public DynamicInvokeResult tryInvokeMethod(String name, Object... args) {
                if (isConfigureExtensionMethod(name, args)) {
                    return DynamicInvokeResult.found(configureExtension(name, args));
                }
                ...
            }
        }
    } 

也就是说：
1. DefaultConvention.getExtensionsAsDynamicObject() 返回
   DynamicObject 的子类 DefaultConvention.ExtensionsDynamicObject 创建的对象；
2. DefaultConvention.ExtensionsDynamicObject 中重写了 tryInvokeMethod 方法。
</code></pre></div><p>也就是说，调用 <code>DynamicObject</code> 的 <code>tryInvokeMethod</code> 方法，其实就是在调用 <code>DefaultConvention.ExtensionsDynamicObject</code> 的 <code>tryInvokeMethod</code> 方法。</p><div class="language-text ext-text"><pre class="language-text"><code>在 DefaultConvention.ExtensionsDynamicObject.tryInvokeMethod 方法中，isConfigureExtensionMethod(name, args) 用于判断：
1. 名为 name 的方法的参数列表 args 是否只有一个 Closure 类型的闭包参数；
2. 名为 name 的方法是否已经注册到 DefaultConvention 的成员属性 extensionsStorage 中。

在 DefaultConvention 中有如下代码：

    public class DefaultConvention implements Convention, ExtensionContainerInternal {
        ...
        TypeOf&lt;ExtraPropertiesExtension&gt; EXTRA_PROPERTIES_EXTENSION_TYPE = typeOf(ExtraPropertiesExtension.class);
        ExtensionsStorage extensionsStorage = new ExtensionsStorage();
        ExtraPropertiesExtension extraProperties = new DefaultExtraPropertiesExtension();

        public DefaultConvention(Instantiator instantiator) {
            this.instantiator = instantiator;
            //其中，ExtraPropertiesExtension.EXTENSION_NAME = &quot;ext&quot;
            //即：add(EXTRA_PROPERTIES_EXTENSION_TYPE, &quot;ext&quot;, extraProperties)
            add(EXTRA_PROPERTIES_EXTENSION_TYPE, ExtraPropertiesExtension.EXTENSION_NAME, extraProperties);
        }

        @Override
        public &lt;T&gt; void add(TypeOf&lt;T&gt; publicType, String name, T extension) {
            extensionsStorage.add(publicType, name, extension);
        }
    }

也就是说，在 DefaultConvention 的构造方法中，就已经把方法 &quot;ext&quot; 注册到 DefaultConvention 的成员属性 extensionsStorage 中了。

注意：
在注册时，为方法 &quot;ext&quot; 绑定了一个 DefaultExtraPropertiesExtension 对象 extraProperties，
这个 extraProperties 对象，就是调用 ext(closure) 方法时，传给闭包 closure 的唯一参数。
</code></pre></div><p>在 <code>DefaultConvention.ExtensionsDynamicObject.tryInvokeMethod</code> 方法中调用的 <code>configureExtension(name, args)</code> 方法在 <code>DefaultConvention</code> 中的定义如下：</p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token keyword">private</span> Object <span class="token function">configureExtension</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Closure closure <span class="token operator">=</span> <span class="token punctuation">(</span>Closure<span class="token punctuation">)</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    Action<span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span> action <span class="token operator">=</span> ConfigureUtil<span class="token punctuation">.</span><span class="token function">configureUsing</span><span class="token punctuation">(</span>closure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> extensionsStorage<span class="token punctuation">.</span><span class="token function">configureExtension</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>其中：
1. ConfigureUtil.configureUsing 方法的作用就是将闭包 closure 封装在 Action 中；
2. ExtensionsStorage.configureExtension(name, action) 方法的作用就是：
    1. 执行 action.execute 方法（最终会调用闭包 closure）；
    2. 将注册方法 &quot;ext&quot; 时绑定的 extraProperties 对象作为 ext(closure) 方法中闭包 closure 的唯一参数；
    3. 创建 ConfigureDelegate 类型的委托对象作为闭包的 owner，并设置闭包的委托策略为 Closure.OWNER_ONLY。

注意：
ConfigureDelegate 委托对象其实也是一个代理，其内部封装了 _owner 和 _delegate 两个属性，
对于在 build.gradle 中调用的 ext(closure) 方法：
1. _owner = DynamicObjectUtil.asDynamicObject(closure.getOwner());
   因为 ext(closure) 在 build.gradle 中调用，所以 closure.getOwner() 返回 Project 对象，
   又因为 DefaultProject 实现了 DynamicObjectAware 接口，
   所以 DynamicObjectUtil.asDynamicObject(closure.getOwner()) 返回的是 DefaultProject.getAsDynamicObject()，
   也就是说，_owner 就是依赖了 DefaultConvention的ExtensibleDynamicObject 对象；

2. _delegate = DynamicObjectUtil.asDynamicObject(extraProperties);
   查看源码可知，_delegate 是一个封装了 extraProperties 的 BeanDynamicObject 对象。

ConfigureDelegate 内部的委托流程就是：
先使用 _delegate 处理闭包 closure 中的属性和方法，_delegate 处理不了的，再使用 _owner 处理。

也就是说，ext(closure) 方法调用时，闭包 closure 中可以直接访问 BeanDynamicObject 和 ExtensibleDynamicObject 中的属性和方法。
</code></pre></div><p><strong>综上得出如下结论：</strong></p><div class="language-text ext-text"><pre class="language-text"><code>在 build.gradle 中编写 ext{...} ，就是调用动态生成的 Project 子类中的 invokeMethod 方法来执行未定义的 ext(closure) 方法，其中：
1. 闭包 closure 接收 DefaultExtraPropertiesExtension 类型的对象作为唯一参数；
2. 闭包 closure 中可以直接访问 BeanDynamicObject 和 ExtensibleDynamicObject 中的属性和方法。
</code></pre></div><p><strong>注意：</strong></p><div class="language-text ext-text"><pre class="language-text"><code>1. 注册到 DefaultConvention.extensionsStorage 中的标识符 &quot;ext&quot; 即是一个方法，也是一个属性：
    1. 当在 build.gradle 中编写 ext{...} 时，最终调用到 DefaultConvention.ExtensionsDynamicObject.tryInvokeMethod 方法，
       此时 ext 是一个方法，闭包作为方法参数。
    2. 当在 build.gradle 中编写 this.ext.extAttrName 时，最终调用到 DefaultConvention.ExtensionsDynamicObject.tryGetProperty，
       此时 ext 是一个属性，指定注册 &quot;ext&quot; 时绑定的 extraProperties 对象。

    也就是说，在 ext{...} 中扩展的属性，可以在 ext{...} 之外通过 this.ext 访问到。
    当然，为 Project 扩展的属性也可以在 build.gradle 中直接访问到。

2. 另外还需要注意，通过 ext{...} 为 Project 扩展的属性是可以被子 Project 继承的。
</code></pre></div><h4 id="_2-4-3-为-project-扩展新的属性" tabindex="-1"><a class="header-anchor" href="#_2-4-3-为-project-扩展新的属性" aria-hidden="true">#</a> 2.4.3 为 <code>Project</code> 扩展新的属性</h4><p>在 <code>build.gradle</code> 中可以调用 <code>ext(closure)</code> 方法为 <code>Project</code> 扩展属性。语法如下：</p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>ext <span class="token punctuation">{</span>
    extAttrName1 <span class="token operator">=</span> extAttrValue1
    extAttrName2 <span class="token operator">=</span> extAttrValue2
    <span class="token punctuation">...</span>
    extAttrName3 <span class="token operator">=</span> extAttrValue3
<span class="token punctuation">}</span>
</code></pre></div><p>在当前 <code>Project</code> 中可以通过如下方式访问到扩展属性：</p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token comment">// 方式 1</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>extAttrName

<span class="token comment">// 方式 2</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>extAttrName
</code></pre></div><p>在子 <code>Project</code> 中可以通过如下方式访问到父 <code>Project</code> 的扩展属性：</p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token keyword">this</span><span class="token punctuation">.</span>extAttrName <span class="token comment">// this 表示子 Project</span>
</code></pre></div><p><strong>注意：</strong></p><div class="language-text ext-text"><pre class="language-text"><code>1. 根 Project 中扩展的属性会被子 Project 继承，是作为子 Project 的属性，但不会作为子 Project 的扩展属性；

2. 为了避免当 Project 中存在于扩展属性同名的属性时所产生的冲突，建议使用扩展属性时按照定义时的 &quot;路径&quot; 来访问，
   如，在根 Project 中定义的扩展属性，在子 Project 中建议这样访问：rootProject.ext.extAttrName

3. 因为 Project 类提供了 getRootProject, 即提供了 rootProject 的 getter 方法，
   所以执行 this.rootProject 就相当于调用 this.getRootProject() 方法。
</code></pre></div><p><strong>示例代码：</strong></p><p><img src="/assets/10.ca11fa64.png" alt="" loading="lazy"></p><h4 id="_2-4-4-扩展属性的实际案例-引入外部文件-ext-gradle-中的扩展属性" tabindex="-1"><a class="header-anchor" href="#_2-4-4-扩展属性的实际案例-引入外部文件-ext-gradle-中的扩展属性" aria-hidden="true">#</a> 2.4.4 扩展属性的实际案例：引入外部文件 ext.gradle 中的扩展属性</h4><p><strong>案例步骤：</strong></p><div class="language-text ext-text"><pre class="language-text"><code>step1. 在单独的外部文件 ext.gradle 中定义扩展属性；

step2. 在根 Project 的 build.gradle 中，通过 Project.apply(Map&lt;String, ?&gt; options) 方法导入外部文件 ext.gradle；

    注意：
    &quot;from&quot; 类型的导入方式，相当于 C/C++ 中的 #include，
    也就是说，导入 ext.gradle 后，其中的 ext{...} 就相当于在根 Project 的 build.gradle 中定义了。

step3. 在子 Project 中，为了避免同名冲突，建议通过 rootProject.ext.extAttrName 的方式来访问根 Project 中定义的扩展属性。
</code></pre></div><p><strong>示例代码：</strong></p><p><img src="/assets/11.fee36653.png" alt="" loading="lazy"></p><h4 id="_2-4-5-在-gradle-properties-文件中定义扩展属性" tabindex="-1"><a class="header-anchor" href="#_2-4-5-在-gradle-properties-文件中定义扩展属性" aria-hidden="true">#</a> 2.4.5 在 <code>gradle.properties</code> 文件中定义扩展属性</h4><p>在根 <code>Project</code> 下的 <code>gradle.properties</code> 文件只能定义简单的键值对属性。</p><p>并且在 <code>gradle.properties</code> 中定义的属性名建议不要跟 <code>build.gradle</code> 中的属性名同名，否则可能报错。</p><p>在 <code>gradle.properties</code> 中定义的键值对扩展属性，使用时属性值默认都是 <code>String</code> 类型，需要调用 <code>toXXX()</code> 转换一下。</p><p><strong>示例代码：</strong></p><p><img src="/assets/12.3bb0a157.png" alt="" loading="lazy"></p><h4 id="_2-4-6-分析-setting-gradle-文件的内部实现" tabindex="-1"><a class="header-anchor" href="#_2-4-6-分析-setting-gradle-文件的内部实现" aria-hidden="true">#</a> 2.4.6 分析 <code>setting.gradle</code> 文件的内部实现</h4><p>如上代码所示：</p><div class="language-text ext-text"><pre class="language-text"><code>1. settings.gradle 编译生成的字节码文件，是一个 SettingsScript 的子类文件；

2. SettingsScript 类是一个脚本类，其中的 getScriptTarget() 返回一个目标对象 target，
   这个目标对象 target 为 settings.gradle 文件中提供了可以使用的 API；

3. 为 settings.gradle 文件中提供可以使用的 API 的目标对象 target 就是一个动态创建的 DefaultSettings 的子类。
   也就是说，setting.gradle 文件中可以使用 DefaultSettings 提供的API；

4. 查看源码，大概判断是使用 AsmBackedClassGenerator 来动态创建 DefaultSettings 的子类的。
   这与动态创建 DefaultProject 的子类所使用的生成器一样。在 AsmBackedClassGenerator 中，
   可以看到创建 DefaultSettings 子类时所动态生成的一些 API，这些动态生成的 API 也可以在该 settings.gradle 中使用。

参考：
org.gradle.initialization.SettingsScript
org.gradle.initialization.DefaultSettings // implements Settings
org.gradle.api.initialization.Settings
org.gradle.initialization.SettingsFactory
org.gradle.internal.service.scopes.BuildScopeServices
org.gradle.api.internal.ClassGeneratorBackedInstantiator
org.gradle.api.internal.AsmBackedClassGenerator
</code></pre></div><h3 id="_2-5-文件-file-相关的-api" tabindex="-1"><a class="header-anchor" href="#_2-5-文件-file-相关的-api" aria-hidden="true">#</a> 2.5 文件（<code>file</code>）相关的 <code>API</code></h3><p>主要是用来处理 <code>Project</code> 下的一些文件。</p><h4 id="_2-5-1-project-类提供的获取路径相关的-api" tabindex="-1"><a class="header-anchor" href="#_2-5-1-project-类提供的获取路径相关的-api" aria-hidden="true">#</a> 2.5.1 <code>Project</code> 类提供的获取路径相关的 <code>API</code></h4><h5 id="_2-5-1-1-获取表示根-project-文件夹-getrootdir" tabindex="-1"><a class="header-anchor" href="#_2-5-1-1-获取表示根-project-文件夹-getrootdir" aria-hidden="true">#</a> 2.5.1.1 获取表示根 <code>Project</code> 文件夹：<code>getRootDir()</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>File <span class="token function">getRootDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>返回表示根 Project 文件夹的 File 对象。
</code></pre></div><h5 id="_2-5-1-2-获取表示当前-project-的-build-文件夹-getbuilddir" tabindex="-1"><a class="header-anchor" href="#_2-5-1-2-获取表示当前-project-的-build-文件夹-getbuilddir" aria-hidden="true">#</a> 2.5.1.2 获取表示当前 <code>Project</code> 的 <code>build</code> 文件夹：<code>getBuildDir()</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>File <span class="token function">getBuildDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>返回表示当前 build.gradle 所对应的 Project 的 build 文件夹的 File 对象。
</code></pre></div><h5 id="_2-5-1-3-获取表示当前-project-的文件夹-getprojectdir" tabindex="-1"><a class="header-anchor" href="#_2-5-1-3-获取表示当前-project-的文件夹-getprojectdir" aria-hidden="true">#</a> 2.5.1.3 获取表示当前 <code>Project</code> 的文件夹：<code>getProjectDir()</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>File <span class="token function">getProjectDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>返回表示当前 build.gradle 所对应的 Project 文件夹的 File 对象。
</code></pre></div><h5 id="_2-5-1-3-示例代码" tabindex="-1"><a class="header-anchor" href="#_2-5-1-3-示例代码" aria-hidden="true">#</a> 2.5.1.3 示例代码</h5><p><img src="/assets/13.3335258a.png" alt="" loading="lazy"></p><h4 id="_2-5-2-project-类提供的文件操作相关的-api" tabindex="-1"><a class="header-anchor" href="#_2-5-2-project-类提供的文件操作相关的-api" aria-hidden="true">#</a> 2.5.2 <code>Project</code> 类提供的文件操作相关的 <code>API</code></h4><h5 id="_2-5-2-1-获取相对于当前-project-的某个-path-路径-file-path" tabindex="-1"><a class="header-anchor" href="#_2-5-2-1-获取相对于当前-project-的某个-path-路径-file-path" aria-hidden="true">#</a> 2.5.2.1 获取相对于当前 <code>Project</code> 的某个 <code>path</code> 路径：<code>file(path)</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>File <span class="token function">file</span><span class="token punctuation">(</span>Object path<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>返回相对于当前 Project 的 path 路径所表示的 File 对象。
</code></pre></div><h5 id="_2-5-2-2-获取相对于当前-project-的某些-path-路径-files-paths" tabindex="-1"><a class="header-anchor" href="#_2-5-2-2-获取相对于当前-project-的某些-path-路径-files-paths" aria-hidden="true">#</a> 2.5.2.2 获取相对于当前 <code>Project</code> 的某些 <code>path</code> 路径：<code>files(paths)</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>ConfigurableFileCollection <span class="token function">files</span><span class="token punctuation">(</span>Object<span class="token punctuation">...</span> paths<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>1. 返回 paths 数组指定的多个 File 对象的集合；
2. ConfigurableFileCollection 继承自 FileCollection；
3. 可以通过 FileCollection.getFiles() 可以返回 File 对象构成的 Set 集合。
</code></pre></div><h5 id="_2-5-2-3-示例代码" tabindex="-1"><a class="header-anchor" href="#_2-5-2-3-示例代码" aria-hidden="true">#</a> 2.5.2.3 示例代码</h5><p><img src="/assets/14.ad5748b6.png" alt="" loading="lazy"></p><h5 id="_2-5-2-4-文件拷贝-copy-closure" tabindex="-1"><a class="header-anchor" href="#_2-5-2-4-文件拷贝-copy-closure" aria-hidden="true">#</a> 2.5.2.4 文件拷贝：<code>copy(closure)</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>WorkResult <span class="token function">copy</span><span class="token punctuation">(</span>Closure closure<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>作用：
1. 在实参闭包 closure 中，通过调用 CopySpec 提供的 API 完成文件的拷贝操作。

注意：
1. 调用 copy(closure) 方法时，实参闭包传入的参数是 CopySpec 的子类对象
2. 实参闭包的委托策略机制是 OWNER_ONLY
3. 实参闭包的 owner 是 ConfigureDelegate 类对象
4. ConfigureDelegate 中的 _delegate 是封装了 CopySpec 的 BeanDynamicObject 对象。
    由此可知，实参闭包中可以访问到 CopySpec 提供的 API
5. 在 copy 方法的实参闭包中，可以调用 CopySpec 提供的如下API进行文件拷贝：
    1. CopySpec from(Object... sourcePaths); 
        指定拷贝的源文件。
        参数可以是源文件的路径字符串，也可以是源文件的 File 对象，
        源文件以路径字符串表示时，可以是绝对路径，也可以是相对于当前 Project 的路径。
    2. CopySpec into(Object destPath); 
        指定拷贝输出的目标文件夹。
        参数可以是目标文件的路径字符串，也可以是目标文件夹的 File 对象，
        目标文件以路径字符串表示时，可以是绝对路径，也可以是相对于当前 Project 的路径。
    3. CopySpec exclude(Closure excludeSpec); 
        排除不想拷贝的文件。
    4. CopySpec rename(Closure closure); 
        对拷贝后的文件进行重命名。
        闭包传入拷贝的文件名，闭包的返回值就是重命名的文件名。
6. 在调用方法时，如果只有一个参数，那么可以省略括号 &quot;()&quot;
</code></pre></div><h5 id="_2-5-2-5-示例代码" tabindex="-1"><a class="header-anchor" href="#_2-5-2-5-示例代码" aria-hidden="true">#</a> 2.5.2.5 示例代码</h5><p><img src="/assets/15.6546219f.png" alt="" loading="lazy"></p><h4 id="_2-5-3-project-类提供的文件树的操作" tabindex="-1"><a class="header-anchor" href="#_2-5-3-project-类提供的文件树的操作" aria-hidden="true">#</a> 2.5.3 <code>Project</code> 类提供的文件树的操作</h4><h5 id="_2-5-3-1-什么是文件树" tabindex="-1"><a class="header-anchor" href="#_2-5-3-1-什么是文件树" aria-hidden="true">#</a> 2.5.3.1 什么是文件树</h5><p><code>Gradle</code> 中，可以将根 <code>Project</code> 文件夹下的所有文件（包括根 <code>Project</code> 文件夹）看成是一棵文件树（相当于树结构）。</p><p>其中根 <code>Project</code> 文件夹作为根节点。并且，根 <code>Project</code> 文件夹下的每个文件夹也都可以作为一棵文件树。</p><p><code>Gradle</code> 中用 <code>ConfigurableFileTree</code> 表示一棵文件树。</p><h5 id="_2-5-3-2-文件树-configurablefiletree-提供的常用-api" tabindex="-1"><a class="header-anchor" href="#_2-5-3-2-文件树-configurablefiletree-提供的常用-api" aria-hidden="true">#</a> 2.5.3.2 文件树 <code>ConfigurableFileTree</code> 提供的常用 <code>API</code></h5><h6 id="_2-5-3-2-1-设置文件树的根节点-setdir-dir" tabindex="-1"><a class="header-anchor" href="#_2-5-3-2-1-设置文件树的根节点-setdir-dir" aria-hidden="true">#</a> 2.5.3.2.1 设置文件树的根节点：<code>setDir(dir)</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>ConfigurableFileTree <span class="token function">setDir</span><span class="token punctuation">(</span>Object dir<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>设置作为文件树的根节点的文件夹路径。可以是相对于当前 Project 的相对路径。
</code></pre></div><h6 id="_2-5-3-2-2-设置文件树中需要排除的文件-setexcludes-excludes" tabindex="-1"><a class="header-anchor" href="#_2-5-3-2-2-设置文件树中需要排除的文件-setexcludes-excludes" aria-hidden="true">#</a> 2.5.3.2.2 设置文件树中需要排除的文件：<code>setExcludes(excludes)</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>PatternFilterable <span class="token function">setExcludes</span><span class="token punctuation">(</span>Iterable<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> excludes<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>设置文件树中需要排除的文件，参数表示排除文件的集合。
</code></pre></div><h6 id="_2-5-3-2-3-设置文件树中需要导入的文件-setincludes-includes" tabindex="-1"><a class="header-anchor" href="#_2-5-3-2-3-设置文件树中需要导入的文件-setincludes-includes" aria-hidden="true">#</a> 2.5.3.2.3 设置文件树中需要导入的文件：<code>setIncludes(includes)</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>PatternFilterable <span class="token function">setIncludes</span><span class="token punctuation">(</span>Iterable<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> includes<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>设置文件树中需要导入的文件，参数表示导入文件的集合。
</code></pre></div><h6 id="_2-5-3-2-4-遍历文件树-visit-closure" tabindex="-1"><a class="header-anchor" href="#_2-5-3-2-4-遍历文件树-visit-closure" aria-hidden="true">#</a> 2.5.3.2.4 遍历文件树：<code>visit(closure)</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>FileTree <span class="token function">visit</span><span class="token punctuation">(</span>Closure visitor<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>遍历文件树。
实参闭包传入封装了当前遍历到的文件对象的 FileTreeElement 子类对象，
FileTreeElement 提供了 getFile() 方法来获取当前遍历到的 File 对象。
</code></pre></div><h5 id="_2-5-3-3-构建文件树-filetree" tabindex="-1"><a class="header-anchor" href="#_2-5-3-3-构建文件树-filetree" aria-hidden="true">#</a> 2.5.3.3 构建文件树：<code>fileTree</code></h5><p><code>Project</code> 类提供如下方法构建一棵文件树：</p><p><strong>方法一</strong></p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>ConfigurableFileTree <span class="token function">fileTree</span><span class="token punctuation">(</span>Object baseDir<span class="token punctuation">,</span> Closure configureClosure<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>baseDir: 设置作为文件树的根节点的文件夹路径，可以是相对于当前 Project 的相对路径；
configureClosure: 对文件树进行配置，闭包中可以访问 ConfigurableFileTree 提供的 API。
</code></pre></div><p><strong>方法二</strong></p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>ConfigurableFileTree <span class="token function">fileTree</span><span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> <span class="token operator">?</span><span class="token operator">&gt;</span> args<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>args: 用于配置文件树的键值对属性 Map，其中 ConfigurableFileTree 提供的 setXxx 方法的参数作为属性值，xxx 作为属性名。
</code></pre></div><h5 id="_2-5-3-4-示例代码" tabindex="-1"><a class="header-anchor" href="#_2-5-3-4-示例代码" aria-hidden="true">#</a> 2.5.3.4 示例代码</h5><p><img src="/assets/16.88f25d49.png" alt="" loading="lazy"></p><h3 id="_2-6-依赖相关的-api" tabindex="-1"><a class="header-anchor" href="#_2-6-依赖相关的-api" aria-hidden="true">#</a> 2.6 依赖相关的 <code>API</code></h3><p>项目中的依赖配置主要可分为 3 大类：</p><ol><li><p>配置依赖仓库；</p></li><li><p>配置 <code>Gradle</code> 构建工程时依赖的 <code>Gradle</code> 插件；</p></li><li><p>配置应用程序编译时依赖的第三方库。</p></li></ol><h4 id="_2-6-1-配置依赖仓库" tabindex="-1"><a class="header-anchor" href="#_2-6-1-配置依赖仓库" aria-hidden="true">#</a> 2.6.1 配置依赖仓库</h4><p>仓库就是用来存放 <code>Gradle</code> 插件和第三方库的。所以，不仅要为 <code>Gradle</code> 插件配置依赖仓库；还要为第三方库配置依赖仓库。</p><h5 id="_2-6-1-1-配置-gradle-插件的依赖仓库" tabindex="-1"><a class="header-anchor" href="#_2-6-1-1-配置-gradle-插件的依赖仓库" aria-hidden="true">#</a> 2.6.1.1 配置 <code>Gradle</code> 插件的依赖仓库</h5><p><strong>Step 1.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>调用 Project.buildscript(closure)
</code></pre></div><blockquote><p>注意：一般会在根 <code>Project</code> 的 <code>build.gradle</code> 中调用该方法。</p></blockquote><p><strong>Step 2.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>在 Project.buildscript(closure) 的实参闭包中，调用 ScriptHandler.repositories(closure)
</code></pre></div><p><strong>Step 3.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>在 ScriptHandler.repositories(closure) 的实参闭包中，调用 RepositoryHandler 提供的 API 配置 Gradle 插件的依赖仓库
</code></pre></div><h5 id="_2-6-1-2-配置第三方库的依赖仓库" tabindex="-1"><a class="header-anchor" href="#_2-6-1-2-配置第三方库的依赖仓库" aria-hidden="true">#</a> 2.6.1.2 配置第三方库的依赖仓库</h5><p><strong>Step 1.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>调用 Project.buildscript(closure)
</code></pre></div><blockquote><p>注意：一般会在根 <code>Project</code> 中调用 <code>allprojects(closure)</code>，遍历每个 <code>Project</code>，并调用该方法。</p></blockquote><p><strong>Step 2.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>在 Project.repositories(closure) 的实参闭包中，调用 RepositoryHandler 提供的 API 配置第三方库的依赖仓库
</code></pre></div><h5 id="_2-6-1-3-repositoryhandler-类提供的配置依赖仓库的-api" tabindex="-1"><a class="header-anchor" href="#_2-6-1-3-repositoryhandler-类提供的配置依赖仓库的-api" aria-hidden="true">#</a> 2.6.1.3 <code>RepositoryHandler</code> 类提供的配置依赖仓库的 <code>API</code></h5><h6 id="_2-6-1-3-1-配置本地仓库-flatdir-closure" tabindex="-1"><a class="header-anchor" href="#_2-6-1-3-1-配置本地仓库-flatdir-closure" aria-hidden="true">#</a> 2.6.1.3.1 配置本地仓库：<code>flatDir(closure)</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>FlatDirectoryArtifactRepository <span class="token function">flatDir</span><span class="token punctuation">(</span>Closure configureClosure<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>参数闭包 configureClosure 中可以使用 FlatDirectoryArtifactRepository 提供的 API 
</code></pre></div><p><strong>示例代码：</strong></p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>flatDir <span class="token punctuation">{</span>
    dirs <span class="token string">&#39;libs&#39;</span>  <span class="token comment">// 将当前 Project 下的 libs 文件夹作为本地仓库</span>
<span class="token punctuation">}</span>
</code></pre></div><h6 id="_2-6-1-3-2-配置-maven-仓库-maven-closure" tabindex="-1"><a class="header-anchor" href="#_2-6-1-3-2-配置-maven-仓库-maven-closure" aria-hidden="true">#</a> 2.6.1.3.2 配置 <code>maven</code> 仓库：<code>maven(closure)</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>MavenArtifactRepository <span class="token function">maven</span><span class="token punctuation">(</span>Closure closure<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>参数闭包 closure 中可以使用 MavenArtifactRepository 及其父类提供的 API：

1. 设置 maven 仓库的 url 地址：
    void setUrl(Object url) // MavenArtifactRepository 类提供

2. 为当前配置的 maven 仓库起别名：
    void setName(String name) // ArtifactRepository 类提供

3. 设置私有 maven 仓库的认证信息：
    void credentials(Action&lt;? super PasswordCredentials&gt; action) // AuthenticationSupported 类提供

    调用 credentials(closure) 就相当于调用 credentials(action)
    闭包 closure 中可以使用 PasswordCredentials 提供的 API
    闭包 closure 中主要调用 setUsername 和 setPassword 方法设置私有 maven 仓库的认证信息（即用户名和密码）
</code></pre></div><p><strong>示例代码：</strong></p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>maven <span class="token punctuation">{</span>
    url <span class="token string">&#39;http://mvn.cloud.alipay.com/nexus/content/repositories/releases/&#39;</span>
    name <span class="token string">&#39;alipay&#39;</span> <span class="token comment">// 为此 maven 仓库起别名，可省略</span>
    credentials <span class="token punctuation">{</span> <span class="token comment">// 如果该 maven 仓库需要登录才能访问，需要配置用户名和密码</span>
        username <span class="token string">&#39;mvn_read_ws&#39;</span>
        password <span class="token string">&#39;mrk8929&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h6 id="_2-6-1-3-3-配置-mavencentral-仓库-mavencentral" tabindex="-1"><a class="header-anchor" href="#_2-6-1-3-3-配置-mavencentral-仓库-mavencentral" aria-hidden="true">#</a> 2.6.1.3.3 配置 <code>mavenCentral </code> 仓库：<code>mavenCentral()</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>MavenArtifactRepository <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>相当于：</p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>maven <span class="token punctuation">{</span>
    url <span class="token string">&#39;https://repo.maven.apache.org/maven2/&#39;</span>
    name <span class="token string">&#39;MavenRepo&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div><h6 id="_2-6-1-3-4-配置本地maven仓库-mavenlocal" tabindex="-1"><a class="header-anchor" href="#_2-6-1-3-4-配置本地maven仓库-mavenlocal" aria-hidden="true">#</a> 2.6.1.3.4 配置本地maven仓库 ：<code>mavenLocal()</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>MavenArtifactRepository <span class="token function">mavenLocal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="_2-6-1-3-5-配置-jcenter仓库-jcenter" tabindex="-1"><a class="header-anchor" href="#_2-6-1-3-5-配置-jcenter仓库-jcenter" aria-hidden="true">#</a> 2.6.1.3.5 配置 jcenter仓库：<code>jcenter()</code></h6><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>MavenArtifactRepository <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="_2-6-1-4-示例代码" tabindex="-1"><a class="header-anchor" href="#_2-6-1-4-示例代码" aria-hidden="true">#</a> 2.6.1.4 示例代码</h5><p><img src="/assets/17.5137df3c.png" alt="" loading="lazy"></p><h4 id="_2-6-2-配置依赖的-gradle-插件" tabindex="-1"><a class="header-anchor" href="#_2-6-2-配置依赖的-gradle-插件" aria-hidden="true">#</a> 2.6.2 配置依赖的 <code>Gradle</code> 插件</h4><p><code>Gradle</code> 本身可以理解为一个编程框架，在使用 <code>Gradle</code> 编写脚本代码时也可以使用一些第三方库，而 <code>Gradle</code> 插件可以理解为编写 Gradle 脚本代码时所需要依赖的第三方库。</p><p>配置 <code>Gradle</code> 插件的步骤：</p><p><strong>Step 1.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>调用 Project.buildscript(closure)
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>注意：一般会在根 Project 的 build.gradle 中调用该方法。
</code></pre></div><p><strong>Step 2.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>在 Project.buildscript(closure) 的实参闭包中，调用 ScriptHandler.dependencies(closure)
</code></pre></div><p><strong>Step 3.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>在 ScriptHandler.dependencies(closure) 的实参闭包中，调用 DependencyHandler 提供的 API 配置 Gradle 插件
</code></pre></div><p><code>ScriptHandler.dependencies(closure)</code> 中的依赖配置举例：</p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>classpath <span class="token string">&#39;com.android.tools.build:gradle:3.4.2&#39;</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>其中：
1. classpath 作为 configurationName；&#39;com.android.tools.build:gradle:3.4.2&#39; 作为 dependencyNotation

2. &#39;com.android.tools.build:gradle:3.4.2&#39; 表示的 Android Gradle 插件中，
    集成了插件 &#39;com.android.application&#39; 和插件 &#39;com.android.library&#39;。
</code></pre></div><h4 id="_2-6-3-配置依赖的第三方库" tabindex="-1"><a class="header-anchor" href="#_2-6-3-配置依赖的第三方库" aria-hidden="true">#</a> 2.6.3 配置依赖的第三方库</h4><p><strong>Step 1.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>调用 Project.dependencies(closure)
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>注意：一般会在每个子 Project 的 build.gradle 中分别调用该方法，为每个子 Project 单独配置依赖的第三方库。
</code></pre></div><p><strong>Step 2.</strong></p><div class="language-text ext-text"><pre class="language-text"><code>在 Project.dependencies(closure) 的实参闭包中，调用 DependencyHandler 提供的 API 配置第三方库
</code></pre></div><p><strong><code>Project.dependencies(closure)</code> 中的依赖配置举例如下：</strong></p><h5 id="_2-6-3-1-导入依赖仓库中的第三方库" tabindex="-1"><a class="header-anchor" href="#_2-6-3-1-导入依赖仓库中的第三方库" aria-hidden="true">#</a> 2.6.3.1 导入依赖仓库中的第三方库</h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>implementation <span class="token string">&#39;group:name:version&#39;</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>group=groupId, name=artifactId, version=versionId
</code></pre></div><h5 id="_2-6-3-2-导入-1-个或多个本地-jar-文件" tabindex="-1"><a class="header-anchor" href="#_2-6-3-2-导入-1-个或多个本地-jar-文件" aria-hidden="true">#</a> 2.6.3.2 导入 1 个或多个本地 <code>jar</code> 文件</h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>implementation <span class="token function">files</span><span class="token punctuation">(</span><span class="token string">&#39;jarFilePath1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jarFilePath2&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">...</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>路径是相对于当前 Project 的相对路径，如：
implementation files(&#39;libs/name1.jar&#39;) // 导入当前 Project 下的 libs 文件夹中的 name1.jar 文件
implementation files(&#39;libs/name1.jar&#39;, &#39;libs/name2.jar&#39;)
</code></pre></div><h5 id="_2-6-3-3-导入当前-project-下的以-libs-为根节点的文件树" tabindex="-1"><a class="header-anchor" href="#_2-6-3-3-导入当前-project-下的以-libs-为根节点的文件树" aria-hidden="true">#</a> 2.6.3.3 导入当前 <code>Project</code> 下的以 <code>libs</code> 为根节点的文件树</h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token comment">// 导入当前 Project 下的以 libs 为根节点的文件树</span>
implementation <span class="token function">fileTree</span><span class="token punctuation">(</span><span class="token string">&#39;libs&#39;</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token comment">//  导入当 前Project 下的以 libs 为根节点的文件树中以 .jar 为后缀名的所有文件</span>
implementation <span class="token function">fileTree</span><span class="token punctuation">(</span>dir<span class="token punctuation">:</span> <span class="token string">&#39;libs&#39;</span><span class="token punctuation">,</span> includes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;*.jar&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token comment">// 导入当前 Project 下的以 libs 为根节点的文件树中不以 .jar 为后缀名的所有文件</span>
implementation <span class="token function">fileTree</span><span class="token punctuation">(</span>dir<span class="token punctuation">:</span> <span class="token string">&#39;libs&#39;</span><span class="token punctuation">,</span> excludes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;*.jar&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="_2-6-3-4-排除-group-name-version-内部的依赖" tabindex="-1"><a class="header-anchor" href="#_2-6-3-4-排除-group-name-version-内部的依赖" aria-hidden="true">#</a> 2.6.3.4 排除 <code>&#39;group:name:version&#39;</code> 内部的依赖</h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token comment">// 排除 &#39;group:name:version&#39; 内部的某个依赖</span>
implementation <span class="token punctuation">(</span><span class="token string">&#39;group:name:version&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    exclude group<span class="token punctuation">:</span> <span class="token string">&#39;innerGroup&#39;</span><span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token string">&#39;innerName&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>implementation <span class="token punctuation">(</span><span class="token string">&#39;group:name:version&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 排除 &#39;group:name:version&#39; 内部的所有依赖</span>
    <span class="token comment">// 即当前 Project 仅直接依赖 &#39;group:name:version&#39;，不会间接依赖其内部依赖</span>
    transitive <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="_2-6-3-5-依赖本地的子-project" tabindex="-1"><a class="header-anchor" href="#_2-6-3-5-依赖本地的子-project" aria-hidden="true">#</a> 2.6.3.5 依赖本地的子 <code>Project</code></h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>implementation <span class="token function">project</span><span class="token punctuation">(</span><span class="token string">&#39;:name&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 依赖本地的子 Project</span>
</code></pre></div><h5 id="_2-6-3-6-导入当前-project-的-libs-文件夹下的-aar-库文件" tabindex="-1"><a class="header-anchor" href="#_2-6-3-6-导入当前-project-的-libs-文件夹下的-aar-库文件" aria-hidden="true">#</a> 2.6.3.6 导入当前 <code>Project</code> 的 <code>libs</code> 文件夹下的 <code>aar</code> 库文件</h5><div class="language-groovy ext-groovy"><pre class="language-groovy"><code><span class="token function">implementation</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&#39;fileName&#39;</span><span class="token punctuation">,</span> ext<span class="token punctuation">:</span> <span class="token string">&#39;aar&#39;</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>注意：必须在 Project.repositories(closure) 的闭包中指定当前 Project 的 libs 文件夹为依赖仓库

Project.repositories {
    ...
    flatDir {
        dirs &#39;libs&#39;
    }
    ...
}
</code></pre></div><h5 id="_2-6-3-7-占位编译配置-provided" tabindex="-1"><a class="header-anchor" href="#_2-6-3-7-占位编译配置-provided" aria-hidden="true">#</a> 2.6.3.7 占位编译配置 <code>provided</code></h5><p>可以使用 <code>provided</code> 代替 <code>compile</code> 或 <code>implementation</code> 导入依赖。此时，<code>provided</code> 导入的依赖库只在编译时期起作用，不会将依赖库添加到 <code>apk</code> 或 <code>aar</code> 或 <code>jar</code> 等构建产品中。</p><p>使用 <code>provided</code> 的使用场景：</p><ol><li><p>对于只在编译时期起作用的依赖库，使用 <code>provided</code> 导入，避免添加到 <code>apk</code> 中，减小 <code>apk</code> 体积。</p><blockquote><p>举例：如果依赖库只是用于在编译时期动态生成类文件，那么可以使用 <code>provided</code> 导入这类依赖库。</p></blockquote></li><li><p>当 <code>app</code> 模块使用的依赖库，在其他本地依赖模块中也使用到时，其他本地依赖模块中可以使用 <code>provided</code> 导入依赖库，</p><blockquote><p>即打包时，只把 <code>app</code> 模块中的依赖库添加到 <code>apk</code> 中即可。</p></blockquote></li></ol><p><strong>注意：</strong> 能使用 <code>provided</code> 占位编译导入的依赖库，就尽量使用 <code>provided</code> 导入，这样可以减小 <code>apk</code> 体积。</p><h5 id="_2-6-3-8-示例代码" tabindex="-1"><a class="header-anchor" href="#_2-6-3-8-示例代码" aria-hidden="true">#</a> 2.6.3.8 示例代码</h5><p><img src="/assets/18.b00c225d.png" alt="" loading="lazy"></p><h3 id="_2-7-外部命令执行相关的-api" tabindex="-1"><a class="header-anchor" href="#_2-7-外部命令执行相关的-api" aria-hidden="true">#</a> 2.7 外部命令执行相关的 <code>API</code></h3><p><code>Project</code> 类提供的执行外部命令的 <code>API</code> 如下：</p><div class="language-groovy ext-groovy"><pre class="language-groovy"><code>ExecResult <span class="token function">exec</span><span class="token punctuation">(</span>Closure closure<span class="token punctuation">)</span>
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>实参闭包中可以调用 org.gradle.process.ExecSpec 提供的 API 来配置外部命令
</code></pre></div><p><strong>示例代码：</strong></p><div class="language-text ext-text"><pre class="language-text"><code>知识点：

1. 在 Project 中创建一个 Task 任务

    Task task(String taskName, Closure configureClosure)

    Project 类提供了如上的 task 方法，创建一个名为 taskName 的 Task 任务；
    实参闭包中可以调用 org.gradle.api.Task 提供的 API，对 Task 任务进行配置。

2. Task 类提供的用于配置 Task 任务的 API

    Task doLast(Closure action)

    实参闭包中的代码在 Gradle 执行阶段才会执行

3. 对于可变字符串（双引号字符串），其中的 ${变量} 可简写为 $变量

4. 可以在根目录下执行 gradlew taskName 命令来执行一个 Task 任务

5. Windows 和 Linux 下的外部命令是不同的
</code></pre></div><p><img src="/assets/19.ffdca271.png" alt="" loading="lazy"></p><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zengkaiqiang562/JavaGuide/edit/main/docs/zkq/gradle/_05_project.md" rel="noopener noreferrer" target="_blank" arialabel="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/11/13 23:38:57</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: zengkaiqiang562@163.com">zengk</span>,<!--]--><!--[--><span class="contributor" title="email: zengkaiqiang562@163.com">zenk</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/zkq/gradle/_04_lifecycle.html" class="nav-link prev" arialabel="Gradle生命周期探索"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->Gradle生命周期探索</div></a><a href="/zkq/gradle/_06_task.html" class="nav-link next" arialabel="Task详解与实战"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">Task详解与实战<!----></div></a></nav><!----><!----></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright © 2023 Zenk562</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.625aa393.js" defer></script>
  </body>
</html>
