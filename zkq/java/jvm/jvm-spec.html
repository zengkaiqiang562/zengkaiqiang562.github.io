<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zengkaiqiang562.github.io/zkq/java/jvm/jvm-spec.html"><meta property="og:site_name" content="Android Guide"><meta property="og:title" content="认识 JVM 规范（JVM 概述、字节码指令集、Class文件解析、ASM）"><meta property="og:type" content="article"><meta property="og:image" content="https://zengkaiqiang562.github.io/"><meta property="og:updated_time" content="2022-07-07T15:59:00.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="认识 JVM 规范（JVM 概述、字节码指令集、Class文件解析、ASM）"><meta property="article:tag" content="java"><meta property="article:modified_time" content="2022-07-07T15:59:00.000Z"><script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?5dd2e8c97962d57b7b8fea1737c01743";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2922463_99aa80ii7cf.css"><title>认识 JVM 规范（JVM 概述、字节码指令集、Class文件解析、ASM） | Android Guide</title><meta name="description" content="Android 学习 && 面试指南">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.5a38b724.css">
    <link rel="modulepreload" href="/assets/app.625aa393.js"><link rel="modulepreload" href="/assets/jvm-spec.html.61b98176.js"><link rel="modulepreload" href="/assets/jvm-spec.html.557af5d9.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.png" alt="Android Guide"><!----><span class="site-name hide-in-pad">Android Guide</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" arialabel="面试指南"><i class="icon iconfont icon-java"></i>面试指南<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zhuanlan/" class="nav-link" arialabel="优质专栏"><i class="icon iconfont icon-recommend"></i>优质专栏<!----></a></div><div class="nav-item hide-in-mobile"><a href="/open-source-project/" class="nav-link" arialabel="项目精选"><i class="icon iconfont icon-github"></i>项目精选<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://snailclimb.gitee.io/javaguide/#/" rel="noopener noreferrer" target="_blank" arialabel="旧版链接" class="nav-link"><i class="icon iconfont icon-java"></i>旧版链接<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="https://javaguide.cn/feed.json" rel="noopener noreferrer" target="_blank" arialabel="RSS订阅" class="nav-link"><i class="icon iconfont icon-rss"></i>RSS订阅<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/about-the-author/" class="nav-link" arialabel="关于作者"><i class="icon iconfont icon-zuozhe"></i>关于作者<!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/zengkaiqiang562/JavaGuide" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" arialabelledby="auto" style="display:block;"><title id="auto" lang="en">auto icon</title><g fill="currentColor"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" arialabelledby="dark" style="display:none;"><title id="dark" lang="en">dark icon</title><g fill="currentColor"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" arialabelledby="light" style="display:none;"><title id="light" lang="en">light icon</title><g fill="currentColor"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></g></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zkq/java/reflect.html" class="nav-link sidebar-link sidebar-page" arialabel="反射机制"><!---->反射机制<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/annotation.html" class="nav-link sidebar-link sidebar-page" arialabel="注解技术"><!---->注解技术<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/genericity.html" class="nav-link sidebar-link sidebar-page" arialabel="泛型编程（TODO）"><!---->泛型编程（TODO）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/thread.html" class="nav-link sidebar-link sidebar-page" arialabel="线程"><!---->线程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/threadpool.html" class="nav-link sidebar-link sidebar-page" arialabel="线程池"><!---->线程池<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/jmm.html" class="nav-link sidebar-link sidebar-page" arialabel="Java 内存模型（JMM）"><!---->Java 内存模型（JMM）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">JVM</span><span class="arrow down"></span></button><!--[--><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="认识 JVM 规范（JVM 概述、字节码指令集、Class文件解析、ASM）"><!---->认识 JVM 规范（JVM 概述、字节码指令集、Class文件解析、ASM）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_1-jvm-概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1. JVM 概述"><!---->1. JVM 概述<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_1-1-jvm-的主要功能" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.1 JVM 的主要功能"><!---->1.1 JVM 的主要功能<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_1-2-虚拟机是-java-平台无关的保障" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2 虚拟机是 Java 平台无关的保障"><!---->1.2 虚拟机是 Java 平台无关的保障<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_2-jvm-规范的作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2. JVM 规范的作用"><!---->2. JVM 规范的作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_3-jvm-规范文档的下载获取" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3. JVM 规范文档的下载获取"><!---->3. JVM 规范文档的下载获取<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-jvm-规范中的主要内容" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4. JVM 规范中的主要内容"><!---->4. JVM 规范中的主要内容<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-1-字节码指令集" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.1 字节码指令集"><!---->4.1 字节码指令集<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-2-class-文件的格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.2 Class 文件的格式"><!---->4.2 Class 文件的格式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-3-数据类型和值" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.3 数据类型和值"><!---->4.3 数据类型和值<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-4-运行时数据区" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.4 运行时数据区"><!---->4.4 运行时数据区<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-5-栈帧" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.5 栈帧"><!---->4.5 栈帧<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-6-特殊方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.6 特殊方法"><!---->4.6 特殊方法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-7-类库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.7 类库"><!---->4.7 类库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-8-异常" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.8 异常"><!---->4.8 异常<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-9-虚拟机的启动、加载、链接和初始化" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.9 虚拟机的启动、加载、链接和初始化"><!---->4.9 虚拟机的启动、加载、链接和初始化<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-字节码指令集" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5. 字节码指令集"><!---->5. 字节码指令集<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-1-字节码指令集简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.1 字节码指令集简介"><!---->5.1 字节码指令集简介<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-2-数据类型与指令集" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2 数据类型与指令集"><!---->5.2 数据类型与指令集<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-3-加载和存储指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.3 加载和存储指令"><!---->5.3 加载和存储指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-4-算术指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.4 算术指令"><!---->5.4 算术指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-5-类型转换指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.5 类型转换指令"><!---->5.5 类型转换指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-6-对象的创建与操作指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.6 对象的创建与操作指令"><!---->5.6 对象的创建与操作指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-7-操作数栈管理指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.7 操作数栈管理指令"><!---->5.7 操作数栈管理指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-8-控制转移指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.8 控制转移指令"><!---->5.8 控制转移指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-9-方法调用和返回指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.9 方法调用和返回指令"><!---->5.9 方法调用和返回指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-10-抛出异常相关的指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.10 抛出异常相关的指令"><!---->5.10 抛出异常相关的指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-11-同步相关的指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.11 同步相关的指令"><!---->5.11 同步相关的指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-12-指令格式表-描述指令的功能-使用方式等" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.12 指令格式表（描述指令的功能，使用方式等）"><!---->5.12 指令格式表（描述指令的功能，使用方式等）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#如何阅读指令格式表" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="如何阅读指令格式表"><!---->如何阅读指令格式表<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-13-如何用字节码指令集表示-java-代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.13 如何用字节码指令集表示 Java 代码"><!---->5.13 如何用字节码指令集表示 Java 代码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_6-特殊方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6. 特殊方法"><!---->6. 特殊方法<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_6-1-init" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.1 &lt;init&gt;"><!---->6.1 &lt;init&gt;<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_6-2-clinit" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.2 &lt;clinit&gt;"><!---->6.2 &lt;clinit&gt;<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_7-类库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7. 类库"><!---->7. 类库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-class-文件的格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8. Class 文件的格式"><!---->8. Class 文件的格式<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-1-class-文件概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.1 Class 文件概述"><!---->8.1 Class 文件概述<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-2-class-文件中的两种类型-无符号数、表" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.2 Class 文件中的两种类型（无符号数、表）"><!---->8.2 Class 文件中的两种类型（无符号数、表）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-3-classfile-结构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.3 ClassFile 结构"><!---->8.3 ClassFile 结构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-4-查看-java-源码对应的-class-字节码文件的三种方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4 查看 Java 源码对应的 Class 字节码文件的三种方式"><!---->8.4 查看 Java 源码对应的 Class 字节码文件的三种方式<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-4-1-在-eclipse-中查看-class-文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4.1 在 Eclipse 中查看 class 文件"><!---->8.4.1 在 Eclipse 中查看 class 文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-4-2-通过-javap-命令查看-class-文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4.2 通过 javap 命令查看 class 文件"><!---->8.4.2 通过 javap 命令查看 class 文件<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#javap-生成的非正式-虚拟机汇编语言-的格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="javap 生成的非正式 “虚拟机汇编语言” 的格式："><!---->javap 生成的非正式 “虚拟机汇编语言” 的格式：<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-4-3-通过-16-进制文件查看工具-如-winhex-查看-class-文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4.3 通过 16 进制文件查看工具（如 winhex）查看 class 文件"><!---->8.4.3 通过 16 进制文件查看工具（如 winhex）查看 class 文件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-常量池" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5 常量池"><!---->8.5 常量池<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-1-常量池项在-class-文件中的通用格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.1 常量池项在 class 文件中的通用格式"><!---->8.5.1 常量池项在 class 文件中的通用格式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-常量池项的类型-tag" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2 常量池项的类型（tag）"><!---->8.5.2 常量池项的类型（tag）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-1-constant-class-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.1 CONSTANT_Class_info 类型"><!---->8.5.2.1 CONSTANT_Class_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-2-constant-fieldref-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.2 CONSTANT_Fieldref_info 类型"><!---->8.5.2.2 CONSTANT_Fieldref_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-3-constant-methodref-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.3 CONSTANT_Methodref_info 类型"><!---->8.5.2.3 CONSTANT_Methodref_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-4-constant-interfacemethodref-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.4 CONSTANT_InterfaceMethodref_info 类型"><!---->8.5.2.4 CONSTANT_InterfaceMethodref_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-5-constant-string-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.5 CONSTANT_String_info 类型"><!---->8.5.2.5 CONSTANT_String_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-6-constant-integer-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.6 CONSTANT_Integer_info 类型"><!---->8.5.2.6 CONSTANT_Integer_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-7-constant-float-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.7 CONSTANT_Float_info 类型"><!---->8.5.2.7 CONSTANT_Float_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-8-constant-long-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.8 CONSTANT_Long_info 类型"><!---->8.5.2.8 CONSTANT_Long_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-9-constant-double-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.9 CONSTANT_Double_info 类型"><!---->8.5.2.9 CONSTANT_Double_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-10-constant-nameandtype-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.10 CONSTANT_NameAndType_info 类型"><!---->8.5.2.10 CONSTANT_NameAndType_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-11-constant-utf8-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.11 CONSTANT_Utf8_info 类型"><!---->8.5.2.11 CONSTANT_Utf8_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-12-constant-methodhandle-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.12 CONSTANT_MethodHandle_info 类型"><!---->8.5.2.12 CONSTANT_MethodHandle_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-13-constant-methodtype-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.13 CONSTANT_MethodType_info 类型"><!---->8.5.2.13 CONSTANT_MethodType_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-14-constant-invokedynamic-info-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2.14 CONSTANT_InvokeDynamic_info 类型"><!---->8.5.2.14 CONSTANT_InvokeDynamic_info 类型<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-3-如何确定-class-文件中常量池的结束位置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.3 如何确定 class 文件中常量池的结束位置"><!---->8.5.3 如何确定 class 文件中常量池的结束位置<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-6-access-flags-访问权限标志" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.6 access_flags（访问权限标志）"><!---->8.6 access_flags（访问权限标志）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-7-this-class、super-class、interfaces" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.7 this_class、super_class、interfaces"><!---->8.7 this_class、super_class、interfaces<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-8-字段-成员变量" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.8 字段（成员变量）"><!---->8.8 字段（成员变量）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-8-1-字段在-class-文件中的格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.8.1 字段在 class 文件中的格式"><!---->8.8.1 字段在 class 文件中的格式<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#字段描述符" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="字段描述符"><!---->字段描述符<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-8-2-字段的访问权限和基本属性的标志" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.8.2 字段的访问权限和基本属性的标志"><!---->8.8.2 字段的访问权限和基本属性的标志<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-8-3-字段在-class-文件中的解析举例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.8.3 字段在 class 文件中的解析举例"><!---->8.8.3 字段在 class 文件中的解析举例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-9-方法-成员方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.9 方法（成员方法）"><!---->8.9 方法（成员方法）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-9-1-方法在-class-文件中的格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.9.1 方法在 class 文件中的格式"><!---->8.9.1 方法在 class 文件中的格式<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#方法描述符" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="方法描述符"><!---->方法描述符<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-9-2-方法在-class-文件中的解析举例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.9.2 方法在 class 文件中的解析举例"><!---->8.9.2 方法在 class 文件中的解析举例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-属性-attribute" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10 属性（attribute）"><!---->8.10 属性（attribute）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-1-属性在-class-文件中的通用格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.1 属性在 class 文件中的通用格式"><!---->8.10.1 属性在 class 文件中的通用格式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-2-jvm-规范中预定义的属性-23-个" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.2 JVM 规范中预定义的属性（23 个）"><!---->8.10.2 JVM 规范中预定义的属性（23 个）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-code-属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3 Code 属性"><!---->8.10.3 Code 属性<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-1-code-属性的格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.1 Code 属性的格式"><!---->8.10.3.1 Code 属性的格式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-2-linenumbertable" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.2  LineNumberTable"><!---->8.10.3.2  LineNumberTable<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-3-localvariabletable" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.3  LocalVariableTable"><!---->8.10.3.3  LocalVariableTable<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-4-localvariabletypetable" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.4  LocalVariableTypeTable"><!---->8.10.3.4  LocalVariableTypeTable<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-5-stackmaptable" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.5  StackMapTable"><!---->8.10.3.5  StackMapTable<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-6-runtimevisibletypeannotations-和-runtimeinvisisbletypeannotations" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.6  RuntimeVisibleTypeAnnotations 和 RuntimeInvisisbleTypeAnnotations"><!---->8.10.3.6  RuntimeVisibleTypeAnnotations 和 RuntimeInvisisbleTypeAnnotations<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-7-栈帧" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.7  栈帧"><!---->8.10.3.7  栈帧<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-8-局部变量表-local-variable-又称本地变量表" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.8  局部变量表（local variable 又称本地变量表）"><!---->8.10.3.8  局部变量表（local variable 又称本地变量表）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-9-code-属性在-class-文件中的解析举例-slot-可复用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.10.3.9 Code 属性在 class 文件中的解析举例（Slot 可复用）"><!---->8.10.3.9 Code 属性在 class 文件中的解析举例（Slot 可复用）<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-asm-开发" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9. ASM 开发"><!---->9. ASM 开发<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-1-编程模型和核心-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.1 编程模型和核心 API"><!---->9.1 编程模型和核心 API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-2-classvisitor-开发" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.2 ClassVisitor 开发"><!---->9.2 ClassVisitor 开发<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-3-methodvisitor-开发" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.3 MethodVisitor 开发"><!---->9.3 MethodVisitor 开发<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-4-实现模拟-aop-功能" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.4 实现模拟 AOP 功能"><!---->9.4 实现模拟 AOP 功能<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/zkq/java/jvm/classloader.html" class="nav-link sidebar-link sidebar-page" arialabel="类加载、连接和初始化"><!---->类加载、连接和初始化<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/jvm/memory-allocate.html" class="nav-link sidebar-link sidebar-page" arialabel="内存分配"><!---->内存分配<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/jvm/class-exe-engine.html" class="nav-link sidebar-link sidebar-page" arialabel="字节码执行引擎"><!---->字节码执行引擎<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/jvm/gc.html" class="nav-link sidebar-link sidebar-page" arialabel="垃圾回收"><!---->垃圾回收<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/java/jvm/concurrence.html" class="nav-link sidebar-link sidebar-page" arialabel="高效并发"><!---->高效并发<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!----><!--]--></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->认识 JVM 规范（JVM 概述、字节码指令集、Class文件解析、ASM）</h1><div class="article-info"><span class="author-info" arialabel="作者🖊" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://zengkaiqiang562.github.io/" target="_blank" rel="noopener noreferrer">Zenk562</a></span><span property="author" content="Zenk562"></span></span><span class="category-info" arialabel="分类🌈" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" arialabelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category clickable" role="navigation">java</li><meta property="articleSection" content="java"></ul></span><span arialabel="标签🏷" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" arialabelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag clickable" role="navigation">java</li></ul><meta property="keywords" content="java"></span><span class="date-info" arialabel="写作日期📅" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年7月7日</span><meta property="datePublished" content="2022-07-07T15:59:00.000Z"></span><!----><span class="words-info" arialabel="字数🔠" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" arialabelledby="word"><title id="word" lang="en">word icon</title><g fill="currentColor"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></g></svg><span>约 7006 字</span><meta property="wordCount" content="7006"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_1-jvm-概述" class="router-link-active router-link-exact-active toc-link level2">1. JVM 概述</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_1-1-jvm-的主要功能" class="router-link-active router-link-exact-active toc-link level3">1.1 JVM 的主要功能</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_1-2-虚拟机是-java-平台无关的保障" class="router-link-active router-link-exact-active toc-link level3">1.2 虚拟机是 Java 平台无关的保障</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_2-jvm-规范的作用" class="router-link-active router-link-exact-active toc-link level2">2. JVM 规范的作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_3-jvm-规范文档的下载获取" class="router-link-active router-link-exact-active toc-link level2">3. JVM 规范文档的下载获取</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-jvm-规范中的主要内容" class="router-link-active router-link-exact-active toc-link level2">4. JVM 规范中的主要内容</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-1-字节码指令集" class="router-link-active router-link-exact-active toc-link level3">4.1 字节码指令集</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-2-class-文件的格式" class="router-link-active router-link-exact-active toc-link level3">4.2 Class 文件的格式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-3-数据类型和值" class="router-link-active router-link-exact-active toc-link level3">4.3 数据类型和值</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-4-运行时数据区" class="router-link-active router-link-exact-active toc-link level3">4.4 运行时数据区</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-5-栈帧" class="router-link-active router-link-exact-active toc-link level3">4.5 栈帧</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-6-特殊方法" class="router-link-active router-link-exact-active toc-link level3">4.6 特殊方法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-7-类库" class="router-link-active router-link-exact-active toc-link level3">4.7 类库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-8-异常" class="router-link-active router-link-exact-active toc-link level3">4.8 异常</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_4-9-虚拟机的启动、加载、链接和初始化" class="router-link-active router-link-exact-active toc-link level3">4.9 虚拟机的启动、加载、链接和初始化</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-字节码指令集" class="router-link-active router-link-exact-active toc-link level2">5. 字节码指令集</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-1-字节码指令集简介" class="router-link-active router-link-exact-active toc-link level3">5.1 字节码指令集简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-2-数据类型与指令集" class="router-link-active router-link-exact-active toc-link level3">5.2 数据类型与指令集</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-3-加载和存储指令" class="router-link-active router-link-exact-active toc-link level3">5.3 加载和存储指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-4-算术指令" class="router-link-active router-link-exact-active toc-link level3">5.4 算术指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-5-类型转换指令" class="router-link-active router-link-exact-active toc-link level3">5.5 类型转换指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-6-对象的创建与操作指令" class="router-link-active router-link-exact-active toc-link level3">5.6 对象的创建与操作指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-7-操作数栈管理指令" class="router-link-active router-link-exact-active toc-link level3">5.7 操作数栈管理指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-8-控制转移指令" class="router-link-active router-link-exact-active toc-link level3">5.8 控制转移指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-9-方法调用和返回指令" class="router-link-active router-link-exact-active toc-link level3">5.9 方法调用和返回指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-10-抛出异常相关的指令" class="router-link-active router-link-exact-active toc-link level3">5.10 抛出异常相关的指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-11-同步相关的指令" class="router-link-active router-link-exact-active toc-link level3">5.11 同步相关的指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-12-指令格式表-描述指令的功能-使用方式等" class="router-link-active router-link-exact-active toc-link level3">5.12 指令格式表（描述指令的功能，使用方式等）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#如何阅读指令格式表" class="router-link-active router-link-exact-active toc-link level4">如何阅读指令格式表</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_5-13-如何用字节码指令集表示-java-代码" class="router-link-active router-link-exact-active toc-link level3">5.13 如何用字节码指令集表示 Java 代码</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_6-特殊方法" class="router-link-active router-link-exact-active toc-link level2">6. 特殊方法</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_6-1-init" class="router-link-active router-link-exact-active toc-link level3">6.1 &lt;init&gt;</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_6-2-clinit" class="router-link-active router-link-exact-active toc-link level3">6.2 &lt;clinit&gt;</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_7-类库" class="router-link-active router-link-exact-active toc-link level2">7. 类库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-class-文件的格式" class="router-link-active router-link-exact-active toc-link level2">8. Class 文件的格式</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-1-class-文件概述" class="router-link-active router-link-exact-active toc-link level3">8.1 Class 文件概述</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-2-class-文件中的两种类型-无符号数、表" class="router-link-active router-link-exact-active toc-link level3">8.2 Class 文件中的两种类型（无符号数、表）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-3-classfile-结构" class="router-link-active router-link-exact-active toc-link level3">8.3 ClassFile 结构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-4-查看-java-源码对应的-class-字节码文件的三种方式" class="router-link-active router-link-exact-active toc-link level3">8.4 查看 Java 源码对应的 Class 字节码文件的三种方式</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-4-1-在-eclipse-中查看-class-文件" class="router-link-active router-link-exact-active toc-link level4">8.4.1 在 Eclipse 中查看 class 文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-4-2-通过-javap-命令查看-class-文件" class="router-link-active router-link-exact-active toc-link level4">8.4.2 通过 javap 命令查看 class 文件</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#javap-生成的非正式-虚拟机汇编语言-的格式" class="router-link-active router-link-exact-active toc-link level5">javap 生成的非正式 “虚拟机汇编语言” 的格式：</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-4-3-通过-16-进制文件查看工具-如-winhex-查看-class-文件" class="router-link-active router-link-exact-active toc-link level4">8.4.3 通过 16 进制文件查看工具（如 winhex）查看 class 文件</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-常量池" class="router-link-active router-link-exact-active toc-link level3">8.5 常量池</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-1-常量池项在-class-文件中的通用格式" class="router-link-active router-link-exact-active toc-link level4">8.5.1 常量池项在 class 文件中的通用格式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-常量池项的类型-tag" class="router-link-active router-link-exact-active toc-link level4">8.5.2 常量池项的类型（tag）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-1-constant-class-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.1 CONSTANT_Class_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-2-constant-fieldref-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.2 CONSTANT_Fieldref_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-3-constant-methodref-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.3 CONSTANT_Methodref_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-4-constant-interfacemethodref-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.4 CONSTANT_InterfaceMethodref_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-5-constant-string-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.5 CONSTANT_String_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-6-constant-integer-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.6 CONSTANT_Integer_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-7-constant-float-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.7 CONSTANT_Float_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-8-constant-long-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.8 CONSTANT_Long_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-9-constant-double-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.9 CONSTANT_Double_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-10-constant-nameandtype-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.10 CONSTANT_NameAndType_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-11-constant-utf8-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.11 CONSTANT_Utf8_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-12-constant-methodhandle-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.12 CONSTANT_MethodHandle_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-13-constant-methodtype-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.13 CONSTANT_MethodType_info 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-2-14-constant-invokedynamic-info-类型" class="router-link-active router-link-exact-active toc-link level5">8.5.2.14 CONSTANT_InvokeDynamic_info 类型</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-5-3-如何确定-class-文件中常量池的结束位置" class="router-link-active router-link-exact-active toc-link level4">8.5.3 如何确定 class 文件中常量池的结束位置</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-6-access-flags-访问权限标志" class="router-link-active router-link-exact-active toc-link level3">8.6 access_flags（访问权限标志）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-7-this-class、super-class、interfaces" class="router-link-active router-link-exact-active toc-link level3">8.7 this_class、super_class、interfaces</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-8-字段-成员变量" class="router-link-active router-link-exact-active toc-link level3">8.8 字段（成员变量）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-8-1-字段在-class-文件中的格式" class="router-link-active router-link-exact-active toc-link level4">8.8.1 字段在 class 文件中的格式</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#字段描述符" class="router-link-active router-link-exact-active toc-link level5">字段描述符</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-8-2-字段的访问权限和基本属性的标志" class="router-link-active router-link-exact-active toc-link level4">8.8.2 字段的访问权限和基本属性的标志</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-8-3-字段在-class-文件中的解析举例" class="router-link-active router-link-exact-active toc-link level4">8.8.3 字段在 class 文件中的解析举例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-9-方法-成员方法" class="router-link-active router-link-exact-active toc-link level3">8.9 方法（成员方法）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-9-1-方法在-class-文件中的格式" class="router-link-active router-link-exact-active toc-link level4">8.9.1 方法在 class 文件中的格式</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#方法描述符" class="router-link-active router-link-exact-active toc-link level5">方法描述符</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-9-2-方法在-class-文件中的解析举例" class="router-link-active router-link-exact-active toc-link level4">8.9.2 方法在 class 文件中的解析举例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-属性-attribute" class="router-link-active router-link-exact-active toc-link level3">8.10 属性（attribute）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-1-属性在-class-文件中的通用格式" class="router-link-active router-link-exact-active toc-link level4">8.10.1 属性在 class 文件中的通用格式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-2-jvm-规范中预定义的属性-23-个" class="router-link-active router-link-exact-active toc-link level4">8.10.2 JVM 规范中预定义的属性（23 个）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-code-属性" class="router-link-active router-link-exact-active toc-link level4">8.10.3 Code 属性</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-1-code-属性的格式" class="router-link-active router-link-exact-active toc-link level5">8.10.3.1 Code 属性的格式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-2-linenumbertable" class="router-link-active router-link-exact-active toc-link level5">8.10.3.2  LineNumberTable</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-3-localvariabletable" class="router-link-active router-link-exact-active toc-link level5">8.10.3.3  LocalVariableTable</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-4-localvariabletypetable" class="router-link-active router-link-exact-active toc-link level5">8.10.3.4  LocalVariableTypeTable</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-5-stackmaptable" class="router-link-active router-link-exact-active toc-link level5">8.10.3.5  StackMapTable</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-6-runtimevisibletypeannotations-和-runtimeinvisisbletypeannotations" class="router-link-active router-link-exact-active toc-link level5">8.10.3.6  RuntimeVisibleTypeAnnotations 和 RuntimeInvisisbleTypeAnnotations</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-7-栈帧" class="router-link-active router-link-exact-active toc-link level5">8.10.3.7  栈帧</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-8-局部变量表-local-variable-又称本地变量表" class="router-link-active router-link-exact-active toc-link level5">8.10.3.8  局部变量表（local variable 又称本地变量表）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_8-10-3-9-code-属性在-class-文件中的解析举例-slot-可复用" class="router-link-active router-link-exact-active toc-link level5">8.10.3.9 Code 属性在 class 文件中的解析举例（Slot 可复用）</a></li><!----><!--]--></ul><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-asm-开发" class="router-link-active router-link-exact-active toc-link level2">9. ASM 开发</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-1-编程模型和核心-api" class="router-link-active router-link-exact-active toc-link level3">9.1 编程模型和核心 API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-2-classvisitor-开发" class="router-link-active router-link-exact-active toc-link level3">9.2 ClassVisitor 开发</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-3-methodvisitor-开发" class="router-link-active router-link-exact-active toc-link level3">9.3 MethodVisitor 开发</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/java/jvm/jvm-spec.html#_9-4-实现模拟-aop-功能" class="router-link-active router-link-exact-active toc-link level3">9.4 实现模拟 AOP 功能</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h2 id="_1-jvm-概述" tabindex="-1"><a class="header-anchor" href="#_1-jvm-概述" aria-hidden="true">#</a> 1. <code>JVM</code> 概述</h2><p><code>JVM</code>：<code>Java Virtual Machine</code>，也就是 <code>Java</code> 虚拟机</p><blockquote><p>所谓虚拟机是指：通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的计算机系统。</p><p>即：虚拟机是一个计算机系统。这种计算机系统运行在完全隔离的环境中，且它的硬件系统功能是通过软件模拟出来的。</p></blockquote><p><code>JVM</code> 通过软件来模拟 <code>Java</code> 字节码的指令集，是 <code>Java</code> 程序的运行环境。</p><h3 id="_1-1-jvm-的主要功能" tabindex="-1"><a class="header-anchor" href="#_1-1-jvm-的主要功能" aria-hidden="true">#</a> 1.1 <code>JVM</code> 的主要功能</h3><p><code>JVM</code> 的主要功能包括：</p><ol><li>通过 <code>ClassLoader</code> 寻找和装载 <code>class</code> 文件；</li><li>解释字节码成为指令，并执行，同时提供 <code>class</code> 文件的运行环境；</li><li>进行运行期间的内存分配和垃圾回收；</li><li>提供与硬件交互的平台。</li></ol><p><img src="/assets/01.22249290.png" alt="" loading="lazy"></p><h3 id="_1-2-虚拟机是-java-平台无关的保障" tabindex="-1"><a class="header-anchor" href="#_1-2-虚拟机是-java-平台无关的保障" aria-hidden="true">#</a> 1.2 虚拟机是 <code>Java</code> 平台无关的保障</h3><p><code>Java</code> 程序只跟 <code>Java</code> 虚拟机相关，跟平台无关。</p><blockquote><p>跟平台相关的是 <code>Java</code> 虚拟机本身。</p></blockquote><p><img src="/assets/02.1fa47760.png" alt="" loading="lazy"></p><h2 id="_2-jvm-规范的作用" tabindex="-1"><a class="header-anchor" href="#_2-jvm-规范的作用" aria-hidden="true">#</a> 2. <code>JVM</code> 规范的作用</h2><p><code>Java</code> 虚拟机规范为不同的硬件平台提供了一种编译 <code>Java</code> 技术代码的规范。</p><blockquote><p><code>JVM</code> 规范只是对编译出来的 <code>class</code> 字节码文件进行规范，而并没有对 <code>Java</code> 源文件进行规范。</p><p>也就是说 <code>Java</code> 虚拟机只认 <code>class</code> 字节码文件，不认 <code>Java</code> 源文件。</p><p><code>Java</code> 虚拟机不关心 <code>class</code> 字节码文件是怎么来的 ，只关心 <code>class</code> 字节码文件符不符合 <code>JVM</code> 规范。</p><p>即使开发语言不是 <code>Java</code>，只要能编译生成符合 <code>JVM</code> 规范的 <code>class</code> 字节码文件，那么这种开发语言也是可以使用的。</p><p>即 <code>Java</code> 虚拟机不仅实现了平台无关，也实现了开发语言无关。</p></blockquote><p><img src="/assets/03.d46ad5d2.png" alt="" loading="lazy"></p><p><code>JVM</code> 规范使 <code>Java</code> 软件独立于平台，因为编译是针对作为虚拟机的 “一般机器” 而做。</p><p>这个作为虚拟机的 “一般机器” 可以是用软件模拟并运行于各种现存的计算机系统；也可以是用硬件来实现。</p><blockquote><p><code>JVM</code> 规范只是对 <code>Java</code> 虚拟机的实现提出了一些必须遵循的要求，并没有规定如何去实现 <code>Java</code> 虚拟机。因此，不同厂商实现的 <code>Java</code> 虚拟机可能是不同的。</p></blockquote><h2 id="_3-jvm-规范文档的下载获取" tabindex="-1"><a class="header-anchor" href="#_3-jvm-规范文档的下载获取" aria-hidden="true">#</a> 3. <code>JVM</code> 规范文档的下载获取</h2><p><img src="/assets/04.dc041b5c.png" alt="" loading="lazy"></p><blockquote><p><code>Java 8</code> 版本的虚拟机在网上有中文版的。</p><p><code>Java 8</code> 和 <code>Java 13</code> 版本的 <code>JVM</code> 规范文档基本上是一样的（在 <code>Java 13</code> 版本中的第 <code>5</code> 章多出了 <code>Module</code> 小节）。</p></blockquote><h2 id="_4-jvm-规范中的主要内容" tabindex="-1"><a class="header-anchor" href="#_4-jvm-规范中的主要内容" aria-hidden="true">#</a> 4. <code>JVM</code> 规范中的主要内容</h2><p>这里介绍 <code>Java SE8</code> 虚拟机规范文档（中文版）中的主要内容：</p><ol><li>字节码指令集（相当于中央处理器 <code>CPU</code>）</li><li><code>Class</code> 文件的格式</li><li>数据类型和值</li><li>运行时数据区</li><li>栈帧</li><li>特殊方法</li><li>类库</li><li>异常</li><li>虚拟机的启动、加载、链接和初始化</li></ol><h3 id="_4-1-字节码指令集" tabindex="-1"><a class="header-anchor" href="#_4-1-字节码指令集" aria-hidden="true">#</a> 4.1 字节码指令集</h3><p><code>class</code> 字节码指令集的相关内容可参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中的第 <code>2.11</code> 节、第 <code>6</code> 章、第 <code>7</code> 章。</p><p><img src="/assets/05.84e20d3c.png" alt="" loading="lazy"></p><p>详见 <a href="#_5-%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4%E9%9B%86"><code>5.</code> 字节码指令集</a></p><h3 id="_4-2-class-文件的格式" tabindex="-1"><a class="header-anchor" href="#_4-2-class-文件的格式" aria-hidden="true">#</a> 4.2 <code>Class</code> 文件的格式</h3><p>参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中第 <code>4</code> 章内容</p><p>详见 <a href="#_8-class-%E6%96%87%E4%BB%B6%E7%9A%84%E6%A0%BC%E5%BC%8F"><code>8. Class</code> 文件的格式</a></p><h3 id="_4-3-数据类型和值" tabindex="-1"><a class="header-anchor" href="#_4-3-数据类型和值" aria-hidden="true">#</a> 4.3 数据类型和值</h3><p>参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中第 <code>2.2</code>、<code>2.3</code>、<code>2.4</code> 节内容</p><p><img src="/assets/20.bf21f2f6.png" alt="" loading="lazy"></p><h3 id="_4-4-运行时数据区" tabindex="-1"><a class="header-anchor" href="#_4-4-运行时数据区" aria-hidden="true">#</a> 4.4 运行时数据区</h3><p>参考 《内存分配》 中的 <a href="/zkq/java/jvm/memory-allocate.html#_1-1-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA-%E5%8D%B3%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F-%E5%8F%88%E7%A7%B0-jvm-%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84" class="">运行时数据区</a></p><h3 id="_4-5-栈帧" tabindex="-1"><a class="header-anchor" href="#_4-5-栈帧" aria-hidden="true">#</a> 4.5 栈帧</h3><p>参考本文章中的 <a href="#_8-10-3-7-%E6%A0%88%E5%B8%A7">栈帧</a></p><p>参考 《内存分配》 中的 <a href="/zkq/java/jvm/memory-allocate.html#_1-1-2-java-%E6%A0%88-%E5%8F%88%E7%A7%B0-java-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88-%E6%88%96%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88" class=""><code>Java</code> 栈</a></p><p>参考 《字节码执行引擎》 中的 <a href="/zkq/java/jvm/class-exe-engine.html#_2-%E6%A0%88%E5%B8%A7" class="">栈帧</a></p><h3 id="_4-6-特殊方法" tabindex="-1"><a class="header-anchor" href="#_4-6-特殊方法" aria-hidden="true">#</a> 4.6 特殊方法</h3><p>参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中第 <code>2.9</code> 节内容</p><p>详见 <a href="#_6-%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95"><code>6.</code> 特殊方法</a></p><h3 id="_4-7-类库" tabindex="-1"><a class="header-anchor" href="#_4-7-类库" aria-hidden="true">#</a> 4.7 类库</h3><p>详见 <a href="#_7-%E7%B1%BB%E5%BA%93"><code>7.</code> 类库</a></p><h3 id="_4-8-异常" tabindex="-1"><a class="header-anchor" href="#_4-8-异常" aria-hidden="true">#</a> 4.8 异常</h3><p>参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中第 <code>2.10</code> 节内容</p><h3 id="_4-9-虚拟机的启动、加载、链接和初始化" tabindex="-1"><a class="header-anchor" href="#_4-9-虚拟机的启动、加载、链接和初始化" aria-hidden="true">#</a> 4.9 虚拟机的启动、加载、链接和初始化</h3><p>参考 <a href="/zkq/java/jvm/classloader.html" class="">《类加载、连接和初始化》</a></p><h2 id="_5-字节码指令集" tabindex="-1"><a class="header-anchor" href="#_5-字节码指令集" aria-hidden="true">#</a> 5. 字节码指令集</h2><h3 id="_5-1-字节码指令集简介" tabindex="-1"><a class="header-anchor" href="#_5-1-字节码指令集简介" aria-hidden="true">#</a> 5.1 字节码指令集简介</h3><p><code>Java</code> 虚拟机的指令由一个字节长度的、代表着某种特定操作含义的 <strong>操作码</strong>（<code>opcode</code>）以及跟随其后的 <code>0</code> 至多个代表此操作所需参数的 <strong>操作数</strong>（<code>operand</code>）所构成。</p><blockquote><p>虚拟机中许多指令并不包含操作数，只有一个操作码。</p></blockquote><blockquote><p>我们常说的字节码指令其实就是这里的操作码。</p></blockquote><h3 id="_5-2-数据类型与指令集" tabindex="-1"><a class="header-anchor" href="#_5-2-数据类型与指令集" aria-hidden="true">#</a> 5.2 数据类型与指令集</h3><p><code>JVM</code> 根据不同的数据类型提供不同的字节码指令。</p><p>如下表所示：</p><div class="language-text ext-text"><pre class="language-text"><code>第 1 列的 Txxx 中的 T 相当于泛型参数，
即数据类型不同，T 的取值不同。如：对 byte 类型，Tipush 即为 bipush
</code></pre></div><p><img src="/assets/06.4ce4570d.png" alt="" loading="lazy"></p><h3 id="_5-3-加载和存储指令" tabindex="-1"><a class="header-anchor" href="#_5-3-加载和存储指令" aria-hidden="true">#</a> 5.3 加载和存储指令</h3><p><img src="/assets/07.34a62204.png" alt="" loading="lazy"></p><h3 id="_5-4-算术指令" tabindex="-1"><a class="header-anchor" href="#_5-4-算术指令" aria-hidden="true">#</a> 5.4 算术指令</h3><p><img src="/assets/08.74f3b741.png" alt="" loading="lazy"></p><h3 id="_5-5-类型转换指令" tabindex="-1"><a class="header-anchor" href="#_5-5-类型转换指令" aria-hidden="true">#</a> 5.5 类型转换指令</h3><p><img src="/assets/09.dc22e849.png" alt="" loading="lazy"></p><h3 id="_5-6-对象的创建与操作指令" tabindex="-1"><a class="header-anchor" href="#_5-6-对象的创建与操作指令" aria-hidden="true">#</a> 5.6 对象的创建与操作指令</h3><p><img src="/assets/10.f354c89f.png" alt="" loading="lazy"></p><h3 id="_5-7-操作数栈管理指令" tabindex="-1"><a class="header-anchor" href="#_5-7-操作数栈管理指令" aria-hidden="true">#</a> 5.7 操作数栈管理指令</h3><p><img src="/assets/11.73fdde84.png" alt="" loading="lazy"></p><h3 id="_5-8-控制转移指令" tabindex="-1"><a class="header-anchor" href="#_5-8-控制转移指令" aria-hidden="true">#</a> 5.8 控制转移指令</h3><p><img src="/assets/12.85a3fca4.png" alt="" loading="lazy"></p><h3 id="_5-9-方法调用和返回指令" tabindex="-1"><a class="header-anchor" href="#_5-9-方法调用和返回指令" aria-hidden="true">#</a> 5.9 方法调用和返回指令</h3><p><img src="/assets/13.3fe6ffef.png" alt="" loading="lazy"></p><h3 id="_5-10-抛出异常相关的指令" tabindex="-1"><a class="header-anchor" href="#_5-10-抛出异常相关的指令" aria-hidden="true">#</a> 5.10 抛出异常相关的指令</h3><p><img src="/assets/14.597a3a91.png" alt="" loading="lazy"></p><h3 id="_5-11-同步相关的指令" tabindex="-1"><a class="header-anchor" href="#_5-11-同步相关的指令" aria-hidden="true">#</a> 5.11 同步相关的指令</h3><p><img src="/assets/15.f58621b5.png" alt="" loading="lazy"></p><h3 id="_5-12-指令格式表-描述指令的功能-使用方式等" tabindex="-1"><a class="header-anchor" href="#_5-12-指令格式表-描述指令的功能-使用方式等" aria-hidden="true">#</a> 5.12 指令格式表（描述指令的功能，使用方式等）</h3><p>通过指令格式表对指令进行描述，告诉你如何使用指令，指令格式表如下图所示：</p><div class="language-text ext-text"><pre class="language-text"><code>指令格式表中描述了指令的功能，使用方式，注意事项等。
</code></pre></div><p><img src="/assets/16.72f67346.png" alt="" loading="lazy"></p><blockquote><p>上表中，助记符就是字节码指令（助记符是给人看的）。操作码就是字节码指令对应的编码（给机器识别的）。</p><p>指令集中的指令都会以上表为模板进行描述。</p></blockquote><h4 id="如何阅读指令格式表" tabindex="-1"><a class="header-anchor" href="#如何阅读指令格式表" aria-hidden="true">#</a> 如何阅读指令格式表</h4><p>下面举例说明如何阅读指令格式表中对指令的描述。</p><blockquote><p>实际开发中，可以在 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中第 <code>6.5</code> 节中查找具体指令的格式表</p></blockquote><p><img src="/assets/17.b658f292.png" alt="" loading="lazy"></p><p><img src="/assets/18.a058d7f5.png" alt="" loading="lazy"></p><h3 id="_5-13-如何用字节码指令集表示-java-代码" tabindex="-1"><a class="header-anchor" href="#_5-13-如何用字节码指令集表示-java-代码" aria-hidden="true">#</a> 5.13 如何用字节码指令集表示 <code>Java</code> 代码</h3><blockquote><p>如果对某些字节码指令不知道什么时候用到，可以参数 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中第 <code>3</code> 章的内容，查看字节码指令对应的 <code>Java</code> 代码是什么样的。</p></blockquote><p><img src="/assets/19.9f841536.png" alt="" loading="lazy"></p><h2 id="_6-特殊方法" tabindex="-1"><a class="header-anchor" href="#_6-特殊方法" aria-hidden="true">#</a> 6. 特殊方法</h2><h3 id="_6-1-init" tabindex="-1"><a class="header-anchor" href="#_6-1-init" aria-hidden="true">#</a> 6.1 <code>&lt;init&gt;</code></h3><p>实例初始化方法，通过 <code>JVM</code> 的 <a href="#_5-9-%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E5%92%8C%E8%BF%94%E5%9B%9E%E6%8C%87%E4%BB%A4"><code>invokespecial</code> 指令</a> 来调用</p><blockquote><p><code>&lt;init&gt;</code> 方法并不是指 <code>Java</code> 代码中定义的构造方法。</p><p><code>Java</code> 代码中定义的构造方法可以理解成是 <code>JVM</code> 在执行完 <code>&lt;init&gt;</code> 方法，创建了实例对象之后，给程序员提供的一种回调方法。</p></blockquote><h3 id="_6-2-clinit" tabindex="-1"><a class="header-anchor" href="#_6-2-clinit" aria-hidden="true">#</a> 6.2 <code>&lt;clinit&gt;</code></h3><p>类或接口的初始化方法，不包含参数，返回 <code>void</code>。</p><h2 id="_7-类库" tabindex="-1"><a class="header-anchor" href="#_7-类库" aria-hidden="true">#</a> 7. 类库</h2><p><img src="/assets/21.40322696.png" alt="" loading="lazy"></p><h2 id="_8-class-文件的格式" tabindex="-1"><a class="header-anchor" href="#_8-class-文件的格式" aria-hidden="true">#</a> 8. <code>Class</code> 文件的格式</h2><h3 id="_8-1-class-文件概述" tabindex="-1"><a class="header-anchor" href="#_8-1-class-文件概述" aria-hidden="true">#</a> 8.1 <code>Class</code> 文件概述</h3><p><code>Class</code> 文件是 <code>JVM</code> 的输入；是 <code>JVM</code> 实现平台无关、语言无关的基础。</p><blockquote><p><code>Java</code> 虚拟机规范中定义了 <code>Class</code> 文件的结构（参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中第 <code>4</code> 章内容）。</p></blockquote><p><code>Class</code> 文件是一组以 <code>8</code> 字节为单位的字节流。文件中的各个数据项目按指定的顺序紧凑排列。</p><blockquote><p>对于占用空间大于 <code>8</code> 字节的数据项，按照高位在前的方式分割成多个 <code>8</code> 字节进行存储。</p></blockquote><h3 id="_8-2-class-文件中的两种类型-无符号数、表" tabindex="-1"><a class="header-anchor" href="#_8-2-class-文件中的两种类型-无符号数、表" aria-hidden="true">#</a> 8.2 <code>Class</code> 文件中的两种类型（无符号数、表）</h3><p>总的来说，<code>Class</code> 文件中只有两种类型：</p><ol><li><p><strong>无符号数：</strong> 即基本数据类型。以 <code>u1</code>、<code>u2</code>、<code>u4</code>、<code>u8</code> 来代表几个字节的无符号数。</p><blockquote><p><code>u1</code> 代表 <code>1</code> 字节的无符号数，...，<code>u8</code> 代表 <code>8</code> 字节的无符号数。</p></blockquote></li><li><p><strong>表：</strong> 由多个无符号数和其他表构成的复合数据类型。通常以 &quot;<code>_info</code>&quot; 结尾。</p></li></ol><h3 id="_8-3-classfile-结构" tabindex="-1"><a class="header-anchor" href="#_8-3-classfile-结构" aria-hidden="true">#</a> 8.3 <code>ClassFile</code> 结构</h3><p><img src="/assets/22.b63b367e.png" alt="" loading="lazy"></p><h3 id="_8-4-查看-java-源码对应的-class-字节码文件的三种方式" tabindex="-1"><a class="header-anchor" href="#_8-4-查看-java-源码对应的-class-字节码文件的三种方式" aria-hidden="true">#</a> 8.4 查看 <code>Java</code> 源码对应的 <code>Class</code> 字节码文件的三种方式</h3><h4 id="_8-4-1-在-eclipse-中查看-class-文件" tabindex="-1"><a class="header-anchor" href="#_8-4-1-在-eclipse-中查看-class-文件" aria-hidden="true">#</a> 8.4.1 在 <code>Eclipse</code> 中查看 <code>class</code> 文件</h4><p>在 <code>Eclipse</code> 的 <code>Navigator</code> 视图中找到 <code>class</code> 文件，打开查看即可。</p><blockquote><p>此方式查看的 <code>class</code> 文件不完整。</p></blockquote><p><img src="/assets/23.2e423a9a.png" alt="" loading="lazy"></p><h4 id="_8-4-2-通过-javap-命令查看-class-文件" tabindex="-1"><a class="header-anchor" href="#_8-4-2-通过-javap-命令查看-class-文件" aria-hidden="true">#</a> 8.4.2 通过 <code>javap</code> 命令查看 <code>class</code> 文件</h4><p>在 <code>class</code> 文件所在的 <code>bin</code> 目录下执行 &quot;<code>javap -verbose</code> 全路径类名&quot; 查看 <code>class</code> 文件。</p><blockquote><p>此方式查看的 <code>class</code> 文件是完整的。</p></blockquote><p><img src="/assets/24.6babacdf.png" alt="" loading="lazy"></p><h5 id="javap-生成的非正式-虚拟机汇编语言-的格式" tabindex="-1"><a class="header-anchor" href="#javap-生成的非正式-虚拟机汇编语言-的格式" aria-hidden="true">#</a> <code>javap</code> 生成的非正式 “虚拟机汇编语言” 的格式：</h5><p>通过 <code>javap</code> 查看 <code>class</code> 文件时，对于类中成员方法的方法体代码，采用非正式 “虚拟机汇编语言” 进行描述。格式如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;index&gt; &lt;opcode&gt; [&lt;operand1&gt; [&lt;operand2&gt; ...]] [&lt;comment&gt;]
其中：
&lt;index&gt; 是指令操作码在 code[] 数组中的索引，code[] 数组以字节形式来存储当前分发的 `Java` 虚拟机代码；
        也可以是相对于方法起始处的字节偏移量
&lt;opcode&gt; 是指令的操作码
&lt;operand&gt; 是操作数
&lt;comment&gt; 是行尾的注释
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="/assets/25.6b3b2362.png" alt="" loading="lazy"></p><p>如上图中的 <code>main</code> 方法所示：</p><div class="language-text ext-text"><pre class="language-text"><code>对于 0: getstatic   #23   // Field java/lang/System.out:Ljava/io/PrintStream; 
其中：
&lt;index&gt; 就是 0
&lt;opcode&gt; 就是助记符 getstatic（用于获取类的静态字段值）
&lt;operand&gt; 只有一个，就是 #23（表示 Constant Pool 常量池中的编号）
&lt;comment&gt; 就是 // 后面的内容
这条非正式 “虚拟机汇编语言” 的含义就是：将静态字段值 System.out 插入到操作数栈的栈顶
</code></pre></div><h4 id="_8-4-3-通过-16-进制文件查看工具-如-winhex-查看-class-文件" tabindex="-1"><a class="header-anchor" href="#_8-4-3-通过-16-进制文件查看工具-如-winhex-查看-class-文件" aria-hidden="true">#</a> 8.4.3 通过 <code>16</code> 进制文件查看工具（如 <code>winhex</code>）查看 <code>class</code> 文件</h4><p><img src="/assets/26.38906506.png" alt="" loading="lazy"></p><p>参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 第 <code>4.1</code> 节内容，结合 <code>ClassFile</code> 结构，对 <code>winhex</code> 中显示的 <code>Hello.class</code> 文件的 <code>16</code> 进制数据分析如下：</p><div class="language-text ext-text"><pre class="language-text"><code>1. 最开始的 4 字节（u4）是 magic（魔数），JVM 规范要求固定为 0xCAFEBABE
2. 接下来的 2 字节（u2）是 minor_version（副版本号），即 0x0000，对应十进制 0
3. 接下来的 2 字节（u2）是 major_version（主版本号），即 0x0034，对应十进制 16*3+4 = 52
    因为 JDK 版本为 1.k（k&gt;=2）时，对应的 class 文件版本号范围是 45.0 ~ 44+k.0，所以这里的版本号是 1.8.0（44+8 = 52）
4. 接下来的 2 字节（u2）是 constant_pool_count，表示常量池的大小，即 0x0035，对应十进制 53
    注意：常量池的大小不是指常量池所占的内存字节数，而是指常量池中的成员个数。
    常量池中的成员索引为 [0, constant_pool_count - 1]，
    常量池中的 #0 不是一个有效的常量池项，仅用来表示 “不引用任何一个常量池项”。
    也就是说，当 constant_pool_count = 53 时，常量池中有效的常量索引为 #1 ~ #52
</code></pre></div><h3 id="_8-5-常量池" tabindex="-1"><a class="header-anchor" href="#_8-5-常量池" aria-hidden="true">#</a> 8.5 常量池</h3><p><code>Java</code> 虚拟机指令不依赖于类、接口、类的实例对象、或数组的运行时布局，而是依赖常量池表中的符号信息。</p><blockquote><p>即通过指令集中的指令来描述 <code>Java</code> 代码时，需要依赖 <code>class</code> 文件中常量池内保存的符号信息。</p></blockquote><h4 id="_8-5-1-常量池项在-class-文件中的通用格式" tabindex="-1"><a class="header-anchor" href="#_8-5-1-常量池项在-class-文件中的通用格式" aria-hidden="true">#</a> 8.5.1 常量池项在 <code>class</code> 文件中的通用格式</h4><p>常量池表中的所有的项都具有如下通用格式：</p><div class="language-text ext-text"><pre class="language-text"><code>cp_info {
    u1 tag;
    u2 info[];
}
</code></pre></div><p>常量池表中，一个 <code>cp_info</code> 表示一个常量池项，<code>ClassFile</code> 结构中的常量池数组就是由多个 <code>cp_info</code> 构成的。</p><p>常量池表中，存在多个不同类型的 <code>cp_info</code>（常量池项）。</p><blockquote><p><code>cp_info</code> 中占 <code>1</code> 字节（u1）的 <code>tag</code> 表示 <code>cp_info</code> 的类型。</p><p><code>tag</code> 不同，<code>cp_info</code> 成员结构（<code>info[]</code>）也不同，<code>cp_info</code> 所占的内存大小也不同。</p></blockquote><blockquote><p>注意：通用格式中的 &quot;<code>u1 info[]</code>&quot; 并不是说 <code>cp_info</code> 中 <code>tag</code> 之后 <code>info</code> 数组只占 <code>1</code> 字节。</p><p>&quot;<code>u1 info[]</code>&quot; 没有明确的含义，必须根据不同的 tag 值，才能确定 <code>info[]</code> 表示的成员结构和所占的内存大小。</p></blockquote><h4 id="_8-5-2-常量池项的类型-tag" tabindex="-1"><a class="header-anchor" href="#_8-5-2-常量池项的类型-tag" aria-hidden="true">#</a> 8.5.2 常量池项的类型（<code>tag</code>）</h4><p><img src="/assets/27.74c8d9f2.png" alt="" loading="lazy"></p><blockquote><p>上图所示的表中给出了 <code>cp_info</code> 常量池项的不同 <code>tag</code> 类型，以及对应的 <code>tag</code> 数值。</p></blockquote><h5 id="_8-5-2-1-constant-class-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-1-constant-class-info-类型" aria-hidden="true">#</a> 8.5.2.1 <code>CONSTANT_Class_info</code> 类型</h5><p><img src="/assets/28.0e56108a.png" alt="" loading="lazy"></p><h5 id="_8-5-2-2-constant-fieldref-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-2-constant-fieldref-info-类型" aria-hidden="true">#</a> 8.5.2.2 <code>CONSTANT_Fieldref_info</code> 类型</h5><h5 id="_8-5-2-3-constant-methodref-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-3-constant-methodref-info-类型" aria-hidden="true">#</a> 8.5.2.3 <code>CONSTANT_Methodref_info</code> 类型</h5><h5 id="_8-5-2-4-constant-interfacemethodref-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-4-constant-interfacemethodref-info-类型" aria-hidden="true">#</a> 8.5.2.4 <code>CONSTANT_InterfaceMethodref_info</code> 类型</h5><p><img src="/assets/29.5cc94667.png" alt="" loading="lazy"></p><h5 id="_8-5-2-5-constant-string-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-5-constant-string-info-类型" aria-hidden="true">#</a> 8.5.2.5 <code>CONSTANT_String_info</code> 类型</h5><p><img src="/assets/30.74f4d356.png" alt="" loading="lazy"></p><h5 id="_8-5-2-6-constant-integer-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-6-constant-integer-info-类型" aria-hidden="true">#</a> 8.5.2.6 <code>CONSTANT_Integer_info</code> 类型</h5><h5 id="_8-5-2-7-constant-float-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-7-constant-float-info-类型" aria-hidden="true">#</a> 8.5.2.7 <code>CONSTANT_Float_info</code> 类型</h5><p><img src="/assets/31.54bc7d6d.png" alt="" loading="lazy"></p><h5 id="_8-5-2-8-constant-long-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-8-constant-long-info-类型" aria-hidden="true">#</a> 8.5.2.8 <code>CONSTANT_Long_info</code> 类型</h5><h5 id="_8-5-2-9-constant-double-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-9-constant-double-info-类型" aria-hidden="true">#</a> 8.5.2.9 <code>CONSTANT_Double_info</code> 类型</h5><p><img src="/assets/32.b8db700a.png" alt="" loading="lazy"></p><h5 id="_8-5-2-10-constant-nameandtype-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-10-constant-nameandtype-info-类型" aria-hidden="true">#</a> 8.5.2.10 <code>CONSTANT_NameAndType_info</code> 类型</h5><p><img src="/assets/33.49a4b358.png" alt="" loading="lazy"></p><h5 id="_8-5-2-11-constant-utf8-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-11-constant-utf8-info-类型" aria-hidden="true">#</a> 8.5.2.11 <code>CONSTANT_Utf8_info</code> 类型</h5><p><img src="/assets/34.55f63d0b.png" alt="" loading="lazy"></p><h5 id="_8-5-2-12-constant-methodhandle-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-12-constant-methodhandle-info-类型" aria-hidden="true">#</a> 8.5.2.12 <code>CONSTANT_MethodHandle_info</code> 类型</h5><p><img src="/assets/35.fca34066.png" alt="" loading="lazy"></p><h5 id="_8-5-2-13-constant-methodtype-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-13-constant-methodtype-info-类型" aria-hidden="true">#</a> 8.5.2.13 <code>CONSTANT_MethodType_info</code> 类型</h5><p><img src="/assets/36.5c23bc18.png" alt="" loading="lazy"></p><h5 id="_8-5-2-14-constant-invokedynamic-info-类型" tabindex="-1"><a class="header-anchor" href="#_8-5-2-14-constant-invokedynamic-info-类型" aria-hidden="true">#</a> 8.5.2.14 <code>CONSTANT_InvokeDynamic_info</code> 类型</h5><p><img src="/assets/37.8a1dda89.png" alt="" loading="lazy"></p><h4 id="_8-5-3-如何确定-class-文件中常量池的结束位置" tabindex="-1"><a class="header-anchor" href="#_8-5-3-如何确定-class-文件中常量池的结束位置" aria-hidden="true">#</a> 8.5.3 如何确定 <code>class</code> 文件中常量池的结束位置</h4><p><img src="/assets/38.e76ace96.png" alt="" loading="lazy"></p><h3 id="_8-6-access-flags-访问权限标志" tabindex="-1"><a class="header-anchor" href="#_8-6-access-flags-访问权限标志" aria-hidden="true">#</a> 8.6 <code>access_flags</code>（访问权限标志）</h3><p><img src="/assets/39.6bd35bcc.png" alt="" loading="lazy"></p><h3 id="_8-7-this-class、super-class、interfaces" tabindex="-1"><a class="header-anchor" href="#_8-7-this-class、super-class、interfaces" aria-hidden="true">#</a> 8.7 <code>this_class</code>、<code>super_class</code>、<code>interfaces</code></h3><p><img src="/assets/40.86118fab.png" alt="" loading="lazy"></p><p><img src="/assets/41.d2ec673a.png" alt="" loading="lazy"></p><h3 id="_8-8-字段-成员变量" tabindex="-1"><a class="header-anchor" href="#_8-8-字段-成员变量" aria-hidden="true">#</a> 8.8 字段（成员变量）</h3><p>每个字段（<code>field</code>）都通过 <code>field_info</code> 结构定义。</p><h4 id="_8-8-1-字段在-class-文件中的格式" tabindex="-1"><a class="header-anchor" href="#_8-8-1-字段在-class-文件中的格式" aria-hidden="true">#</a> 8.8.1 字段在 <code>class</code> 文件中的格式</h4><div class="language-text ext-text"><pre class="language-text"><code>field_info {
    u2              access_flags;
    u2              name_index;
    u2              descriptor_index;
    u2              attributes_count;
    attribute_info  attributes[attributes_count];
}

其中：
access_flags：表示字段的访问权限和基本属性。可以是多个权限和属性的标志的组合（位或运算）。
name_index：是对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Utf8_info，用于表示字段名。
descriptor_index：是对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Utf8_info，用于表示字段描述符。
attributes_count：表示当前字段的附加属性的数量。
attributes[]：表示附加属性表，表中每个附加属性的结构必须是 attribute_info。
</code></pre></div><h5 id="字段描述符" tabindex="-1"><a class="header-anchor" href="#字段描述符" aria-hidden="true">#</a> 字段描述符</h5><p>字段的描述符（<code>descriptor</code>）是一个用于 <strong>描述字段类型</strong> 的字符串。</p><blockquote><p>字段描述符不仅可以描述成员变量的类型，还可以描述静态变量和局部变量的类型。</p><p>即：字段描述符就是用来描述任意变量的类型的。</p></blockquote><blockquote><p>参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 第 <code>4.3.2</code> 节（字段描述符）内容。</p></blockquote><div class="language-text ext-text"><pre class="language-text"><code>// 字段描述符用于描述字段类型
FieldDescriptor:
    FieldType

// 字段类型包括：基本类型、类类型、数组类型
FieldType:
    BaseType
    ObjectType
    ArrayType

// 基本类型就是 byte/char/double/float/int/long/short/boolean 其中之一。
BaseType: one of
    B C D F I J S Z

// 类类型就是 &quot;L + 全路径类名（路径中的 &quot;.&quot; 用 &quot;/&quot; 代替） + ;&quot;
ObjectType:
    L&lt;ClassName&gt;;

// 数组类型就是 &quot;[ + 元素类型&quot;
ArrayType:
    [&lt;ComponentType&gt;

// 数组的元素类型就是 字段类型
ComponentType:
    FieldType
</code></pre></div><p>字段描述符解释表如下：</p><table><thead><tr><th style="text-align:left;"><code>FieldType</code> 中的字符</th><th style="text-align:left;">类型</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:left;"><code>B</code></td><td style="text-align:left;"><code>byte</code></td><td style="text-align:left;">字节型数</td></tr><tr><td style="text-align:left;"><code>C</code></td><td style="text-align:left;"><code>char</code></td><td style="text-align:left;">字符型数</td></tr><tr><td style="text-align:left;"><code>D</code></td><td style="text-align:left;"><code>double</code></td><td style="text-align:left;">双精度浮点数</td></tr><tr><td style="text-align:left;"><code>F</code></td><td style="text-align:left;"><code>float</code></td><td style="text-align:left;">单精度浮点数</td></tr><tr><td style="text-align:left;"><code>I</code></td><td style="text-align:left;"><code>int</code></td><td style="text-align:left;">整型数</td></tr><tr><td style="text-align:left;"><code>J</code></td><td style="text-align:left;"><code>long</code></td><td style="text-align:left;">长整数</td></tr><tr><td style="text-align:left;"><code>L&lt;ClassName&gt;</code></td><td style="text-align:left;"><code>reference</code></td><td style="text-align:left;"><code>ClassName</code> 类的实例</td></tr><tr><td style="text-align:left;"><code>S</code></td><td style="text-align:left;"><code>short</code></td><td style="text-align:left;">短整数</td></tr><tr><td style="text-align:left;"><code>Z</code></td><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;">布尔值 <code>true/false</code></td></tr><tr><td style="text-align:left;"><code>[</code></td><td style="text-align:left;"><code>reference</code></td><td style="text-align:left;">一个一维数组</td></tr></tbody></table><blockquote><p>特别注意：基本类型中，<code>long</code> 的描述符为 <code>J</code>，<code>boolean</code> 的描述符为 <code>Z</code>，其他基本类型的描述符即为大写的首字母。</p></blockquote><p>举例：</p><div class="language-text ext-text"><pre class="language-text"><code>int 变量的描述符是：I
Object 类型的实例变量的描述符是：Ljava/lang/Object;
三维数组 double d[][][] 类型的变量的描述符是：[[[D
</code></pre></div><h4 id="_8-8-2-字段的访问权限和基本属性的标志" tabindex="-1"><a class="header-anchor" href="#_8-8-2-字段的访问权限和基本属性的标志" aria-hidden="true">#</a> 8.8.2 字段的访问权限和基本属性的标志</h4><p><img src="/assets/42.67c2b4bf.png" alt="" loading="lazy"></p><blockquote><p>字段的各个访问标志是可以通过位或运算进行组合的。</p><p>如 <code>private static</code> 修饰的字段就是 <code>ACC_PRIVATE</code> 和 <code>ACC_STATIC</code> 的组合，此时 <code>access_flags</code> 的值就是 <code>0x0002 | 0x0008 = 0x000A</code></p></blockquote><h4 id="_8-8-3-字段在-class-文件中的解析举例" tabindex="-1"><a class="header-anchor" href="#_8-8-3-字段在-class-文件中的解析举例" aria-hidden="true">#</a> 8.8.3 字段在 <code>class</code> 文件中的解析举例</h4><p><img src="/assets/43.aac50210.png" alt="" loading="lazy"></p><h3 id="_8-9-方法-成员方法" tabindex="-1"><a class="header-anchor" href="#_8-9-方法-成员方法" aria-hidden="true">#</a> 8.9 方法（成员方法）</h3><p>包括实例初始化方法以及类或接口初始化方法在内的所有方法（<code>method</code>），都通过 <code>method_info</code> 结构来定义。</p><h4 id="_8-9-1-方法在-class-文件中的格式" tabindex="-1"><a class="header-anchor" href="#_8-9-1-方法在-class-文件中的格式" aria-hidden="true">#</a> 8.9.1 方法在 <code>class</code> 文件中的格式</h4><div class="language-text ext-text"><pre class="language-text"><code>method_info {
    u2              access_flags;
    u2              name_index;
    u2              descriptor_index;
    u2              attributes_count;
    attribute_info  attributes[attributes_count];
}

其中：
access_flags：表示方法的访问权限和基本属性。可以是多个权限和属性的标志的组合（位或运算）。
name_index：是对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Utf8_info，用于表示方法名。
descriptor_index：是对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Utf8_info，用于表示方法描述符。
attributes_count：表示当前方法的附加属性的数量。
attributes[]：表示附加属性表，表中每个附加属性的结构必须是 attribute_info。
</code></pre></div><h5 id="方法描述符" tabindex="-1"><a class="header-anchor" href="#方法描述符" aria-hidden="true">#</a> 方法描述符</h5><p>方法描述符（<code>descriptor</code>）是一个用于 <strong>描述参数类型和返回值类型</strong> 的字符串。</p><blockquote><p>无论某方法是静态方法还是实例方法，其方法描述符都是相同的。</p><p>也就是说无法通过一个方法的方法描述符来判断该方法是静态的还是非静态的。</p><p>尽管实例方法除了传递自身定义的参数外，还需要额外传递参数 <code>this</code>，但是这一点不是由方法描述符来表达的。</p><p>参数 <code>this</code> 的传递是由 <code>Java</code> 虚拟机中调用实例方法时所使用的字节码指令来实现的。</p></blockquote><blockquote><p>参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 第 <code>4.3.3</code> 节（方法描述符）内容。</p></blockquote><div class="language-text ext-text"><pre class="language-text"><code>// 方法描述符由参数描述符列表和返回值描述符组成
MethodDescriptor:
    ({ParameterDescriptor})ReturnDescriptor

// 参数描述符就是 字段类型
ParameterDescriptor:
    FieldType

// 返回值描述符包括： 字段类型、void 描述符
ReturnDescriptor:
    FieldType
    VoidDescriptor

// void 描述符就是 V，表示方法不返回任何值（即方法的返回值类型是 void）
VoidDescriptor:
    V
</code></pre></div><p>举例：</p><div class="language-text ext-text"><pre class="language-text"><code>Object foo(int i, double d, Thread t) {...} 方法的描述符是：(IDLjava/lang/Thread;)Ljava/lang/Object;
void foo() {...} 方法的描述符是：()V
</code></pre></div><h4 id="_8-9-2-方法在-class-文件中的解析举例" tabindex="-1"><a class="header-anchor" href="#_8-9-2-方法在-class-文件中的解析举例" aria-hidden="true">#</a> 8.9.2 方法在 <code>class</code> 文件中的解析举例</h4><p><img src="/assets/44.e83c8bd4.png" alt="" loading="lazy"></p><h3 id="_8-10-属性-attribute" tabindex="-1"><a class="header-anchor" href="#_8-10-属性-attribute" aria-hidden="true">#</a> 8.10 属性（<code>attribute</code>）</h3><p>属性（<code>attribute</code>）在 <code>class</code> 文件中的 <code>ClassFile</code> 结构、<code>field_info</code> 结构、<code>method_info</code> 结构和 <code>Code_attribute</code> 结构中都有使用。</p><h4 id="_8-10-1-属性在-class-文件中的通用格式" tabindex="-1"><a class="header-anchor" href="#_8-10-1-属性在-class-文件中的通用格式" aria-hidden="true">#</a> 8.10.1 属性在 <code>class</code> 文件中的通用格式</h4><div class="language-text ext-text"><pre class="language-text"><code>attribute_info {
    u2 attribute_name_index;
    u4 attribute_length;
    u1 info[attribute_length];
}

其中：
attribute_name_index：是对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Utf8_info，用于表示属性名。
attribute_length：给出了 info[] 数组所占的字节大小。
info[]：不同属性的 info[] 不同，参考各个属性的具体格式。
</code></pre></div><h4 id="_8-10-2-jvm-规范中预定义的属性-23-个" tabindex="-1"><a class="header-anchor" href="#_8-10-2-jvm-规范中预定义的属性-23-个" aria-hidden="true">#</a> 8.10.2 <code>JVM</code> 规范中预定义的属性（<code>23</code> 个）</h4><p><img src="/assets/45.a3e74af4.png" alt="" loading="lazy"></p><h4 id="_8-10-3-code-属性" tabindex="-1"><a class="header-anchor" href="#_8-10-3-code-属性" aria-hidden="true">#</a> 8.10.3 <code>Code</code> 属性</h4><p><code>Code</code> 属性附加方法的附加属性出现在 <code>method_info</code> 结构中。</p><p><code>Code</code> 属性中包含方法（如成员方法、实例初始化方法、类或接口初始化方法）的 <code>Java</code> 虚拟机指令，及相关的辅助信息。</p><blockquote><p>对于抽象方法（<code>abstract</code> 修饰的方法）、本地方法（<code>native</code> 修饰的方法），方法对应的 <code>method_info</code> 结构中不能有 <code>Code</code> 属性。</p><p>除 <code>native</code>、<code>abstract</code> 方法之外的其他方法的 <code>method_info</code> 中则必须有，且只能有一个 <code>Code</code> 属性。</p></blockquote><h5 id="_8-10-3-1-code-属性的格式" tabindex="-1"><a class="header-anchor" href="#_8-10-3-1-code-属性的格式" aria-hidden="true">#</a> 8.10.3.1 <code>Code</code> 属性的格式</h5><div class="language-text ext-text"><pre class="language-text"><code>Code_attribute {
    u2             attribute_name_index;
    u4             attribute_length;
    u2             max_stack;
    u2             max_locals;
    u4             code_length;
    u1             code[code_length];
    u2             exception_table_length;

    {
        u2 start_pc;
        u2 end_pc;
        u2 handler_pc;
        u2 catch_type;
    } exception_table[exception_table_length];

    u2             attributes_count;
    attribute_info attributes[attributes_count];
}

其中：
attribute_name_index：是对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Utf8_info，固定为属性名 `Code`。
attribute_length：表示从 max_stack 到 attribute_info_attributes[] 所占的字节大小。即当前 Code 属性在 class 文件中的剩余长度。
max_stack：表示当前方法在调用时，其栈帧中的操作数栈的最大深度。
max_locals：表示当前方法在调用时，其栈帧中的局部变量表内，有多少个局部变量（包括用于传递参数的局部变量）。
code_length：表示 code[] 数组所占的字节大小。（code_length 的值必须大于 0 ，即 code[] 数组不能为空）
code[]：用于保存实现当前方法的 `Java` 虚拟机代码。
exception_table_length：表示 exception_table[] 数组中的元素个数。

exception_table[]：该数组中的一个元素代表 code[] 数组中的一个异常处理器。
exception_table[] 数组中的每个元素都包含如下结构：
    start_pc 和 end_pc：当前元素代表的异常处理器在 code[] 中的有效范围是 [start_pc, end_pc]。
                        start_pc 的值表示对 code[] 中某一指令操作码的有效索引；
                        end_pc 的值要么是对 code[] 中某一指令操作码的有效索引，要么等于 code_length；
                        start_pc 必须小于 end_pc。
                        当程序计数器在范围 [start_pc, end_pc] 内时，当前元素表示的异常处理器就将生效。
    handler_pc：当前元素代表的异常处理器的起点，handler_pc 的值表示对 code[] 中某一指令操作码的有效索引。
    catch_type：若值不为 0，
                    则表示对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Class_info，
                    表示当前元素代表的异常处理器需要捕捉的异常类型。
                若值为 0，
                    则表示当任意异常抛出时，都会调用当前元素代表的异常处理器。
                    这可用于实现 finally 语句。

attributes_count：表示 attributes[] 数组中的元素个数。
attributes[]：表示与 Code 属性相关联的其他附加属性的集合。
              该数组（属性表）中的每个元素都必须是 attribute_info 类型的。
</code></pre></div><p>与 <code>Code</code> 属性相关联的附加属性（即 <code>attributes[]</code> 属性表中的属性类型）可以是：</p><ol><li><code>LineNumberTable</code></li><li><code>LocalVariableTable</code></li><li><code>LocalVariableTypeTable</code></li><li><code>StackMapTable</code></li><li><code>RuntimeVisibleTypeAnnotations</code> 和 <code>RuntimeInvisisbleTypeAnnotations</code></li></ol><h5 id="_8-10-3-2-linenumbertable" tabindex="-1"><a class="header-anchor" href="#_8-10-3-2-linenumbertable" aria-hidden="true">#</a> 8.10.3.2 <code>LineNumberTable</code></h5><div class="language-text ext-text"><pre class="language-text"><code>该属性用于确定 Java 源码与 code[] 中的 `Java` 虚拟机代码之间的对应关系。
LineNumberTable 属性中保存了一个 line_number_table[] 数组，该数组元素的结构为：
    {
        u2 start_pc;
        u2 line_number;
    }
通过数组元素可以表明：
    Java 源文件中行号为 line_number 处的源码，会在 code[] 数组中索引 start_pc 处的指令中发生变化。
</code></pre></div><h5 id="_8-10-3-3-localvariabletable" tabindex="-1"><a class="header-anchor" href="#_8-10-3-3-localvariabletable" aria-hidden="true">#</a> 8.10.3.3 <code>LocalVariableTable</code></h5><div class="language-text ext-text"><pre class="language-text"><code>在方法调用时，通过该属性来确定某个局部变量的值。
LocalVariableTable 属性中保存了一个 local_variable_table[] 数组。一个数组元素表示一个局部变量。
该数组元素的结构为：
    {
        u2 start_pc;
        u2 length;
        u2 name_index;
        u2 descriptor_index;
        u2 index;
    }
    其中：
    start_pc 和 length：start_pc 必须是对 code[] 中某一指令操作码的有效索引；
                        start_pc + length 要么是对 code[] 中某一指令操作码的有效索引，
                                要么是刚超过 code[] 数组末尾的首个索引值。
                        当程序执行到 code[] 数组的 [start_pc, start_pc+length] 范围内时，
                        该局部变量是有效的（即该局部变量必定有值存在）。
    name_index：是对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Utf8_info，
                表示该局部变量名。
    descriptor_index：是对常量池表的一个有效索引，该索引指向的常量池项的类型为 CONSTANT_Utf8_info，
                      表示该局部变量的字段描述符（即局部变量的类型）。
    index：表示在方法调用时，该局部变量在栈帧的局部变量表中的索引。
            如果栈帧的局部变量表中，index 索引处的局部变量是 long 或 double 类型，则占用 index 和 index+1 两个位置。
</code></pre></div><h5 id="_8-10-3-4-localvariabletypetable" tabindex="-1"><a class="header-anchor" href="#_8-10-3-4-localvariabletypetable" aria-hidden="true">#</a> 8.10.3.4 <code>LocalVariableTypeTable</code></h5><div class="language-text ext-text"><pre class="language-text"><code>当局部变量的类型中包含泛型（如 T 或 List&lt;T&gt; 类型的局部变量），或泛型的具体类型（如 List&lt;String&gt; 类型的局部变量）时，
这种类型的局部变量不仅会出现在 LocalVariableTable 属性中，还会出现在 LocalVariableTypeTable 属性中。

LocalVariableTypeTable 属性中保存了一个 local_variable_type_table[] 数组。一个数组元素表示一个局部变量。
该数组元素的结构为：
    {
        u2 start_pc;
        u2 length;
        u2 name_index;
        u2 signature_index;
        u2 index;
    }

与 LocalVariableTable 属性中的 local_variable_table[] 数组元素的唯一区别在于：
    local_variable_table[] 数组元素中使用 descriptor_index 指定的字段描述符来表示局部变量的类型；
    local_variable_type_table[] 数组元素中使用 signature_index 指定的字段签名来表示局部变量的类型；
</code></pre></div><blockquote><p>注意：<a href="#%E5%AD%97%E6%AE%B5%E6%8F%8F%E8%BF%B0%E7%AC%A6">字段描述符</a> 和 字段签名 是存在区别的。</p><p>字段签名参考 《<code>Java</code> 虚拟机规范 <code>Java SE 8</code> 版》 中第 <code>4.7.9</code> 节内容（<code>Signature</code> 属性）</p></blockquote><h5 id="_8-10-3-5-stackmaptable" tabindex="-1"><a class="header-anchor" href="#_8-10-3-5-stackmaptable" aria-hidden="true">#</a> 8.10.3.5 <code>StackMapTable</code></h5><div class="language-text ext-text"><pre class="language-text"><code>该属性用在虚拟机的类型检查验证阶段。
一个方法只能有 0 个或 1 个 StackMapTable 属性。
StackMapTable 属性中保存了一个 stack_map_frame[] 数组，其中 stack_map_frame 表示栈映射帧。
栈映射帧 stack_map_frame 指定了 code[] 中某一指令对应的局部变量和操作数栈的类型。
通过 StackMapTable 属性中保存的栈映射帧集合（stack_map_frame[]），可以提高 JVM 在类型检查的验证阶段的效率。
</code></pre></div><h5 id="_8-10-3-6-runtimevisibletypeannotations-和-runtimeinvisisbletypeannotations" tabindex="-1"><a class="header-anchor" href="#_8-10-3-6-runtimevisibletypeannotations-和-runtimeinvisisbletypeannotations" aria-hidden="true">#</a> 8.10.3.6 <code>RuntimeVisibleTypeAnnotations</code> 和 <code>RuntimeInvisisbleTypeAnnotations</code></h5><p><code>RuntimeVisibleTypeAnnotations</code> 属性中保存了运行时可见的注解集合</p><p><code>RuntimeVisibleTypeAnnotations</code> 属性中保存了运行时不可见的注解集合</p><h5 id="_8-10-3-7-栈帧" tabindex="-1"><a class="header-anchor" href="#_8-10-3-7-栈帧" aria-hidden="true">#</a> 8.10.3.7 栈帧</h5><p><img src="/assets/47.0feb5cd8.png" alt="" loading="lazy"></p><h5 id="_8-10-3-8-局部变量表-local-variable-又称本地变量表" tabindex="-1"><a class="header-anchor" href="#_8-10-3-8-局部变量表-local-variable-又称本地变量表" aria-hidden="true">#</a> 8.10.3.8 局部变量表（<code>local variable</code> 又称本地变量表）</h5><p><img src="/assets/46.3865715a.png" alt="" loading="lazy"></p><h5 id="_8-10-3-9-code-属性在-class-文件中的解析举例-slot-可复用" tabindex="-1"><a class="header-anchor" href="#_8-10-3-9-code-属性在-class-文件中的解析举例-slot-可复用" aria-hidden="true">#</a> 8.10.3.9 <code>Code</code> 属性在 <code>class</code> 文件中的解析举例（<code>Slot</code> 可复用）</h5><blockquote><p>参考 《字节码执行引擎》 中的 <a href="/zkq/java/jvm/class-exe-engine.html#_3-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E8%A1%A8" class="">局部变量表</a></p></blockquote><p><img src="/assets/48.e09e0f9d.png" alt="" loading="lazy"></p><p><strong>注意：方法调用时，栈帧中的局部变量表中的局部变量所占的内存空间是可以复用的。</strong></p><p>也就是说，<code>LocalVariableTable</code> 属性中保存的局部变量在局部变量表中的索引 <code>index</code> 可能跟其他局部变量的索引相同。如下图所示：</p><p><img src="/assets/49.b1769290.png" alt="" loading="lazy"></p><div class="language-text ext-text"><pre class="language-text"><code>上图中，
locals=2，即局部变量在局部变量表中总共占 2 slot 单位的内存空间。
根据 LocalVariableTable 属性中的内容可知，局部变量表中保存了 3 个局部变量，
其中两个局部变量的索引是相同的（即局部变量 test 和 e 的索引相同，都为 1），
也就是说，局部变量 test 和 e 共用了 1 slot 单位的内存空间。
</code></pre></div><h2 id="_9-asm-开发" tabindex="-1"><a class="header-anchor" href="#_9-asm-开发" aria-hidden="true">#</a> 9. <code>ASM</code> 开发</h2><p><code>ASM</code> 是一个 <code>Java</code> 字节码操控框架。通过 <code>ASM</code> 可以动态生成类或者增强既有类的功能。</p><p><code>ASM</code> 可以直接生成 <code>class</code> 文件，也可以在 <code>class</code> 文件被加载到 <code>Java</code> 虚拟机之前，修改 <code>class</code> 文件中的内容，从而 动态改变类行为。</p><blockquote><p><code>class</code> 文件中保存的二进制数据足够用来解析所有与 <code>Java</code> 类相关的信息：类名称、继承关系、成员变量、成员方法、以及方法体中的 <code>Java</code> 代码。</p></blockquote><p>简单的说，<code>ASM</code> 可以读取并解析 <code>class</code> 文件的内容，并提供接口对 <code>class</code> 文件的内容进行访问和修改。</p><p>目前许多框架如 <code>CGLib</code>、<code>Hibernate</code>、<code>Spring</code> 都直接或间接地使用 <code>ASM</code> 操作字节码。</p><blockquote><p>使用 <code>ASM</code> 需要导入依赖包：<code>asm-7.3.1.jar</code> 和 <code>asm-util-7.3.1.jar</code>。</p></blockquote><h3 id="_9-1-编程模型和核心-api" tabindex="-1"><a class="header-anchor" href="#_9-1-编程模型和核心-api" aria-hidden="true">#</a> 9.1 编程模型和核心 <code>API</code></h3><p><code>ASM</code> 提供了两种编程模型：</p><ol><li><p><code>Core API</code>：</p><div class="language-text ext-text"><pre class="language-text"><code>提供了基于事件形式的编程模型。
该模型不需要一次性地将整个类的结构读取到内存中。
因此这种方式更快，需要的内存更少。
但这种编程方式难度较大。
</code></pre></div></li><li><p><code>Tree API</code>：</p><div class="language-text ext-text"><pre class="language-text"><code>提供了基于树形的编程模型。
该模型需要一次性地将整个类的结构读取到内存中。
因此这种方式需要的内存更多。
但这种编程方式较为简单。
</code></pre></div></li></ol><h3 id="_9-2-classvisitor-开发" tabindex="-1"><a class="header-anchor" href="#_9-2-classvisitor-开发" aria-hidden="true">#</a> 9.2 <code>ClassVisitor</code> 开发</h3><p><code>ClassVisitor</code> 是 <code>Core API</code> 编程模型中提供的接口，用于对字节码进行操作。</p><blockquote><p><code>ClassVisitor</code> 接口中的每个方法对应了 <code>class</code> 文件中的每一项。</p></blockquote><p><code>ASM</code> 提供了三个基于 <code>ClassVisitor</code> 接口的实现类来完成 <code>class</code> 文件的生成和转换。</p><ol><li><code>ClassReader</code>：用于解析一个类的 <code>class</code> 文件。</li><li><code>ClassAdapter</code>：实现会变化的功能。</li><li><code>ClassWriter</code>：用来输出变化后的字节码。</li></ol><blockquote><p><code>ASM</code> 给我们提供了 <code>ASMifier</code> 工具来帮助开发，可使用 <code>ASMifier</code> 工具生成 <code>ASM</code> 结构来对比。</p></blockquote><h3 id="_9-3-methodvisitor-开发" tabindex="-1"><a class="header-anchor" href="#_9-3-methodvisitor-开发" aria-hidden="true">#</a> 9.3 <code>MethodVisitor</code> 开发</h3><h3 id="_9-4-实现模拟-aop-功能" tabindex="-1"><a class="header-anchor" href="#_9-4-实现模拟-aop-功能" aria-hidden="true">#</a> 9.4 实现模拟 <code>AOP</code> 功能</h3><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zengkaiqiang562/JavaGuide/edit/main/docs/zkq/java/jvm/jvm-spec.md" rel="noopener noreferrer" target="_blank" arialabel="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/7/7 23:59:00</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: zengkaiqiang562@163.com">zengk</span><!--]--><!--]--></div></footer><nav class="page-nav"><!----><a href="/zkq/java/jvm/classloader.html" class="nav-link next" arialabel="类加载、连接和初始化"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">类加载、连接和初始化<!----></div></a></nav><!----><!----></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright © 2023 Zenk562</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.625aa393.js" defer></script>
  </body>
</html>
