<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zengkaiqiang562.github.io/zkq/kotlin/5-advanced-function.html"><meta property="og:site_name" content="Android Guide"><meta property="og:title" content="函数进阶"><meta property="og:type" content="article"><meta property="og:image" content="https://zengkaiqiang562.github.io/"><meta property="og:updated_time" content="2022-07-06T10:07:29.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="函数进阶"><meta property="article:tag" content="kotlin"><meta property="article:modified_time" content="2022-07-06T10:07:29.000Z"><script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?5dd2e8c97962d57b7b8fea1737c01743";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2922463_99aa80ii7cf.css"><title>函数进阶 | Android Guide</title><meta name="description" content="Android 学习 && 面试指南">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.c9a516cc.css">
    <link rel="modulepreload" href="/assets/app.2a01fc36.js"><link rel="modulepreload" href="/assets/5-advanced-function.html.13de0bfc.js"><link rel="modulepreload" href="/assets/5-advanced-function.html.b276fbeb.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.png" alt="Android Guide"><!----><span class="site-name hide-in-pad">Android Guide</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" arialabel="面试指南"><i class="icon iconfont icon-java"></i>面试指南<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zhuanlan/" class="nav-link" arialabel="优质专栏"><i class="icon iconfont icon-recommend"></i>优质专栏<!----></a></div><div class="nav-item hide-in-mobile"><a href="/open-source-project/" class="nav-link" arialabel="项目精选"><i class="icon iconfont icon-github"></i>项目精选<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://snailclimb.gitee.io/javaguide/#/" rel="noopener noreferrer" target="_blank" arialabel="旧版链接" class="nav-link"><i class="icon iconfont icon-java"></i>旧版链接<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="https://javaguide.cn/feed.json" rel="noopener noreferrer" target="_blank" arialabel="RSS订阅" class="nav-link"><i class="icon iconfont icon-rss"></i>RSS订阅<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/about-the-author/" class="nav-link" arialabel="关于作者"><i class="icon iconfont icon-zuozhe"></i>关于作者<!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/zengkaiqiang562/JavaGuide" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" arialabelledby="auto" style="display:block;"><title id="auto" lang="en">auto icon</title><g fill="currentColor"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" arialabelledby="dark" style="display:none;"><title id="dark" lang="en">dark icon</title><g fill="currentColor"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" arialabelledby="light" style="display:none;"><title id="light" lang="en">light icon</title><g fill="currentColor"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></g></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zkq/kotlin/1-env-setup.html" class="nav-link sidebar-link sidebar-page" arialabel="开发环境搭建"><!---->开发环境搭建<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/kotlin/2-built-in-type.html" class="nav-link sidebar-link sidebar-page" arialabel="内置类型"><!---->内置类型<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/kotlin/3-class.html" class="nav-link sidebar-link sidebar-page" arialabel="类型初步"><!---->类型初步<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/kotlin/4-expression.html" class="nav-link sidebar-link sidebar-page" arialabel="表达式"><!---->表达式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="函数进阶"><!---->函数进阶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_1-高阶函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1. 高阶函数"><!---->1. 高阶函数<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_1-1-什么是高阶函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.1 什么是高阶函数"><!---->1.1 什么是高阶函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_1-2-高阶函数举例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2 高阶函数举例"><!---->1.2 高阶函数举例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_2-内联函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2. 内联函数"><!---->2. 内联函数<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_2-1-通过关键字-inline-声明内联函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.1 通过关键字 inline 声明内联函数"><!---->2.1 通过关键字 inline 声明内联函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_2-2-内联函数举例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2 内联函数举例"><!---->2.2 内联函数举例<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_2-3-高阶函数内联" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.3 高阶函数内联"><!---->2.3 高阶函数内联<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_3-lambda-表达式中的-return-语句" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3. Lambda 表达式中的 return 语句"><!---->3. Lambda 表达式中的 return 语句<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_3-1-一般情况下-lambda-表达式中不允许使用-return-语句" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.1 一般情况下 Lambda 表达式中不允许使用 return 语句"><!---->3.1 一般情况下 Lambda 表达式中不允许使用 return 语句<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_3-2-高阶函数中-lambda-表达式作实参时-return-funname-语句的作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.2 高阶函数中 Lambda 表达式作实参时 return@funName 语句的作用"><!---->3.2 高阶函数中 Lambda 表达式作实参时 return@funName 语句的作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_3-3-高阶函数内联时-lambda-表达式作实参时-return-语句的作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.3 高阶函数内联时 Lambda 表达式作实参时 return 语句的作用"><!---->3.3 高阶函数内联时 Lambda 表达式作实参时 return 语句的作用<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_4-关键字-noinline" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4. 关键字 noinline"><!---->4. 关键字 noinline<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_5-关键字-crossinline" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5. 关键字 crossinline"><!---->5. 关键字 crossinline<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_6-内联属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6. 内联属性"><!---->6. 内联属性<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_7-内联函数的限制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7. 内联函数的限制"><!---->7. 内联函数的限制<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-常用的扩展方法-let-run-also-apply-use" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8. 常用的扩展方法：let/run/also/apply/use"><!---->8. 常用的扩展方法：let/run/also/apply/use<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-1-let" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.1 let"><!---->8.1 let<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-1-1-函数定义-standard-kt" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.1.1 函数定义（Standard.kt）"><!---->8.1.1 函数定义（Standard.kt）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-1-2-作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.1.2 作用"><!---->8.1.2 作用<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-run" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.2 run"><!---->8.2 run<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-1-函数定义-standard-kt" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.2.1 函数定义（Standard.kt）"><!---->8.2.1 函数定义（Standard.kt）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-2-作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.2.2 作用"><!---->8.2.2 作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-3-let-run-的区别" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.2.3 let &amp; run 的区别"><!---->8.2.3 let &amp; run 的区别<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-4-let-run-的示例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.2.4 let &amp; run 的示例"><!---->8.2.4 let &amp; run 的示例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-3-also" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.3 also"><!---->8.3 also<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-3-1-函数定义-standard-kt" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.3.1 函数定义（Standard.kt）"><!---->8.3.1 函数定义（Standard.kt）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-3-2-作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.3.2 作用"><!---->8.3.2 作用<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-apply" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4 apply"><!---->8.4 apply<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-1-函数定义-standard-kt" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4.1 函数定义（Standard.kt）"><!---->8.4.1 函数定义（Standard.kt）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-2-作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4.2 作用"><!---->8.4.2 作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-3-also-apply-的区别" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4.3 also &amp; apply 的区别"><!---->8.4.3 also &amp; apply 的区别<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-4-also-apply-的示例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.4.4 also &amp; apply 的示例"><!---->8.4.4 also &amp; apply 的示例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-5-use" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5 use"><!---->8.5 use<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-5-1-函数定义-closeable-kt" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.1 函数定义（Closeable.kt）"><!---->8.5.1 函数定义（Closeable.kt）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-5-2-作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.2 作用"><!---->8.5.2 作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-5-3-示例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.5.3 示例"><!---->8.5.3 示例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-常用的集合操作及相关的扩展方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9. 常用的集合操作及相关的扩展方法"><!---->9. 常用的集合操作及相关的扩展方法<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-1-概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.1 概述"><!---->9.1 概述<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-2-集合的遍历-扩展方法-foreach" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.2 集合的遍历 &amp; 扩展方法 forEach"><!---->9.2 集合的遍历 &amp; 扩展方法 forEach<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-2-1-按索引遍历" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.2.1 按索引遍历"><!---->9.2.1 按索引遍历<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-2-2-按元素遍历" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.2.2 按元素遍历"><!---->9.2.2 按元素遍历<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-2-3-使用扩展方法-foreach-遍历" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.2.3 使用扩展方法 forEach 遍历"><!---->9.2.3 使用扩展方法 forEach 遍历<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-3-集合过滤-扩展方法-filter" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.3 集合过滤 &amp; 扩展方法 filter"><!---->9.3 集合过滤 &amp; 扩展方法 filter<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-4-集合变换-扩展方法-map" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.4 集合变换 &amp; 扩展方法 map"><!---->9.4 集合变换 &amp; 扩展方法 map<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-5-集合变换-扩展方法-flatmap" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.5 集合变换 &amp; 扩展方法 flatMap"><!---->9.5 集合变换 &amp; 扩展方法 flatMap<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-iterable-集合-sequence-序列" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.6 Iterable 集合 &amp; Sequence 序列"><!---->9.6 Iterable 集合 &amp; Sequence 序列<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-1-iterable-集合的扩展方法-filter、map、flatmap-的特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.6.1 Iterable 集合的扩展方法 filter、map、flatMap 的特点"><!---->9.6.1 Iterable 集合的扩展方法 filter、map、flatMap 的特点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-2-iterable-集合转-sequence-序列-assequence" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.6.2 Iterable 集合转 Sequence 序列：asSequence"><!---->9.6.2 Iterable 集合转 Sequence 序列：asSequence<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-3-sequence-序列的扩展方法-filter、map、flatmap-的定义" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.6.3 Sequence 序列的扩展方法 filter、map、flatMap 的定义"><!---->9.6.3 Sequence 序列的扩展方法 filter、map、flatMap 的定义<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-4-sequence-序列的扩展方法-filter、map、flatmap-的特点-懒序列机制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.6.4 Sequence 序列的扩展方法 filter、map、flatMap 的特点（懒序列机制）"><!---->9.6.4 Sequence 序列的扩展方法 filter、map、flatMap 的特点（懒序列机制）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-5-示例-assequence-懒序列机制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.6.5 示例：asSequence &amp; 懒序列机制"><!---->9.6.5 示例：asSequence &amp; 懒序列机制<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-7-集合元素求和-扩展方法-sum" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.7 集合元素求和 &amp; 扩展方法 sum"><!---->9.7 集合元素求和 &amp; 扩展方法 sum<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-8-集合元素聚合-扩展方法-reduce" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.8 集合元素聚合 &amp; 扩展方法 reduce"><!---->9.8 集合元素聚合 &amp; 扩展方法 reduce<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-9-集合元素聚合-扩展方法-fold" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.9 集合元素聚合 &amp; 扩展方法 fold"><!---->9.9 集合元素聚合 &amp; 扩展方法 fold<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_10-kotlin-中的匿名内部类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10. Kotlin 中的匿名内部类"><!---->10. Kotlin 中的匿名内部类<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_10-1-kotlin-中匿名内部类的一般写法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10.1 Kotlin 中匿名内部类的一般写法"><!---->10.1 Kotlin 中匿名内部类的一般写法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_10-2-java-函数式接口的匿名内部类的-lambda-表达式简化写法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10.2 Java 函数式接口的匿名内部类的 Lambda 表达式简化写法"><!---->10.2 Java 函数式接口的匿名内部类的 Lambda 表达式简化写法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_10-3-示例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10.3 示例"><!---->10.3 示例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-sam-转换" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="11. SAM 转换"><!---->11. SAM 转换<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-1-什么是-sam-转换" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="11.1 什么是 SAM 转换"><!---->11.1 什么是 SAM 转换<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-2-kotlin-中的-sam-转换" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="11.2 Kotlin 中的 SAM 转换"><!---->11.2 Kotlin 中的 SAM 转换<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-3-实现-kotlin-中的-sam-转换需满足的条件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="11.3 实现 Kotlin 中的 SAM 转换需满足的条件"><!---->11.3 实现 Kotlin 中的 SAM 转换需满足的条件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-4-示例-1-kotlin-中的-sam-转换的基本用法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="11.4 示例 1：Kotlin 中的 SAM 转换的基本用法"><!---->11.4 示例 1：Kotlin 中的 SAM 转换的基本用法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-5-示例-2-每次-sam-转换-lambda-表达式会新创建匿名内部类对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="11.5 示例 2：每次 SAM 转换 Lambda 表达式会新创建匿名内部类对象"><!---->11.5 示例 2：每次 SAM 转换 Lambda 表达式会新创建匿名内部类对象<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-6-示例-3-避免-sam-转换时-lambda-表达式新创建匿名内部类对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="11.6 示例 3：避免 SAM 转换时 Lambda 表达式新创建匿名内部类对象"><!---->11.6 示例 3：避免 SAM 转换时 Lambda 表达式新创建匿名内部类对象<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-案例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12. 案例"><!---->12. 案例<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-案例-1-统计文件中每个字符的出现次数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.1 案例 1：统计文件中每个字符的出现次数"><!---->12.1 案例 1：统计文件中每个字符的出现次数<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-相关知识点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.1.1 相关知识点"><!---->12.1.1 相关知识点<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-1-file-的扩展方法-readtext" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.1.1.1 File 的扩展方法 readText"><!---->12.1.1.1 File 的扩展方法 readText<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-2-数组的扩展方法-filternot" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.1.1.2 数组的扩展方法 filterNot"><!---->12.1.1.2 数组的扩展方法 filterNot<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-3-iterable-集合的扩展方法-groupby" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.1.1.3 Iterable 集合的扩展方法 groupBy"><!---->12.1.1.3 Iterable 集合的扩展方法 groupBy<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-4-map-映射的扩展方法-map" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.1.1.4 Map 映射的扩展方法 map"><!---->12.1.1.4 Map 映射的扩展方法 map<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-2-代码实现" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.1.2 代码实现"><!---->12.1.2 代码实现<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-案例-2-kotlin-实现-html" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.2 案例 2：Kotlin 实现 Html"><!---->12.2 案例 2：Kotlin 实现 Html<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-相关知识点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.2.1 相关知识点"><!---->12.2.1 相关知识点<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-1-this-outclass-的作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.2.1.1 this@OutClass 的作用"><!---->12.2.1.1 this@OutClass 的作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-2-string-的运算符-的重载函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.2.1.2 &quot;..&quot;{...} &amp; String 的运算符 &quot;()&quot; 的重载函数"><!---->12.2.1.2 &quot;..&quot;{...} &amp; String 的运算符 &quot;()&quot; 的重载函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-3-string-的运算符-的重载函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.2.1.3 &quot;..&quot;(...) &amp; String 的运算符 &quot;()&quot; 的重载函数"><!---->12.2.1.3 &quot;..&quot;(...) &amp; String 的运算符 &quot;()&quot; 的重载函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-4-string-的运算符-的重载函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.2.1.4 +&quot;...&quot; &amp; String 的运算符 &quot;()&quot; 的重载函数"><!---->12.2.1.4 +&quot;...&quot; &amp; String 的运算符 &quot;()&quot; 的重载函数<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-2-代码实现" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="12.2.2 代码实现"><!---->12.2.2 代码实现<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/zkq/kotlin/6-advanced-class.html" class="nav-link sidebar-link sidebar-page" arialabel="类型进阶"><!---->类型进阶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/kotlin/7-genericity.html" class="nav-link sidebar-link sidebar-page" arialabel="Kotlin泛型"><!---->Kotlin泛型<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/kotlin/8-reflection.html" class="nav-link sidebar-link sidebar-page" arialabel="Kotlin反射"><!---->Kotlin反射<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/kotlin/9-annotation.html" class="nav-link sidebar-link sidebar-page" arialabel="Kotlin注解"><!---->Kotlin注解<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zkq/kotlin/10-coroutine.html" class="nav-link sidebar-link sidebar-page" arialabel="Kotlin协程（TODO）"><!---->Kotlin协程（TODO）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->函数进阶</h1><div class="article-info"><span class="author-info" arialabel="作者🖊" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://zengkaiqiang562.github.io/" target="_blank" rel="noopener noreferrer">Zenk562</a></span><span property="author" content="Zenk562"></span></span><span class="category-info" arialabel="分类🌈" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" arialabelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category clickable" role="navigation">kotlin</li><meta property="articleSection" content="kotlin"></ul></span><span arialabel="标签🏷" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" arialabelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag clickable" role="navigation">kotlin</li></ul><meta property="keywords" content="kotlin"></span><span class="date-info" arialabel="写作日期📅" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年7月6日</span><meta property="datePublished" content="2022-07-06T10:07:29.000Z"></span><!----><span class="words-info" arialabel="字数🔠" isoriginal="false" pageview="false" color="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" arialabelledby="word"><title id="word" lang="en">word icon</title><g fill="currentColor"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></g></svg><span>约 6566 字</span><meta property="wordCount" content="6566"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_1-高阶函数" class="router-link-active router-link-exact-active toc-link level2">1. 高阶函数</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_1-1-什么是高阶函数" class="router-link-active router-link-exact-active toc-link level3">1.1 什么是高阶函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_1-2-高阶函数举例" class="router-link-active router-link-exact-active toc-link level3">1.2 高阶函数举例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_2-内联函数" class="router-link-active router-link-exact-active toc-link level2">2. 内联函数</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_2-1-通过关键字-inline-声明内联函数" class="router-link-active router-link-exact-active toc-link level3">2.1 通过关键字 inline 声明内联函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_2-2-内联函数举例" class="router-link-active router-link-exact-active toc-link level3">2.2 内联函数举例</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_2-3-高阶函数内联" class="router-link-active router-link-exact-active toc-link level3">2.3 高阶函数内联</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_3-lambda-表达式中的-return-语句" class="router-link-active router-link-exact-active toc-link level2">3. Lambda 表达式中的 return 语句</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_3-1-一般情况下-lambda-表达式中不允许使用-return-语句" class="router-link-active router-link-exact-active toc-link level3">3.1 一般情况下 Lambda 表达式中不允许使用 return 语句</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_3-2-高阶函数中-lambda-表达式作实参时-return-funname-语句的作用" class="router-link-active router-link-exact-active toc-link level3">3.2 高阶函数中 Lambda 表达式作实参时 return@funName 语句的作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_3-3-高阶函数内联时-lambda-表达式作实参时-return-语句的作用" class="router-link-active router-link-exact-active toc-link level3">3.3 高阶函数内联时 Lambda 表达式作实参时 return 语句的作用</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_4-关键字-noinline" class="router-link-active router-link-exact-active toc-link level2">4. 关键字 noinline</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_5-关键字-crossinline" class="router-link-active router-link-exact-active toc-link level2">5. 关键字 crossinline</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_6-内联属性" class="router-link-active router-link-exact-active toc-link level2">6. 内联属性</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_7-内联函数的限制" class="router-link-active router-link-exact-active toc-link level2">7. 内联函数的限制</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-常用的扩展方法-let-run-also-apply-use" class="router-link-active router-link-exact-active toc-link level2">8. 常用的扩展方法：let/run/also/apply/use</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-1-let" class="router-link-active router-link-exact-active toc-link level3">8.1 let</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-1-1-函数定义-standard-kt" class="router-link-active router-link-exact-active toc-link level4">8.1.1 函数定义（Standard.kt）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-1-2-作用" class="router-link-active router-link-exact-active toc-link level4">8.1.2 作用</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-run" class="router-link-active router-link-exact-active toc-link level3">8.2 run</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-1-函数定义-standard-kt" class="router-link-active router-link-exact-active toc-link level4">8.2.1 函数定义（Standard.kt）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-2-作用" class="router-link-active router-link-exact-active toc-link level4">8.2.2 作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-3-let-run-的区别" class="router-link-active router-link-exact-active toc-link level4">8.2.3 let &amp; run 的区别</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-2-4-let-run-的示例" class="router-link-active router-link-exact-active toc-link level4">8.2.4 let &amp; run 的示例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-3-also" class="router-link-active router-link-exact-active toc-link level3">8.3 also</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-3-1-函数定义-standard-kt" class="router-link-active router-link-exact-active toc-link level4">8.3.1 函数定义（Standard.kt）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-3-2-作用" class="router-link-active router-link-exact-active toc-link level4">8.3.2 作用</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-apply" class="router-link-active router-link-exact-active toc-link level3">8.4 apply</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-1-函数定义-standard-kt" class="router-link-active router-link-exact-active toc-link level4">8.4.1 函数定义（Standard.kt）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-2-作用" class="router-link-active router-link-exact-active toc-link level4">8.4.2 作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-3-also-apply-的区别" class="router-link-active router-link-exact-active toc-link level4">8.4.3 also &amp; apply 的区别</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-4-4-also-apply-的示例" class="router-link-active router-link-exact-active toc-link level4">8.4.4 also &amp; apply 的示例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-5-use" class="router-link-active router-link-exact-active toc-link level3">8.5 use</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-5-1-函数定义-closeable-kt" class="router-link-active router-link-exact-active toc-link level4">8.5.1 函数定义（Closeable.kt）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-5-2-作用" class="router-link-active router-link-exact-active toc-link level4">8.5.2 作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_8-5-3-示例" class="router-link-active router-link-exact-active toc-link level4">8.5.3 示例</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-常用的集合操作及相关的扩展方法" class="router-link-active router-link-exact-active toc-link level2">9. 常用的集合操作及相关的扩展方法</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-1-概述" class="router-link-active router-link-exact-active toc-link level3">9.1 概述</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-2-集合的遍历-扩展方法-foreach" class="router-link-active router-link-exact-active toc-link level3">9.2 集合的遍历 &amp; 扩展方法 forEach</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-2-1-按索引遍历" class="router-link-active router-link-exact-active toc-link level4">9.2.1 按索引遍历</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-2-2-按元素遍历" class="router-link-active router-link-exact-active toc-link level4">9.2.2 按元素遍历</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-2-3-使用扩展方法-foreach-遍历" class="router-link-active router-link-exact-active toc-link level4">9.2.3 使用扩展方法 forEach 遍历</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-3-集合过滤-扩展方法-filter" class="router-link-active router-link-exact-active toc-link level3">9.3 集合过滤 &amp; 扩展方法 filter</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-4-集合变换-扩展方法-map" class="router-link-active router-link-exact-active toc-link level3">9.4 集合变换 &amp; 扩展方法 map</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-5-集合变换-扩展方法-flatmap" class="router-link-active router-link-exact-active toc-link level3">9.5 集合变换 &amp; 扩展方法 flatMap</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-iterable-集合-sequence-序列" class="router-link-active router-link-exact-active toc-link level3">9.6 Iterable 集合 &amp; Sequence 序列</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-1-iterable-集合的扩展方法-filter、map、flatmap-的特点" class="router-link-active router-link-exact-active toc-link level4">9.6.1 Iterable 集合的扩展方法 filter、map、flatMap 的特点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-2-iterable-集合转-sequence-序列-assequence" class="router-link-active router-link-exact-active toc-link level4">9.6.2 Iterable 集合转 Sequence 序列：asSequence</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-3-sequence-序列的扩展方法-filter、map、flatmap-的定义" class="router-link-active router-link-exact-active toc-link level4">9.6.3 Sequence 序列的扩展方法 filter、map、flatMap 的定义</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-4-sequence-序列的扩展方法-filter、map、flatmap-的特点-懒序列机制" class="router-link-active router-link-exact-active toc-link level4">9.6.4 Sequence 序列的扩展方法 filter、map、flatMap 的特点（懒序列机制）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-6-5-示例-assequence-懒序列机制" class="router-link-active router-link-exact-active toc-link level4">9.6.5 示例：asSequence &amp; 懒序列机制</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-7-集合元素求和-扩展方法-sum" class="router-link-active router-link-exact-active toc-link level3">9.7 集合元素求和 &amp; 扩展方法 sum</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-8-集合元素聚合-扩展方法-reduce" class="router-link-active router-link-exact-active toc-link level3">9.8 集合元素聚合 &amp; 扩展方法 reduce</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_9-9-集合元素聚合-扩展方法-fold" class="router-link-active router-link-exact-active toc-link level3">9.9 集合元素聚合 &amp; 扩展方法 fold</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_10-kotlin-中的匿名内部类" class="router-link-active router-link-exact-active toc-link level2">10. Kotlin 中的匿名内部类</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_10-1-kotlin-中匿名内部类的一般写法" class="router-link-active router-link-exact-active toc-link level3">10.1 Kotlin 中匿名内部类的一般写法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_10-2-java-函数式接口的匿名内部类的-lambda-表达式简化写法" class="router-link-active router-link-exact-active toc-link level3">10.2 Java 函数式接口的匿名内部类的 Lambda 表达式简化写法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_10-3-示例" class="router-link-active router-link-exact-active toc-link level3">10.3 示例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-sam-转换" class="router-link-active router-link-exact-active toc-link level2">11. SAM 转换</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-1-什么是-sam-转换" class="router-link-active router-link-exact-active toc-link level3">11.1 什么是 SAM 转换</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-2-kotlin-中的-sam-转换" class="router-link-active router-link-exact-active toc-link level3">11.2 Kotlin 中的 SAM 转换</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-3-实现-kotlin-中的-sam-转换需满足的条件" class="router-link-active router-link-exact-active toc-link level3">11.3 实现 Kotlin 中的 SAM 转换需满足的条件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-4-示例-1-kotlin-中的-sam-转换的基本用法" class="router-link-active router-link-exact-active toc-link level3">11.4 示例 1：Kotlin 中的 SAM 转换的基本用法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-5-示例-2-每次-sam-转换-lambda-表达式会新创建匿名内部类对象" class="router-link-active router-link-exact-active toc-link level3">11.5 示例 2：每次 SAM 转换 Lambda 表达式会新创建匿名内部类对象</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_11-6-示例-3-避免-sam-转换时-lambda-表达式新创建匿名内部类对象" class="router-link-active router-link-exact-active toc-link level3">11.6 示例 3：避免 SAM 转换时 Lambda 表达式新创建匿名内部类对象</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-案例" class="router-link-active router-link-exact-active toc-link level2">12. 案例</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-案例-1-统计文件中每个字符的出现次数" class="router-link-active router-link-exact-active toc-link level3">12.1 案例 1：统计文件中每个字符的出现次数</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-相关知识点" class="router-link-active router-link-exact-active toc-link level4">12.1.1 相关知识点</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-1-file-的扩展方法-readtext" class="router-link-active router-link-exact-active toc-link level5">12.1.1.1 File 的扩展方法 readText</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-2-数组的扩展方法-filternot" class="router-link-active router-link-exact-active toc-link level5">12.1.1.2 数组的扩展方法 filterNot</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-3-iterable-集合的扩展方法-groupby" class="router-link-active router-link-exact-active toc-link level5">12.1.1.3 Iterable 集合的扩展方法 groupBy</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-1-4-map-映射的扩展方法-map" class="router-link-active router-link-exact-active toc-link level5">12.1.1.4 Map 映射的扩展方法 map</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-1-2-代码实现" class="router-link-active router-link-exact-active toc-link level4">12.1.2 代码实现</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-案例-2-kotlin-实现-html" class="router-link-active router-link-exact-active toc-link level3">12.2 案例 2：Kotlin 实现 Html</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-相关知识点" class="router-link-active router-link-exact-active toc-link level4">12.2.1 相关知识点</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-1-this-outclass-的作用" class="router-link-active router-link-exact-active toc-link level5">12.2.1.1 this@OutClass 的作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-2-string-的运算符-的重载函数" class="router-link-active router-link-exact-active toc-link level5">12.2.1.2 &quot;..&quot;{...} &amp; String 的运算符 &quot;()&quot; 的重载函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-3-string-的运算符-的重载函数" class="router-link-active router-link-exact-active toc-link level5">12.2.1.3 &quot;..&quot;(...) &amp; String 的运算符 &quot;()&quot; 的重载函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-1-4-string-的运算符-的重载函数" class="router-link-active router-link-exact-active toc-link level5">12.2.1.4 +&quot;...&quot; &amp; String 的运算符 &quot;()&quot; 的重载函数</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zkq/kotlin/5-advanced-function.html#_12-2-2-代码实现" class="router-link-active router-link-exact-active toc-link level4">12.2.2 代码实现</a></li><!----><!--]--></ul><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h2 id="_1-高阶函数" tabindex="-1"><a class="header-anchor" href="#_1-高阶函数" aria-hidden="true">#</a> 1. 高阶函数</h2><h3 id="_1-1-什么是高阶函数" tabindex="-1"><a class="header-anchor" href="#_1-1-什么是高阶函数" aria-hidden="true">#</a> 1.1 什么是高阶函数</h3><p>以下 <code>2</code> 点至少满足其一的函数称为高阶函数：</p><ol><li><p>形参列表中包含函数类型的参数</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token comment">//参数 paramN 可以是：函数引用、函数类型变量、或 Lambda 表达式。</span>
<span class="token keyword">fun</span> <span class="token function">funName</span><span class="token punctuation">(</span>param1<span class="token operator">:</span> Type1<span class="token punctuation">,</span> param2<span class="token operator">:</span> Type2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">,</span> paramN<span class="token operator">:</span> <span class="token punctuation">(</span>p1<span class="token operator">:</span> T1<span class="token punctuation">,</span> p2<span class="token operator">:</span> T2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> RT<span class="token punctuation">)</span><span class="token operator">:</span> ReturnType <span class="token punctuation">{</span>
    <span class="token operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>返回值类型是函数类型</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">funName</span><span class="token punctuation">(</span>param1<span class="token operator">:</span> Type1<span class="token punctuation">,</span> param2<span class="token operator">:</span> Type2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>p1<span class="token operator">:</span> T1<span class="token punctuation">,</span> p2<span class="token operator">:</span> T2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> RT <span class="token punctuation">{</span>
    <span class="token operator">..</span><span class="token punctuation">.</span>
    <span class="token comment">//可以返回：函数引用、函数类型变量、或 Lambda 表达式。</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol><h3 id="_1-2-高阶函数举例" tabindex="-1"><a class="header-anchor" href="#_1-2-高阶函数举例" aria-hidden="true">#</a> 1.2 高阶函数举例</h3><p><img src="/assets/01.666e80ca.png" alt="" loading="lazy"></p><h2 id="_2-内联函数" tabindex="-1"><a class="header-anchor" href="#_2-内联函数" aria-hidden="true">#</a> 2. 内联函数</h2><h3 id="_2-1-通过关键字-inline-声明内联函数" tabindex="-1"><a class="header-anchor" href="#_2-1-通过关键字-inline-声明内联函数" aria-hidden="true">#</a> 2.1 通过关键字 <code>inline</code> 声明内联函数</h3><p><code>Kotlin</code> 中的内联函数类似于 <code>C++</code> 中的内联函数，都是在函数原型前面加 <code>inline</code> 关键字声明一个内联函数。</p><h3 id="_2-2-内联函数举例" tabindex="-1"><a class="header-anchor" href="#_2-2-内联函数举例" aria-hidden="true">#</a> 2.2 内联函数举例</h3><p>内联函数的定义：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token function">cost</span><span class="token punctuation">(</span>block<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> start <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMills</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMills</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>内联函数的调用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>cost <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Hello&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>编译后的内联函数调用处的代码：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> start <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMills</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Hello&quot;</span></span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMills</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-3-高阶函数内联" tabindex="-1"><a class="header-anchor" href="#_2-3-高阶函数内联" aria-hidden="true">#</a> 2.3 高阶函数内联</h3><p>内联函数常与高阶函数搭配使用，即：高阶函数内联。</p><p>高阶函数内联包含两个方面的内容：</p><ol><li><p>高阶函数被调用时，函数类型的实参内联到高阶函数内部的调用处；</p></li><li><p>高阶函数被调用时，高阶函数本身内联到主调函数的调用处。</p></li></ol><h2 id="_3-lambda-表达式中的-return-语句" tabindex="-1"><a class="header-anchor" href="#_3-lambda-表达式中的-return-语句" aria-hidden="true">#</a> 3. <code>Lambda</code> 表达式中的 <code>return</code> 语句</h2><h3 id="_3-1-一般情况下-lambda-表达式中不允许使用-return-语句" tabindex="-1"><a class="header-anchor" href="#_3-1-一般情况下-lambda-表达式中不允许使用-return-语句" aria-hidden="true">#</a> 3.1 一般情况下 <code>Lambda</code> 表达式中不允许使用 <code>return</code> 语句</h3><p>一般情况下，<code>Lambda</code> 表达式中不允许使用 <code>return</code> 语句。</p><p><code>Lambda</code> 表达式的函数体的返回值由最后一条执行语句的结果值确定。</p><p><img src="/assets/02.7ce405db.png" alt="" loading="lazy"></p><h3 id="_3-2-高阶函数中-lambda-表达式作实参时-return-funname-语句的作用" tabindex="-1"><a class="header-anchor" href="#_3-2-高阶函数中-lambda-表达式作实参时-return-funname-语句的作用" aria-hidden="true">#</a> 3.2 高阶函数中 <code>Lambda</code> 表达式作实参时 <code>return@funName</code> 语句的作用</h3><p>当 <code>Lambda</code> 表达式作为高阶函数 <code>funName</code> 的函数类型参数 <code>pfun</code> 的实参时，可以在 <code>Lambda</code> 表达式中执行 <code>return@funName</code>。</p><p>表示结束执行 <code>Lambda</code> 表达式中<code> return@funName</code> 之后的语句，继续执行函数 <code>funName</code> 中调用参数函数 <code>pfun</code> 之后的语句。</p><p><img src="/assets/03.3102f4ac.png" alt="" loading="lazy"></p><h3 id="_3-3-高阶函数内联时-lambda-表达式作实参时-return-语句的作用" tabindex="-1"><a class="header-anchor" href="#_3-3-高阶函数内联时-lambda-表达式作实参时-return-语句的作用" aria-hidden="true">#</a> 3.3 高阶函数内联时 <code>Lambda</code> 表达式作实参时 <code>return</code> 语句的作用</h3><p>当 <code>Lambda</code> 表达式作为内联的高阶函数 <code>funName</code> 的函数类型参数 <code>pfun</code> 的实参时，可以在 <code>Lambda</code> 表达式中使用 <code>return</code> 语句。</p><p>此时，因为内联的高阶函数 <code>funName</code> 作为被调函数时，编译后会把 <code>Lambda</code> 表达式的代码和高阶函数 <code>funName</code> 的函数体代码直接放到主调函数中，所以 <code>Lambda</code> 表达式中的 <code>return</code> 语句相当于直接写在主调函数中。也就是说，此时执行 <code>Lambda</code> 表达式中的 <code>return</code> 语句相当于直接结束主调函数的执行。</p><p><img src="/assets/04.77cc9c03.png" alt="" loading="lazy"></p><h2 id="_4-关键字-noinline" tabindex="-1"><a class="header-anchor" href="#_4-关键字-noinline" aria-hidden="true">#</a> 4. 关键字 <code>noinline</code></h2><p>对于包含函数类型参数的内联高阶函数 <code>funName</code>，当调用内联高阶函数时，如果 <code>Lambda</code> 表达式作为实参，那么 <code>Lambda</code> 表达式默认也会参与内联，即默认会把 <code>Lambda</code> 表达式的代码在内联函数中的调用处展开。</p><p>但是，有时候我们 <strong>不想让作为实参的 <code>Lambda</code> 表达式参与内联</strong>，那么此时需要使用关键字 <code>noinline</code> 修饰对应的函数类型参数。</p><blockquote><p><strong>注意</strong>：不参与内联的 <code>Lambda</code> 表达式，是不允许使用 <code>return</code> 语句的。也就是说，当 <code>Lambda</code> 表达式作为被 <code>noinline</code> 修饰的函数类型参数的实参时，该 <code>Lambda</code> 表达式中不允许使用 <code>return</code> 语句。</p></blockquote><p><img src="/assets/05.6079bd97.png" alt="" loading="lazy"></p><h2 id="_5-关键字-crossinline" tabindex="-1"><a class="header-anchor" href="#_5-关键字-crossinline" aria-hidden="true">#</a> 5. 关键字 <code>crossinline</code></h2><p>对于参与内联的 <code>Lambda</code> 表达式，可以使用 <code>return</code> 语句。并且执行该 <code>return</code> 语句就是结束调用内联函数的主调函数的执行。</p><p>但是，有时候我们并不想让参与内联的 <code>Lambda</code> 表达式拥有这么大的权限，于是可以使用关键字 <code>crossinline</code> 声明一个函数类型的参数，这就意味着作为该函数类型参数的实参的 <strong><code>Lambda</code> 表达式虽然可以参与内联，但不允许使用 <code>return</code> 语句</strong>。</p><p><img src="/assets/06.e008ad08.png" alt="" loading="lazy"></p><h2 id="_6-内联属性" tabindex="-1"><a class="header-anchor" href="#_6-内联属性" aria-hidden="true">#</a> 6. 内联属性</h2><p>若属性的 <code>setter</code>/<code>getter</code> 方法被关键字 <code>inline</code> 修饰，则称该属性称为 <strong>内联属性</strong>。</p><p>注意：内联属性不可以有 <code>backing field</code></p><p>也就说是：</p><ol><li><p>成员属性不可以作为内联属性，即成员属性的 <code>setter</code>/<code>getter</code> 方法不能被 <code>inline</code> 修饰</p></li><li><p>扩展属性可以作为内联属性，即扩展属性的 <code>setter</code>/<code>getter</code> 方法可以被 <code>inline</code> 修饰</p></li></ol><h2 id="_7-内联函数的限制" tabindex="-1"><a class="header-anchor" href="#_7-内联函数的限制" aria-hidden="true">#</a> 7. 内联函数的限制</h2><ol><li><p>访问权限为 <code>public</code>/<code>protected</code> 的内联成员方法中，不能访问 <code>private</code> 修饰的私有成员。</p><blockquote><p>这是因为在类外调用 <code>public</code>/<code>protected</code> 修饰的内联成员方法时，会将内联成员方法的函数体展开在类外的调用处这就相当于直接在类外调用类中的私有成员了。</p></blockquote><p><img src="/assets/07.583a636d.png" alt="" loading="lazy"></p></li><li><p>参与内联的函数类型参数不能被存储（即不能将参与内联的函数类型参数赋给变量）。</p><p><img src="/assets/08.58a8b9da.png" alt="" loading="lazy"></p></li><li><p>当函数嵌套调用时，外层函数中参与内联的函数类型参数只能传递给内层函数中参与内联的函数类型参数。</p><p><img src="/assets/09.4cf74ef9.png" alt="" loading="lazy"></p></li></ol><h2 id="_8-常用的扩展方法-let-run-also-apply-use" tabindex="-1"><a class="header-anchor" href="#_8-常用的扩展方法-let-run-also-apply-use" aria-hidden="true">#</a> 8. 常用的扩展方法：<code>let</code>/<code>run</code>/<code>also</code>/<code>apply</code>/<code>use</code></h2><h3 id="_8-1-let" tabindex="-1"><a class="header-anchor" href="#_8-1-let" aria-hidden="true">#</a> 8.1 <code>let</code></h3><h4 id="_8-1-1-函数定义-standard-kt" tabindex="-1"><a class="header-anchor" href="#_8-1-1-函数定义-standard-kt" aria-hidden="true">#</a> 8.1.1 函数定义（<code>Standard.kt</code>）</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token comment">// 函数定义（在 Standard.kt 文件中定义）</span>
<span class="token label symbol">@kotlin</span><span class="token punctuation">.</span>internal<span class="token punctuation">.</span>InlineOnly
<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token operator">&gt;</span> T<span class="token punctuation">.</span><span class="token function">let</span><span class="token punctuation">(</span>block<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> R <span class="token punctuation">{</span>
    contract <span class="token punctuation">{</span>
        <span class="token function">callsInPlace</span><span class="token punctuation">(</span>block<span class="token punctuation">,</span> InvocationKind<span class="token punctuation">.</span>EXACTLY_ONCE<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">block</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-1-2-作用" tabindex="-1"><a class="header-anchor" href="#_8-1-2-作用" aria-hidden="true">#</a> 8.1.2 作用</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>扩展方法 let 的 Receiver 是泛型 T，这表示所有类型的变量，甚至是字面量都可以作为调用者来调用 let 方法。

let 方法的只有一个函数类型为 <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R 的参数 block，在 let 方法中执行了 <span class="token keyword">return</span> <span class="token function">block</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>，由此可知：
<span class="token number">1</span><span class="token punctuation">.</span> 当 Lambda 表达式作为 let 方法的实参时，Lambda 表达式的默认参数 it 就是 let 方法的调用者（即 receiver）；
<span class="token number">2</span><span class="token punctuation">.</span> let 方法的返回值就是 Lambda 表达式的返回值。
</code></pre></div><h3 id="_8-2-run" tabindex="-1"><a class="header-anchor" href="#_8-2-run" aria-hidden="true">#</a> 8.2 <code>run</code></h3><h4 id="_8-2-1-函数定义-standard-kt" tabindex="-1"><a class="header-anchor" href="#_8-2-1-函数定义-standard-kt" aria-hidden="true">#</a> 8.2.1 函数定义（<code>Standard.kt</code>）</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token label symbol">@kotlin</span><span class="token punctuation">.</span>internal<span class="token punctuation">.</span>InlineOnly
<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token operator">&gt;</span> T<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>block<span class="token operator">:</span> T<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> R <span class="token punctuation">{</span>
    contract <span class="token punctuation">{</span>
        <span class="token function">callsInPlace</span><span class="token punctuation">(</span>block<span class="token punctuation">,</span> InvocationKind<span class="token punctuation">.</span>EXACTLY_ONCE<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-2-2-作用" tabindex="-1"><a class="header-anchor" href="#_8-2-2-作用" aria-hidden="true">#</a> 8.2.2 作用</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>扩展方法 run 的 Receiver 是泛型 T，这表示所有类型的变量，甚至是字面量都可以作为调用者来调用 run 方法。

run 方法的只有一个函数类型为 T<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R 的参数 block，在 run 方法中执行了 <span class="token keyword">return</span> <span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，由此可知：
<span class="token number">1</span><span class="token punctuation">.</span> 当 Lambda 表达式作为 run 方法的实参时，Lambda 表达式是无参数的。
   但是从函数类型 T<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R 可以看出，Lambda 表达式中存在 <span class="token keyword">this</span>，<span class="token keyword">this</span> 指向 run 方法的调用者（即 receiver）。
<span class="token number">2</span><span class="token punctuation">.</span> run 方法的返回值就是 Lambda 表达式的返回值。
</code></pre></div><h4 id="_8-2-3-let-run-的区别" tabindex="-1"><a class="header-anchor" href="#_8-2-3-let-run-的区别" aria-hidden="true">#</a> 8.2.3 <code>let</code> &amp; <code>run</code> 的区别</h4><p><code>let</code> 和 <code>run</code> 的相同点：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token number">1</span><span class="token punctuation">.</span> 所有类型的变量，甚至是字面量都可以作为调用者；
<span class="token number">2</span><span class="token punctuation">.</span> 都只有一个函数类型的参数；
<span class="token number">3</span><span class="token punctuation">.</span> 返回值都是作为实参的 Lambda 表达式的返回值。
</code></pre></div><p><code>let</code> 和 <code>run</code> 的不同点：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token number">1</span><span class="token punctuation">.</span> let 方法中，作为实参的 Lambda 表达式带一个参数，传入的参数值就是 let 方法的调用者；
   run 方法中，作为实参的 Lambda 表达式无参数；

<span class="token number">2</span><span class="token punctuation">.</span> let 方法中，作为实参的 Lambda 表达式中不存在 <span class="token keyword">this</span>；
   run 方法中，作为实参的 Lambda 表达式中存在 <span class="token keyword">this</span>，<span class="token keyword">this</span> 指向 run 方法的调用者。
</code></pre></div><h4 id="_8-2-4-let-run-的示例" tabindex="-1"><a class="header-anchor" href="#_8-2-4-let-run-的示例" aria-hidden="true">#</a> 8.2.4 <code>let</code> &amp; <code>run</code> 的示例</h4><p><img src="/assets/10.fb4bcbf4.png" alt="" loading="lazy"></p><h3 id="_8-3-also" tabindex="-1"><a class="header-anchor" href="#_8-3-also" aria-hidden="true">#</a> 8.3 <code>also</code></h3><h4 id="_8-3-1-函数定义-standard-kt" tabindex="-1"><a class="header-anchor" href="#_8-3-1-函数定义-standard-kt" aria-hidden="true">#</a> 8.3.1 函数定义（<code>Standard.kt</code>）</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token comment">//函数定义（在Standard.kt文件中定义）</span>
<span class="token label symbol">@kotlin</span><span class="token punctuation">.</span>internal<span class="token punctuation">.</span>InlineOnly
<span class="token annotation builtin">@SinceKotlin</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;1.1&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> T<span class="token punctuation">.</span><span class="token function">also</span><span class="token punctuation">(</span>block<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
    contract <span class="token punctuation">{</span>
        <span class="token function">callsInPlace</span><span class="token punctuation">(</span>block<span class="token punctuation">,</span> InvocationKind<span class="token punctuation">.</span>EXACTLY_ONCE<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">block</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-3-2-作用" tabindex="-1"><a class="header-anchor" href="#_8-3-2-作用" aria-hidden="true">#</a> 8.3.2 作用</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>扩展方法 also 的 Receiver 是泛型 T，这表示所有类型的变量，甚至是字面量都可以作为调用者来调用 also 方法。

also 方法的只有一个函数类型为 <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit 的参数 block，在 also 方法中先后执行了 <span class="token function">block</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> 和 <span class="token keyword">return</span> <span class="token keyword">this</span>，由此可知：
<span class="token number">1</span><span class="token punctuation">.</span> 当 Lambda 表达式作为 also 方法的实参时，Lambda 表达式的默认参数 it 就是 also 方法的调用者（即 receiver）
<span class="token number">2</span><span class="token punctuation">.</span> also 方法的返回值就是 also 方法的调用者。
</code></pre></div><h3 id="_8-4-apply" tabindex="-1"><a class="header-anchor" href="#_8-4-apply" aria-hidden="true">#</a> 8.4 <code>apply</code></h3><h4 id="_8-4-1-函数定义-standard-kt" tabindex="-1"><a class="header-anchor" href="#_8-4-1-函数定义-standard-kt" aria-hidden="true">#</a> 8.4.1 函数定义（<code>Standard.kt</code>）</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token comment">//函数定义（在Standard.kt文件中定义）</span>
<span class="token label symbol">@kotlin</span><span class="token punctuation">.</span>internal<span class="token punctuation">.</span>InlineOnly
<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> T<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>block<span class="token operator">:</span> T<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
    contract <span class="token punctuation">{</span>
        <span class="token function">callsInPlace</span><span class="token punctuation">(</span>block<span class="token punctuation">,</span> InvocationKind<span class="token punctuation">.</span>EXACTLY_ONCE<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-4-2-作用" tabindex="-1"><a class="header-anchor" href="#_8-4-2-作用" aria-hidden="true">#</a> 8.4.2 作用</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>扩展方法 apply 的 Receiver 是泛型 T，这表示所有类型的变量，甚至是字面量都可以作为调用者来调用 apply 方法。

apply 方法的只有一个函数类型为 T<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit 的参数 block，在 apply 方法中先后执行了 <span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 和 <span class="token keyword">return</span> <span class="token keyword">this</span>，由此可知：
<span class="token number">1</span><span class="token punctuation">.</span> 当 Lambda 表达式作为 apply 方法的实参时，Lambda 表达式是无参数的。
   但是从函数类型 T<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit 可以看出，Lambda 表达式中存在 <span class="token keyword">this</span>，<span class="token keyword">this</span> 指向 apply 方法的调用者（即 receiver）。
<span class="token number">2</span><span class="token punctuation">.</span> apply 方法的返回值就是 apply 方法的调用者。
</code></pre></div><h4 id="_8-4-3-also-apply-的区别" tabindex="-1"><a class="header-anchor" href="#_8-4-3-also-apply-的区别" aria-hidden="true">#</a> 8.4.3 <code>also</code> &amp; <code>apply</code> 的区别</h4><p><code>also</code> 和 <code>apply</code> 的相同点：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token number">1</span><span class="token punctuation">.</span> 所有类型的变量，甚至是字面量都可以作为调用者；
<span class="token number">2</span><span class="token punctuation">.</span> 都只有一个函数类型的参数；
<span class="token number">3</span><span class="token punctuation">.</span> 返回值都是方法的调用者。
</code></pre></div><p><code>also</code> 和 <code>apply</code> 的不同点：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token number">1</span><span class="token punctuation">.</span> also 方法中，作为实参的 Lambda 表达式带一个参数，传入的参数值就是 also 方法的调用者；
   apply 方法中，作为实参的 Lambda 表达式无参数；

<span class="token number">2</span><span class="token punctuation">.</span> also 方法中，作为实参的 Lambda 表达式中不存在 <span class="token keyword">this</span>；
   apply 方法中，作为实参的 Lambda 表达式中存在 <span class="token keyword">this</span>，<span class="token keyword">this</span> 指向 apply 方法的调用者。
</code></pre></div><h4 id="_8-4-4-also-apply-的示例" tabindex="-1"><a class="header-anchor" href="#_8-4-4-also-apply-的示例" aria-hidden="true">#</a> 8.4.4 <code>also</code> &amp; <code>apply</code> 的示例</h4><p><img src="/assets/11.93e4cf0c.png" alt="" loading="lazy"></p><h3 id="_8-5-use" tabindex="-1"><a class="header-anchor" href="#_8-5-use" aria-hidden="true">#</a> 8.5 <code>use</code></h3><h4 id="_8-5-1-函数定义-closeable-kt" tabindex="-1"><a class="header-anchor" href="#_8-5-1-函数定义-closeable-kt" aria-hidden="true">#</a> 8.5.1 函数定义（<code>Closeable.kt</code>）</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token comment">//函数定义（在Closeable.kt文件中定义）</span>
<span class="token annotation builtin">@InlineOnly</span>
<span class="token annotation builtin">@RequireKotlin</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;1.2&quot;</span></span><span class="token punctuation">,</span> versionKind <span class="token operator">=</span> RequireKotlinVersionKind<span class="token punctuation">.</span>COMPILER_VERSION<span class="token punctuation">,</span> 
                message <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;Requiresnewer compiler version to be inlined correctly.&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> Closeable<span class="token operator">?</span><span class="token punctuation">,</span> R<span class="token operator">&gt;</span> T<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>block<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> R <span class="token punctuation">{</span>
    <span class="token keyword">var</span> exception<span class="token operator">:</span> Throwable<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">block</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exception <span class="token operator">=</span> e
        <span class="token keyword">throw</span> e
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">when</span> <span class="token punctuation">{</span>
            <span class="token function">apiVersionIsAtLeast</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">closeFinally</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>
            <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            exception <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">-&gt;</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span> <span class="token operator">-&gt;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>closeException<span class="token operator">:</span> Throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// cause.addSuppressed(closeException) // ignored here</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-5-2-作用" tabindex="-1"><a class="header-anchor" href="#_8-5-2-作用" aria-hidden="true">#</a> 8.5.2 作用</h4><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>扩展方法 use 的 Receiver 是泛型 T，且要求泛型 T 实现了 Closeable 接口，
这表示所有 Closeable 接口的子类对象都可以作为调用者来调用 use 方法。

use 方法的只有一个函数类型为 <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R 的参数 block，在 use 方法中执行了 <span class="token keyword">return</span> <span class="token function">block</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>，由此可知：
<span class="token number">1</span><span class="token punctuation">.</span> 当 Lambda 表达式作为 use 方法的实参时，Lambda 表达式的默认参数 it 就是 use 方法的调用者（即 receiver）
<span class="token number">2</span><span class="token punctuation">.</span> use 方法的返回值就是 Lambda 表达式的返回值

查看 use 方法的源码可知，<span class="token keyword">try</span><span class="token operator">-</span><span class="token keyword">catch</span> 代码块 会捕获 Lambda 表达式中的异常，
并且在 <span class="token keyword">finally</span> 代码块中会调用 Closeable 接口的子类对象（即 Receiver）的 close 方法（<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">closeFinally</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>）
</code></pre></div><h4 id="_8-5-3-示例" tabindex="-1"><a class="header-anchor" href="#_8-5-3-示例" aria-hidden="true">#</a> 8.5.3 示例</h4><p><img src="/assets/12.d5685f2c.png" alt="" loading="lazy"></p><h2 id="_9-常用的集合操作及相关的扩展方法" tabindex="-1"><a class="header-anchor" href="#_9-常用的集合操作及相关的扩展方法" aria-hidden="true">#</a> 9. 常用的集合操作及相关的扩展方法</h2><h3 id="_9-1-概述" tabindex="-1"><a class="header-anchor" href="#_9-1-概述" aria-hidden="true">#</a> 9.1 概述</h3><ol><li><p><code>Kotlin</code> 中的 <code>List</code>、<code>Set</code>、<code>Map</code> 三大集合接口都定义在 <code>Kotlin</code> 文件 <code>Collections.kt</code> 中。</p></li><li><p>在 <code>Kotlin</code> 文件 <code>_Collections.kt</code> 中，为集合提供了大量的扩展方法，包括 <code>forEach</code>、<code>filter</code>、<code>map</code>、<code>flatMap</code>、...</p></li><li><p><code>Kotlin</code> 中，<code>List</code> 和 <code>Set</code> 集合都继承了 <code>Iterable</code> 接口；</p></li><li><p><code>Map</code> 集合没有继承 <code>Iterable</code> 接口，但是 <code>Map</code> 提供了 <code>entries</code> 属性，表示由键值对构成的 <code>Set</code> 集合；</p></li><li><p><code>_Collections.kt</code> 中定义的扩展方法基本上是 <code>Iterable</code> 接口的扩展方法，即 <code>List</code> 和 <code>Set</code> 集合都可以使用 <code>Iterable</code> 接口的扩展方法。</p></li></ol><h3 id="_9-2-集合的遍历-扩展方法-foreach" tabindex="-1"><a class="header-anchor" href="#_9-2-集合的遍历-扩展方法-foreach" aria-hidden="true">#</a> 9.2 集合的遍历 &amp; 扩展方法 <code>forEach</code></h3><h4 id="_9-2-1-按索引遍历" tabindex="-1"><a class="header-anchor" href="#_9-2-1-按索引遍历" aria-hidden="true">#</a> 9.2.1 按索引遍历</h4><p><code>Java</code> 中：</p><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">T</span> ele <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Kotlin</code> 中：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span> until list<span class="token punctuation">.</span>indices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> ele <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_9-2-2-按元素遍历" tabindex="-1"><a class="header-anchor" href="#_9-2-2-按元素遍历" aria-hidden="true">#</a> 9.2.2 按元素遍历</h4><p><code>Java</code> 中使用 <code>for-each</code> 循环：</p><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">T</span> ele <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Kotlin</code> 中使用 <code>for-in</code> 循环：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">for</span><span class="token punctuation">(</span>ele <span class="token keyword">in</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_9-2-3-使用扩展方法-foreach-遍历" tabindex="-1"><a class="header-anchor" href="#_9-2-3-使用扩展方法-foreach-遍历" aria-hidden="true">#</a> 9.2.3 使用扩展方法 <code>forEach</code> 遍历</h4><p><code>Java 1.8</code> 开始提供了 <code>forEach</code> 方法结合 <code>Lambda</code> 表达式实现集合的遍历：</p><div class="language-java ext-java"><pre class="language-java"><code>list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Kotlin</code> 中提供扩展方法 <code>forEach</code> 实现集合的遍历：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token comment">// 函数定义（在 _Collections.kt 文件中定义的）</span>
<span class="token label symbol">@kotlin</span><span class="token punctuation">.</span>internal<span class="token punctuation">.</span>HidesMembers
<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>action<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span><span class="token operator">:</span> Unit <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>element <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token function">action</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数调用</span>
list<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span>
    <span class="token comment">// 默认参数 it 表示当前遍历到的元素</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_9-3-集合过滤-扩展方法-filter" tabindex="-1"><a class="header-anchor" href="#_9-3-集合过滤-扩展方法-filter" aria-hidden="true">#</a> 9.3 集合过滤 &amp; 扩展方法 <code>filter</code></h3><p>扩展方法 <code>filter</code> 的相关源码（在 <code>_Collections.kt</code> 中定义）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>predicate<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">filterTo</span><span class="token punctuation">(</span>ArrayList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> predicate<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> C <span class="token operator">:</span> MutableCollection<span class="token operator">&lt;</span><span class="token keyword">in</span> T<span class="token operator">&gt;</span><span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">filterTo</span><span class="token punctuation">(</span>destination<span class="token operator">:</span> C<span class="token punctuation">,</span> predicate<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean<span class="token punctuation">)</span><span class="token operator">:</span> C <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>element <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">predicate</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> destination<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
    <span class="token keyword">return</span> destination
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>扩展方法 filter 接收一个函数引用作为参数谓词 predicate，返回过滤后的 List 集合，

扩展方法 filter 内部又调用了扩展方法 filterTo，在 filterTo 方法中，遍历作为 Receiver 的集合，
根据谓词条件 predicate 将过滤得到的元素添加到新创建的 List 集合中，并返回该 List 集合。
</code></pre></div><p>示例：</p><p><img src="/assets/13.65a4e961.png" alt="" loading="lazy"></p><h3 id="_9-4-集合变换-扩展方法-map" tabindex="-1"><a class="header-anchor" href="#_9-4-集合变换-扩展方法-map" aria-hidden="true">#</a> 9.4 集合变换 &amp; 扩展方法 <code>map</code></h3><p>扩展方法 <code>map</code> 的相关源码（在 <code>_Collections.kt</code> 中定义）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>transform<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">mapTo</span><span class="token punctuation">(</span>ArrayList<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function">collectionSizeOrDefault</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> transform<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">internal</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">collectionSizeOrDefault</span><span class="token punctuation">(</span>default<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">is</span> Collection<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> 
<span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token keyword">else</span> default

<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token punctuation">,</span> C <span class="token operator">:</span> MutableCollection<span class="token operator">&lt;</span><span class="token keyword">in</span> R<span class="token operator">&gt;</span><span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">mapTo</span><span class="token punctuation">(</span>destination<span class="token operator">:</span> C<span class="token punctuation">,</span> transform<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> C <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>item <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
        destination<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">transform</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> destination
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>扩展方法 map 接收一个函数引用作为回调函数 transform，且扩展方法 map 内部又调用了扩展方法 mapTo，

在扩展方法 mapTo  中遍历作为 Receiver 的集合，并将当前遍历到的元素传入回调函数 transform 中，
返回一个变换后的元素，再将变换后的元素存入新创建的 List 集合中，最后返回这个 List 集合
</code></pre></div><p>示例：</p><p><img src="/assets/14.44623f83.png" alt="" loading="lazy"></p><h3 id="_9-5-集合变换-扩展方法-flatmap" tabindex="-1"><a class="header-anchor" href="#_9-5-集合变换-扩展方法-flatmap" aria-hidden="true">#</a> 9.5 集合变换 &amp; 扩展方法 <code>flatMap</code></h3><p>扩展方法 flatMap 的相关源码（在 _Collections.kt 中定义）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>transform<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Iterable<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">flatMapTo</span><span class="token punctuation">(</span>ArrayList<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> transform<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token punctuation">,</span> C <span class="token operator">:</span> MutableCollection<span class="token operator">&lt;</span><span class="token keyword">in</span> R<span class="token operator">&gt;</span><span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">flatMapTo</span><span class="token punctuation">(</span>destination<span class="token operator">:</span> C<span class="token punctuation">,</span> transform<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Iterable<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> C <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>element <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token function">transform</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
        destination<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> destination
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>扩展方法 flatMap 接收一个函数引用作为回调函数 transform，且扩展方法 flatMap 内部又调用了扩展方法 flatMapTo，

在扩展方法 flatMapTo 中遍历作为 Receiver 的集合，并将当前遍历到的元素传入回调函数 transform 中，
将一个元素变换成个集合，并返回这个变换得到的集合，再将变换得到的集合全部添加到新创建的 List 集合中，最后返回这个 List 集合。
</code></pre></div><p>示例：</p><p><img src="/assets/15.8e223229.png" alt="" loading="lazy"></p><h3 id="_9-6-iterable-集合-sequence-序列" tabindex="-1"><a class="header-anchor" href="#_9-6-iterable-集合-sequence-序列" aria-hidden="true">#</a> 9.6 <code>Iterable</code> 集合 &amp; <code>Sequence</code> 序列</h3><h4 id="_9-6-1-iterable-集合的扩展方法-filter、map、flatmap-的特点" tabindex="-1"><a class="header-anchor" href="#_9-6-1-iterable-集合的扩展方法-filter、map、flatmap-的特点" aria-hidden="true">#</a> 9.6.1 <code>Iterable</code> 集合的扩展方法 <code>filter</code>、<code>map</code>、<code>flatMap</code> 的特点</h4><p><code>Iterable</code> 集合的扩展方法 <code>filter</code>、<code>map</code>、<code>flatMap</code> 都返回一个新创建的 <code>List</code> 集合，所以可以采用链式编程的方式，依次调用 <code>filter</code>、<code>map</code>、<code>flatMap</code>，最后再调用 <code>forEach</code> 遍历最终得到的集合。</p><p><strong>注意</strong>：每次调用其中某个扩展方法时，会马上对作为 <code>Receiver</code> 的集合进行遍历，并返回一个新的集合。链式编程中，是将每次调用扩展方法后返回的新集合作为 <code>Receiver</code> 来调用下一个扩展方法。</p><h4 id="_9-6-2-iterable-集合转-sequence-序列-assequence" tabindex="-1"><a class="header-anchor" href="#_9-6-2-iterable-集合转-sequence-序列-assequence" aria-hidden="true">#</a> 9.6.2 <code>Iterable</code> 集合转 <code>Sequence</code> 序列：<code>asSequence</code></h4><p>在 <code>_Collections.kt</code> 文件中提供了 <code>asSequence</code> 方法，用于将一个集合转成一个序列：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">asSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Sequence<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Sequence <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token label symbol">@kotlin</span><span class="token punctuation">.</span>internal<span class="token punctuation">.</span>InlineOnly
<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">Sequence</span><span class="token punctuation">(</span><span class="token keyword">crossinline</span> iterator<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Iterator<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Sequence<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> Sequence<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Iterator<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token comment">// 在 Sequence.kt 中定义的 Sequence 序列接口</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> Sequence<span class="token operator">&lt;</span><span class="token keyword">out</span> T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Iterator<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_9-6-3-sequence-序列的扩展方法-filter、map、flatmap-的定义" tabindex="-1"><a class="header-anchor" href="#_9-6-3-sequence-序列的扩展方法-filter、map、flatmap-的定义" aria-hidden="true">#</a> 9.6.3 <code>Sequence</code> 序列的扩展方法 <code>filter</code>、<code>map</code>、<code>flatMap</code> 的定义</h4><p>在 <code>_Sequences.kt</code> 文件中，为序列接口 <code>Sequence</code> 提供了一系列的扩展方法：</p><blockquote><p>这些扩展方法和在 <code>_Collections.kt</code> 文件中为 <code>Iterable</code> 接口提供的扩展方法基本上是一样的。</p></blockquote><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Sequence<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>predicate<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean<span class="token punctuation">)</span><span class="token operator">:</span> Sequence<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">FilteringSequence</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> predicate<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token operator">&gt;</span> Sequence<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>transform<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> Sequence<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">TransformingSequence</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> transform<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token operator">&gt;</span> Sequence<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>transform<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Sequence<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Sequence<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">FlatteningSequence</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> transform<span class="token punctuation">,</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Sequence<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>action<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span><span class="token operator">:</span> Unit <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>element <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token function">action</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_9-6-4-sequence-序列的扩展方法-filter、map、flatmap-的特点-懒序列机制" tabindex="-1"><a class="header-anchor" href="#_9-6-4-sequence-序列的扩展方法-filter、map、flatmap-的特点-懒序列机制" aria-hidden="true">#</a> 9.6.4 <code>Sequence</code> 序列的扩展方法 <code>filter</code>、<code>map</code>、<code>flatMap</code> 的特点（懒序列机制）</h4><p>每次调用其中某个扩展方法时，并不会马上对作为 <code>Receiver</code> 的集合进行遍历，而是返回一个新的 <code>Sequence</code> 实例化对象。</p><p>不同的扩展方法返回的 <code>Sequence</code> 接口子类不同，但是在实例化新的 <code>Sequence</code> 实现类对象时会把作为 <code>Receiver</code> 的当前 <code>Sequence</code> 传给新的 <code>Sequence</code>，并且 <code>Sequence</code> 实例类在重写 <code>iterator</code> 方法时，传入的 <code>Sequence</code> 的特性会作用在新的 <code>Sequence</code> 上。</p><p>于是在链式编程中，最后返回的 <code>Sequence</code> 实例类对象包含了之前所有的扩展方法所返回的 <code>Sequence</code> 的特性，从而当调用 <code>forEach</code> 对最终的 <code>Sequence</code> 进行遍历时，相当于每次遍历都依次调用了 <code>filter</code>、<code>map</code>、<code>flatMap</code> 的回调函数。<code>Sequence</code> 的这个特点称为 <strong>懒序列机制</strong>。</p><h4 id="_9-6-5-示例-assequence-懒序列机制" tabindex="-1"><a class="header-anchor" href="#_9-6-5-示例-assequence-懒序列机制" aria-hidden="true">#</a> 9.6.5 示例：<code>asSequence</code> &amp; 懒序列机制</h4><p><img src="/assets/16.dedd1a2b.png" alt="" loading="lazy"></p><h3 id="_9-7-集合元素求和-扩展方法-sum" tabindex="-1"><a class="header-anchor" href="#_9-7-集合元素求和-扩展方法-sum" aria-hidden="true">#</a> 9.7 集合元素求和 &amp; 扩展方法 <code>sum</code></h3><p>扩展方法 <code>sum</code> 的相关源码（在 <code>_Collections.kt</code> 中定义）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token label symbol">@kotlin</span><span class="token punctuation">.</span>jvm<span class="token punctuation">.</span><span class="token function">JvmName</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;sumOfInt&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">fun</span> Iterable<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
    <span class="token keyword">var</span> sum<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>element <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> element
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token number">1</span><span class="token punctuation">.</span> 要求集合元素是数值类型：Byte、Short、Int、Long、Float、Double

<span class="token number">2</span><span class="token punctuation">.</span> 结果 ret <span class="token operator">=</span> ele1 <span class="token operator">+</span> ele2 <span class="token operator">+</span> <span class="token operator">..</span><span class="token punctuation">.</span>
</code></pre></div><p>示例：</p><p><img src="/assets/17.829932fe.png" alt="" loading="lazy"></p><h3 id="_9-8-集合元素聚合-扩展方法-reduce" tabindex="-1"><a class="header-anchor" href="#_9-8-集合元素聚合-扩展方法-reduce" aria-hidden="true">#</a> 9.8 集合元素聚合 &amp; 扩展方法 <code>reduce</code></h3><p>扩展方法 <code>reduce</code> 的相关源码（在 <code>_Collections.kt</code> 中定义）:</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>S<span class="token punctuation">,</span> T <span class="token operator">:</span> S<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>operation<span class="token operator">:</span> <span class="token punctuation">(</span>acc<span class="token operator">:</span> S<span class="token punctuation">,</span> T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> S<span class="token punctuation">)</span><span class="token operator">:</span> S <span class="token punctuation">{</span>
    <span class="token keyword">val</span> iterator <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Empty collection can&#39;t be reduced.&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> accumulator<span class="token operator">:</span> S <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        accumulator <span class="token operator">=</span> <span class="token function">operation</span><span class="token punctuation">(</span>accumulator<span class="token punctuation">,</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> accumulator
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>以首元素作为累加器的初始值，以回调函数 operation 作为累加运算算法，
从第二个元素开始遍历集合元素，进行自定义的累加运算，
返回最终得到的累加值

即：ret <span class="token operator">=</span> ele1 □ ele2 □ ele3 <span class="token operator">..</span><span class="token punctuation">.</span>  <span class="token comment">// 其中 &quot;□&quot; 表示通过回调函数 operation 自定义的累加运算符</span>
</code></pre></div><h3 id="_9-9-集合元素聚合-扩展方法-fold" tabindex="-1"><a class="header-anchor" href="#_9-9-集合元素聚合-扩展方法-fold" aria-hidden="true">#</a> 9.9 集合元素聚合 &amp; 扩展方法 <code>fold</code></h3><p>扩展方法 <code>fold</code> 的相关源码（在 <code>_Collections.kt</code> 中定义）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">fold</span><span class="token punctuation">(</span>initial<span class="token operator">:</span> R<span class="token punctuation">,</span> operation<span class="token operator">:</span> <span class="token punctuation">(</span>acc<span class="token operator">:</span> R<span class="token punctuation">,</span> T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> R <span class="token punctuation">{</span>
    <span class="token keyword">var</span> accumulator <span class="token operator">=</span> initial
    <span class="token keyword">for</span> <span class="token punctuation">(</span>element <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> accumulator <span class="token operator">=</span> <span class="token function">operation</span><span class="token punctuation">(</span>accumulator<span class="token punctuation">,</span> element<span class="token punctuation">)</span>
    <span class="token keyword">return</span> accumulator
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>以参数 initial 作为累加器的初始值，以回调函数 operation 作为累加运算算法，
从第一个元素开始遍历集合元素，进行自定义的累加运算，
返回最终得到的累加值

即：ret <span class="token operator">=</span> initial □ ele1 □ ele2 □ ele3 <span class="token operator">..</span><span class="token punctuation">.</span>  <span class="token comment">// 其中 &quot;□&quot; 表示通过回调函数 operation 自定义的累加运算符</span>
</code></pre></div><p>示例：</p><p><img src="/assets/18.e3c14250.png" alt="" loading="lazy"></p><h2 id="_10-kotlin-中的匿名内部类" tabindex="-1"><a class="header-anchor" href="#_10-kotlin-中的匿名内部类" aria-hidden="true">#</a> 10. <code>Kotlin</code> 中的匿名内部类</h2><h3 id="_10-1-kotlin-中匿名内部类的一般写法" tabindex="-1"><a class="header-anchor" href="#_10-1-kotlin-中匿名内部类的一般写法" aria-hidden="true">#</a> 10.1 <code>Kotlin</code> 中匿名内部类的一般写法</h3><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> foo <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> IFoo <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">funName1</span><span class="token punctuation">(</span>p1<span class="token operator">:</span> T1<span class="token punctuation">,</span> p2<span class="token operator">:</span> T2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">:</span> ReturnType <span class="token punctuation">{</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">funName2</span><span class="token punctuation">(</span>p1<span class="token operator">:</span> T1<span class="token punctuation">,</span> p2<span class="token operator">:</span> T2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">:</span> ReturnType <span class="token punctuation">{</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

    <span class="token operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token number">1</span><span class="token punctuation">.</span> 接口 IFoo 可以是 Kotlin 接口或 Java 接口或 Java 函数式接口；
<span class="token number">2</span><span class="token punctuation">.</span> funName1、funName2、<span class="token operator">..</span><span class="token punctuation">.</span> 表示接口提供的方法。
</code></pre></div><h3 id="_10-2-java-函数式接口的匿名内部类的-lambda-表达式简化写法" tabindex="-1"><a class="header-anchor" href="#_10-2-java-函数式接口的匿名内部类的-lambda-表达式简化写法" aria-hidden="true">#</a> 10.2 <code>Java</code> 函数式接口的匿名内部类的 <code>Lambda</code> 表达式简化写法</h3><p>特别地，对于 <code>Java</code> 函数式接口的匿名内部类：</p><div class="language-java ext-java"><pre class="language-java"><code><span class="token comment">// IFunction.java</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFunction</span> <span class="token punctuation">{</span>
    <span class="token class-name">ReturnType</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token class-name">T1</span> p1<span class="token punctuation">,</span> <span class="token class-name">T2</span> p2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 <code>Kotlin</code> 中可以使用 <code>Lambda</code> 表达式简化写成：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token comment">// Kotlin中使用 Lambda 表达式创建Java 函数式接口的匿名内部类</span>
<span class="token keyword">val</span> iFunction <span class="token operator">=</span> IFunction <span class="token punctuation">{</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token operator">-&gt;</span>
    <span class="token operator">..</span><span class="token punctuation">.</span>
    statementN <span class="token comment">// 最后一条语句的结果值应该是 ReturnType 类型</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这就相当于 <code>Kotlin</code> 编译器自动生成了一个名为 <code>IFunction</code> 的函数：</p><blockquote><p>该函数返回一个 <code>IFunction</code> 接口的匿名内部类对象</p></blockquote><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">IFunction</span><span class="token punctuation">(</span>block<span class="token operator">:</span> <span class="token punctuation">(</span>p1<span class="token operator">:</span> T1<span class="token punctuation">,</span> p2<span class="token operator">:</span> T2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> ReturnType<span class="token punctuation">)</span><span class="token operator">:</span> IFunction <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">object</span> <span class="token operator">:</span> IFunction <span class="token punctuation">{</span>
        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">func</span><span class="token punctuation">(</span>p1<span class="token operator">:</span> T1<span class="token punctuation">,</span> p2<span class="token operator">:</span> T2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">:</span> ReturnType <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">block</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-3-示例" tabindex="-1"><a class="header-anchor" href="#_10-3-示例" aria-hidden="true">#</a> 10.3 示例</h3><p><img src="/assets/19.ea6263cb.png" alt="" loading="lazy"></p><h2 id="_11-sam-转换" tabindex="-1"><a class="header-anchor" href="#_11-sam-转换" aria-hidden="true">#</a> 11. <code>SAM</code> 转换</h2><h3 id="_11-1-什么是-sam-转换" tabindex="-1"><a class="header-anchor" href="#_11-1-什么是-sam-转换" aria-hidden="true">#</a> 11.1 什么是 <code>SAM</code> 转换</h3><p>在 <code>Java</code> 中，若某个方法的参数类型是函数式接口类型，那么可以传入一个 <code>Java</code> 的 <code>Lambda</code> 表达式作为实参。此时，虽然 <code>Java</code> 的 <code>Lambda</code> 表达式只是在重写函数式接口中的抽象方法，但是最终还会把这个 <code>Java</code> 的 <code>Lambda</code> 表达式转换为函数式接口的匿名内部类。这种现象称之为 <code>SAM</code> 转换（即 <code>Single Abstract Method</code> 转换）。</p><blockquote><p><code>SAM</code> 转换就是将用于重写单一抽象方法的 <code>Lambda</code> 表达式转换为函数式接口的匿名内部类对象。</p></blockquote><h3 id="_11-2-kotlin-中的-sam-转换" tabindex="-1"><a class="header-anchor" href="#_11-2-kotlin-中的-sam-转换" aria-hidden="true">#</a> 11.2 <code>Kotlin</code> 中的 <code>SAM</code> 转换</h3><p>在 <code>Kotlin</code> 中，当调用 <code>Java</code> 方法时，若 <code>Java</code> 方法的参数类型是 <code>Java</code> 的函数式接口类型，那么可以传入一个 <code>Kotlin</code> 的 <code>Lambda</code> 表达式作为实参。此时也会发生 <code>SAM</code> 转换，即：把用于重写单一抽象方法的 <code>Kotlin</code> 的 <code>Lambda</code> 表达式转换为 <code>Java</code> 的函数式接口的匿名内部类。</p><blockquote><p><code>SAM</code> 转换就是将 <code>Lambda</code> 表达式转换为函数式接口的匿名内部类对象。</p><p>特别需要指出：每次进行 <code>SAM</code> 转换时，都会由 <code>Lambda</code> 表达式创建出一个新的匿名内部类对象。</p></blockquote><h3 id="_11-3-实现-kotlin-中的-sam-转换需满足的条件" tabindex="-1"><a class="header-anchor" href="#_11-3-实现-kotlin-中的-sam-转换需满足的条件" aria-hidden="true">#</a> 11.3 实现 <code>Kotlin</code> 中的 <code>SAM</code> 转换需满足的条件</h3><p><code>Kotlin</code> 中调用 <code>Java</code> 方法，且 <code>Java</code> 方法的参数类型是 <code>Java</code> 的函数式接口类型。</p><blockquote><p>调用 <code>Kotlin</code> 方法，或参数类型是 <code>Kotlin</code> 的函数式接口类型都不行，会出现语法错误。</p></blockquote><h3 id="_11-4-示例-1-kotlin-中的-sam-转换的基本用法" tabindex="-1"><a class="header-anchor" href="#_11-4-示例-1-kotlin-中的-sam-转换的基本用法" aria-hidden="true">#</a> 11.4 示例 1：<code>Kotlin</code> 中的 <code>SAM</code> 转换的基本用法</h3><p><img src="/assets/20.fc1650d7.png" alt="" loading="lazy"></p><h3 id="_11-5-示例-2-每次-sam-转换-lambda-表达式会新创建匿名内部类对象" tabindex="-1"><a class="header-anchor" href="#_11-5-示例-2-每次-sam-转换-lambda-表达式会新创建匿名内部类对象" aria-hidden="true">#</a> 11.5 示例 2：每次 <code>SAM</code> 转换 <code>Lambda</code> 表达式会新创建匿名内部类对象</h3><p><img src="/assets/21.e70c11d5.png" alt="" loading="lazy"></p><h3 id="_11-6-示例-3-避免-sam-转换时-lambda-表达式新创建匿名内部类对象" tabindex="-1"><a class="header-anchor" href="#_11-6-示例-3-避免-sam-转换时-lambda-表达式新创建匿名内部类对象" aria-hidden="true">#</a> 11.6 示例 3：避免 <code>SAM</code> 转换时 <code>Lambda</code> 表达式新创建匿名内部类对象</h3><p><img src="/assets/22.79947fb9.png" alt="" loading="lazy"></p><h2 id="_12-案例" tabindex="-1"><a class="header-anchor" href="#_12-案例" aria-hidden="true">#</a> 12. 案例</h2><h3 id="_12-1-案例-1-统计文件中每个字符的出现次数" tabindex="-1"><a class="header-anchor" href="#_12-1-案例-1-统计文件中每个字符的出现次数" aria-hidden="true">#</a> 12.1 案例 1：统计文件中每个字符的出现次数</h3><h4 id="_12-1-1-相关知识点" tabindex="-1"><a class="header-anchor" href="#_12-1-1-相关知识点" aria-hidden="true">#</a> 12.1.1 相关知识点</h4><h5 id="_12-1-1-1-file-的扩展方法-readtext" tabindex="-1"><a class="header-anchor" href="#_12-1-1-1-file-的扩展方法-readtext" aria-hidden="true">#</a> 12.1.1.1 <code>File</code> 的扩展方法 <code>readText</code></h5><p>扩展方法 <code>readText</code>（定义在 <code>FileReadWrite.kt</code> 文件中）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">fun</span> File<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span>charset<span class="token operator">:</span> Charset <span class="token operator">=</span> Charsets<span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token function">readBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>charset<span class="token punctuation">)</span>
</code></pre></div><p>作用：将 <code>File</code> 对象表示的文件内容转成字符串。</p><p>注意：内部调用的扩展方法 <code>readBytes()</code> 要求文件大小不超过 <code>2G</code>。</p><h5 id="_12-1-1-2-数组的扩展方法-filternot" tabindex="-1"><a class="header-anchor" href="#_12-1-1-2-数组的扩展方法-filternot" aria-hidden="true">#</a> 12.1.1.2 数组的扩展方法 <code>filterNot</code></h5><p>扩展方法 <code>filterNot</code>（定义在 <code>_Arrays.kt</code> 文件中）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> IntArray<span class="token punctuation">.</span><span class="token function">filterNot</span><span class="token punctuation">(</span>predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">filterNotTo</span><span class="token punctuation">(</span>ArrayList<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> predicate<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Array<span class="token operator">&lt;</span><span class="token keyword">out</span> T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">filterNot</span><span class="token punctuation">(</span>predicate<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">filterNotTo</span><span class="token punctuation">(</span>ArrayList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> predicate<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>将满足谓词 `predicate` 条件的元素过滤排除掉，返回由排除后剩下的元素构成的新的 `List` 集合。
</code></pre></div><p>注意：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token number">1</span><span class="token punctuation">.</span> 类似于 IntArray<span class="token punctuation">.</span>filterNot，对于数值类型 Byte、Char、Short、Float、Double 都有对应的扩展方法 filterNot。

<span class="token number">2</span><span class="token punctuation">.</span> 对于扩展方法 filter，是将满足谓词 predicate 条件的元素过滤保存下来，返回由满足谓词条件的元素构成的新的 List 集合。
</code></pre></div><h5 id="_12-1-1-3-iterable-集合的扩展方法-groupby" tabindex="-1"><a class="header-anchor" href="#_12-1-1-3-iterable-集合的扩展方法-groupby" aria-hidden="true">#</a> 12.1.1.3 <code>Iterable</code> 集合的扩展方法 <code>groupBy</code></h5><p>扩展方法 <code>groupBy</code>（定义在 <code>_Collections.kt</code> 文件中）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> K<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span>keySelector<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> K<span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">groupByTo</span><span class="token punctuation">(</span>LinkedHashMap<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> MutableList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> keySelector<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> K<span class="token punctuation">,</span> M <span class="token operator">:</span> MutableMap<span class="token operator">&lt;</span><span class="token keyword">in</span> K<span class="token punctuation">,</span> MutableList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">groupByTo</span><span class="token punctuation">(</span>destination<span class="token operator">:</span> M<span class="token punctuation">,</span> 
keySelector<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> K<span class="token punctuation">)</span><span class="token operator">:</span> M <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>element <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> key <span class="token operator">=</span> <span class="token function">keySelector</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
        <span class="token keyword">val</span> list <span class="token operator">=</span> destination<span class="token punctuation">.</span><span class="token function">getOrPut</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span> ArrayList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> destination
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>将 List 集合转换成一个 Map 集合。Map 集合中键值对的 key 通过回调函数 keySelector 返回。
回调函数 keySelector 的作用就是将遍历到的 List 集合元素转换成一个对应的 key 值，
于是在 groupByTo 方法中，将对应相同 key 的 List 集合元素存放在一个新的 List 集合中，
并将该新的 List 集合作为 key 值对应的 value 值。
</code></pre></div><h5 id="_12-1-1-4-map-映射的扩展方法-map" tabindex="-1"><a class="header-anchor" href="#_12-1-1-4-map-映射的扩展方法-map" aria-hidden="true">#</a> 12.1.1.4 <code>Map</code> 映射的扩展方法 <code>map</code></h5><p>扩展方法 <code>map</code>（定义在 <code>_Collections.kt</code> 文件中）：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> R<span class="token operator">&gt;</span> Map<span class="token operator">&lt;</span><span class="token keyword">out</span> K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>transform<span class="token operator">:</span> <span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">mapTo</span><span class="token punctuation">(</span>ArrayList<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">,</span> transform<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> R<span class="token punctuation">,</span> C <span class="token operator">:</span> MutableCollection<span class="token operator">&lt;</span><span class="token keyword">in</span> R<span class="token operator">&gt;</span><span class="token operator">&gt;</span> Map<span class="token operator">&lt;</span><span class="token keyword">out</span> K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">mapTo</span><span class="token punctuation">(</span>destination<span class="token operator">:</span> C<span class="token punctuation">,</span> transform<span class="token operator">:</span><span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>V<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> R<span class="token punctuation">)</span><span class="token operator">:</span> C <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>item <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
        destination<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">transform</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> destination
<span class="token punctuation">}</span>
</code></pre></div><p>作用：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code>遍历 Map 集合，遍历到的元素类型为 Map<span class="token punctuation">.</span>Entry，将遍历的元素传给回调函数 transform，
回调函数会返回一个变换后的新元素，存入到新的 List 集合中，map 方法返回由变换后的新元素构成的新的 List 集合。
</code></pre></div><blockquote><p>注意：</p><p><code>Kotlin</code> 为 <code>Map</code> 集合专门创建了一个文件 <code>_Maps.kt</code>，用来定义 <code>Map</code> 集合的扩展方法。</p><p>（<code>List</code> 集合和 <code>Set</code> 集合的扩展方法定义在 <code>_Collections.kt</code> 文件中）</p></blockquote><h4 id="_12-1-2-代码实现" tabindex="-1"><a class="header-anchor" href="#_12-1-2-代码实现" aria-hidden="true">#</a> 12.1.2 代码实现</h4><p><img src="/assets/23.be6878f3.png" alt="" loading="lazy"></p><h3 id="_12-2-案例-2-kotlin-实现-html" tabindex="-1"><a class="header-anchor" href="#_12-2-案例-2-kotlin-实现-html" aria-hidden="true">#</a> 12.2 案例 2：<code>Kotlin</code> 实现 <code>Html</code></h3><h4 id="_12-2-1-相关知识点" tabindex="-1"><a class="header-anchor" href="#_12-2-1-相关知识点" aria-hidden="true">#</a> 12.2.1 相关知识点</h4><h5 id="_12-2-1-1-this-outclass-的作用" tabindex="-1"><a class="header-anchor" href="#_12-2-1-1-this-outclass-的作用" aria-hidden="true">#</a> 12.2.1.1 <code>this@OutClass</code> 的作用</h5><p>在类 <code>A</code> 的定义中，可以定义其他类 <code>B</code> 的扩展方法。此时，在其他类 <code>B</code> 的扩展方法中，<code>this</code> 仍然指向类 <code>B</code> 的实例化对象，如果想在其他类 <code>B</code> 的扩展方法中访问类 <code>A</code>，则需要使用 <code>this@A</code>（即 <code>this@OutClass</code>）。</p><p><strong>注意</strong>：因为类 <code>B</code> 的扩展方法是在类 <code>A</code> 中定义的，所以类 <code>B</code> 的扩展方法只能在类 <code>A</code> 中访问（如在类 <code>A</code> 的其他成员方法中访问）。</p><p><img src="/assets/24.fccfb0dc.png" alt="" loading="lazy"></p><h5 id="_12-2-1-2-string-的运算符-的重载函数" tabindex="-1"><a class="header-anchor" href="#_12-2-1-2-string-的运算符-的重载函数" aria-hidden="true">#</a> 12.2.1.2 <code>&quot;..&quot;{...}</code> &amp; <code>String</code> 的运算符 &quot;<code>()</code>&quot; 的重载函数</h5><p>对于形如 <code>&quot;..&quot;{...}</code> 的代码，其实是在调用 <code>String</code> 的运算符 &quot;<code>()</code>&quot; 的重载函数：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">operator</span> <span class="token keyword">fun</span> String<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>block<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre></div><h5 id="_12-2-1-3-string-的运算符-的重载函数" tabindex="-1"><a class="header-anchor" href="#_12-2-1-3-string-的运算符-的重载函数" aria-hidden="true">#</a> 12.2.1.3 <code>&quot;..&quot;(...)</code> &amp; <code>String</code> 的运算符 &quot;<code>()</code>&quot; 的重载函数</h5><p>对于形如 <code>&quot;..&quot;(...)</code> 的代码，其实是在调用 <code>String</code> 的运算符 &quot;<code>()</code>&quot; 的重载函数：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">operator</span> <span class="token keyword">fun</span> String<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre></div><h5 id="_12-2-1-4-string-的运算符-的重载函数" tabindex="-1"><a class="header-anchor" href="#_12-2-1-4-string-的运算符-的重载函数" aria-hidden="true">#</a> 12.2.1.4 <code>+&quot;...&quot;</code> &amp; <code>String</code> 的运算符 &quot;<code>()</code>&quot; 的重载函数</h5><p>对于形如 <code>+&quot;...&quot;</code> 的代码，其实是在调用 <code>String</code> 的运算符 &quot;<code>()</code>&quot; 的重载函数：</p><div class="language-kotlin ext-kt"><pre class="language-kotlin"><code><span class="token keyword">operator</span> <span class="token keyword">fun</span> String<span class="token punctuation">.</span><span class="token function">unaryPlus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="_12-2-2-代码实现" tabindex="-1"><a class="header-anchor" href="#_12-2-2-代码实现" aria-hidden="true">#</a> 12.2.2 代码实现</h4><p><img src="/assets/25.256814e4.png" alt="" loading="lazy"></p><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zengkaiqiang562/JavaGuide/edit/main/docs/zkq/kotlin/5-advanced-function.md" rel="noopener noreferrer" target="_blank" arialabel="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/7/6 18:07:29</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: zengkaiqiang562@163.com">zengk</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/zkq/kotlin/4-expression.html" class="nav-link prev" arialabel="表达式"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->表达式</div></a><a href="/zkq/kotlin/6-advanced-class.html" class="nav-link next" arialabel="类型进阶"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">类型进阶<!----></div></a></nav><!----><!----></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright © 2024 Zenk562</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.2a01fc36.js" defer></script>
  </body>
</html>
